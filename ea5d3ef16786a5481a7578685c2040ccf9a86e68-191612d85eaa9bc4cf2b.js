(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{19:function(t,e){},BZIa:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var i=n("a3TU"),r=Math.PI/2;function a(t,e){var n=e.viewport,i=n.metersPerPixel,a=t.header.mbs[1],s=t.header.mbs[0],c=t.header.mbs[2],h=t.header.mbs[3],l=n.height,d=n.width,f=n.latitude,p=n.longitude,m=[p,f],v=[s,a,c],y=[p,a],g=[s,f],b=Math.sqrt(l*l+d*d)*i[0],_=.5*l+h/6378137,T=.5*d+h/6378137;if(o(m,v)>b+h/6378137)return"OUT";if(o(m,y)>_)return"OUT";if(o(m,g)>T)return"OUT";if(0===t.lodMetricValue)return"DIG";var w=u(t,e);return(w*=r)<.5?"OUT":!t.header.children||w<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}function s(t){var e=t[0],n=t[1],r=t[2],a=Object(i.i)(e),s=Object(i.i)(n),o=1+r/6378137,u=o*Math.cos(s);return[e=u*Math.cos(a),n=u*Math.sin(a),r=o*Math.sin(s)]}function o(t,e){var n=t[0],i=t[1],r=t[2],a=void 0===r?0:r,o=e[0],u=e[1],c=e[2],h=s([o,u,void 0===c?0:c]),l=s([n,i,a]),d=l[0]-h[0],f=l[1]-h[1],p=l[2]-h[2];return d*d+f*f+p*p}function u(t,e){var n=e.viewport,i=t.header.mbs[1],r=[t.header.mbs[0],i,t.header.mbs[2]],a=t.header.mbs[3]/6378137,s=o(n.unprojectPosition(n.cameraPosition),r)-a*a;return s<=0?170141175e30:function(t){return t.viewport.projectionMatrix[5]}(e)*a/Math.sqrt(s)*300}},"FJ6+":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var i={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},r={ADD:1,REPLACE:2},a={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},s={I3S:"I3S",TILES3D:"TILES3D"},o={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},u={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},Fqdk:function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var i=n("o0o1"),r=n.n(i),a=(n("wcNg"),n("HaE+")),s=n("rePB"),o=n("vuIU"),u=n("Nw31"),c=n("zXfU"),h=n("Ns70"),l=n("G+eI"),d=n("Qk7e"),f=n("VnMh"),p=n("wBSN"),m=function(t,e,n){this.item=t,this.previous=e,this.next=n},v=function(){function t(){this.head=null,this.tail=null,this._length=0}var e=t.prototype;return e.add=function(t){var e=new m(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e},e.remove=function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)},e.splice=function(t,e){t!==e&&(this.remove(e),this._insert(t,e))},e._insert=function(t,e){var n=t.next;t.next=e,this.tail===t?this.tail=e:n.previous=e,e.next=n,e.previous=t,++this._length},Object(o.a)(t,[{key:"length",get:function(){return this._length}}]),t}();function y(t){return null!=t}var g=function(){function t(){this._list=new v,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}var e=t.prototype;return e.reset=function(){this._list.splice(this._list.tail,this._sentinel)},e.touch=function(t){var e=t._cacheNode;y(e)&&this._list.splice(this._sentinel,e)},e.add=function(t,e,n){y(e._cacheNode)||(e._cacheNode=this._list.add(e),n&&n(t,e))},e.unloadTile=function(t,e,n){var i=e._cacheNode;y(i)&&(this._list.remove(i),e._cacheNode=void 0,n&&n(t,e))},e.unloadTiles=function(t,e){var n=this._trimTiles;this._trimTiles=!1;for(var i=this._list,r=1024*t.maximumMemoryUsage*1024,a=this._sentinel,s=i.head;s!==a&&(t.gpuMemoryUsageInBytes>r||n);){var o=s.item;s=s.next,this.unloadTile(t,o,e)}},e.trim=function(){this._trimTiles=!0},t}();var b=n("rOwd"),_=new c.a,T=new c.a,w=new b.b([new b.d,new b.d,new b.d,new b.d,new b.d,new b.d]);function O(t,e){var n=t.cameraDirection,i=t.cameraUp,r=t.height,a=t.distanceScales.metersPerUnit,s=[t.longitude,t.latitude,0],o=h.a.WGS84.cartographicToCartesian(s,new c.a),u=h.a.WGS84.eastNorthUpToFixedFrame(o),l=t.unprojectPosition(t.cameraPosition),d=h.a.WGS84.cartographicToCartesian(l,new c.a),f=new c.a(u.transformAsVector(new c.a(n).scale(a))).normalize(),p=new c.a(u.transformAsVector(new c.a(i).scale(a))).normalize();return function(t,e){var n=t.getFrustumPlanes(),i=0;for(var r in n){var a=n[r],s=a.normal.dot(t.center);T.copy(a.normal).scale(a.distance-s).add(t.center);var o=t.unprojectPosition(T),u=h.a.WGS84.cartographicToCartesian(o,new c.a);w.planes[i++].fromPointNormal(u,_.copy(e).subtract(u))}}(t,o),{camera:{position:d,direction:f,up:p},viewport:t,height:r,cullingVolume:w,frameNumber:e,sseDenominator:1.15}}var S=new c.a;function E(t){var e=t.halfAxes,n=t.radius,i=t.width,r=t.height;if(e){var a=function(t){t.getColumn(0,S);var e=t.getColumn(1),n=t.getColumn(2);return S.add(e).add(n).len()}(e);return Math.log2(6356752.314245179/a)}return n?Math.log2(6356752.314245179/n):r&&i?(Math.log2(6378137/i)+Math.log2(6378137/r))/2:1}var M=n("fa8B"),k=n("dI71"),j=n("FJ6+"),x=n("vrw9"),I=function(t){function e(){return t.apply(this,arguments)||this}Object(k.a)(e,t);var n=e.prototype;return n.compareDistanceToCamera=function(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera},n.updateTileVisibility=function(e,n){if(t.prototype.updateTileVisibility.call(this,e,n),e.isVisibleAndInRequestVolume){var i=e.children.length>0;if(e.hasTilesetContent&&i){var r=e.children[0];return this.updateTileVisibility(r,n),void(e._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(e,n))e._visible=!1;else{var a=e.refine===j.e.REPLACE,s=e._optimChildrenWithinParent===j.b.USE_OPTIMIZATION;a&&s&&i&&!this.anyChildrenVisible(e,n)&&(e._visible=!1)}}},n.meetsScreenSpaceErrorEarly=function(t,e){var n=t.parent;return!(!n||n.hasTilesetContent||n.refine!==j.e.ADD)&&!this.shouldRefine(t,e,!0)},e}(x.a),C=n("xszv"),A=n("BZIa"),P="REQUESTED",R="COMPLETED",N="ERROR",q=function(){function t(){this._statusMap={}}var e=t.prototype;return e.add=function(t,e,n,i){var r=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:n,key:e,frameState:i,status:P},t().then((function(t){r._statusMap[e].status=R,r._statusMap[e].callback(t,i)})).catch((function(t){r._statusMap[e].status=N,n(t)})))},e.update=function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)},e.find=function(t){return this._statusMap[t]},t}();function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var L=function(t){function e(e){var n;return(n=t.call(this,e)||this)._tileManager=new q,n}Object(k.a)(e,t);var n=e.prototype;return n.shouldRefine=function(t,e){return t._lodJudge=Object(A.b)(t,e),"DIG"===t._lodJudge},n.updateChildTiles=function(t,e){for(var n,i=this,r=t.header.children||[],a=t.children,s=t.tileset,o=function(){var r=n.value,o=r.id+"-"+e.viewport.id,u=a&&a.find((function(t){return t.id===o}));if(u)u&&i.updateTile(u,e);else{var c=function(){return i._loadTile(r.id,s)};i._tileManager.find(o)?i._tileManager.update(o,e):(s.tileset.nodePages&&(c=function(){return s.tileset.nodePagesTile.formTileFromNodePages(r.id)}),i._tileManager.add(c,o,(function(e){return i._onTileLoad(e,t,o)}),e))}},u=z(r);!(n=u()).done;)o();return!1},n._loadTile=function(){var t=Object(a.a)(r.a.mark((function t(e,n){var i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.loader,a=n.getTileUrl(n.url+"/nodes/"+e),s=V(V({},n.loadOptions),{},{i3s:V(V({},n.loadOptions.i3s),{},{isTileHeader:!0,loadContent:!1})}),t.next=5,Object(C.a)(a,i,s);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n._onTileLoad=function(t,e,n){var i=new M.a(e.tileset,t,e,n);e.children.push(i);var r=this._tileManager.find(i.id).frameState;this.updateTile(i,r),this._frameNumber===r.frameNumber&&this.executeTraversal(i,r)},e}(x.a);function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={description:"",ellipsoid:h.a.WGS84,modelMatrix:new u.a,throttleRequests:!0,maxRequests:64,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(){},onTraversalComplete:function(t){return t},contentLoader:void 0,viewDistanceScale:1,maximumScreenSpaceError:8,loadTiles:!0,updateTransforms:!0,viewportTraversersMap:null,loadOptions:{fetch:{}},attributions:[],basePath:"",i3s:{}},H=function(){function t(t,e){Object(d.a)(t),this.options=W(W({},X),e),this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||f.b.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.loadOptions=this.options.loadOptions||{},this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new g,this._requestScheduler=new p.a({throttleRequests:this.options.throttleRequests,maxRequests:this.options.maxRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new l.a({id:this.url}),this._initializeStats(),this._extensionsUsed=void 0,this.dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this._initializeTileSet(t)}var e=t.prototype;return e.destroy=function(){this._destroy()},e.isLoaded=function(){return 0===this._pendingCount&&0!==this._frameNumber},e.setProps=function(t){this.options=W(W({},this.options),t)},e.setOptions=function(t){this.options=W(W({},this.options),t)},e.getTileUrl=function(t){return t.startsWith("data:")?t:""+t+this.queryParams},e.hasExtension=function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)},e.update=function(t){if((!("loadTiles"in this.options)||this.options.loadTiles)&&!(this.traverseCounter>0)){!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t instanceof Array||(t=[t]),this._cache.reset(),this._frameNumber++,this.traverseCounter=t.length;for(var e,n=[],i=B(t);!(e=i()).done;){var r=e.value.id;this._needTraverse(r)?n.push(r):this.traverseCounter--}for(var a,s=B(t);!(a=s()).done;){var o=a.value,u=o.id;if(this.roots[u]||(this.roots[u]=this._initializeTileHeaders(this.tileset,null)),n.includes(u)){var c=O(o,this._frameNumber);this._traverser.traverse(this.roots[u],c,this.options)}}}},e._needTraverse=function(t){var e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e===t},e._onTraversalEnd=function(t){var e=t.viewport.id;this.frameStateData[e]||(this.frameStateData[e]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var n=this.frameStateData[e],i=Object.values(this._traverser.selectedTiles);n.selectedTiles=i,n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()},e._updateTiles=function(){for(var t in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}this.selectedTiles=this.options.onTraversalComplete(this.selectedTiles);for(var n,i=B(this.selectedTiles);!(n=i()).done;){var r=n.value;this._tiles[r.id]=r}this._loadTiles(),this._unloadTiles(),this._updateStats()},e._tilesChanged=function(t,e){if(t.length!==e.length)return!0;var n=new Set(t.map((function(t){return t.id}))),i=new Set(e.map((function(t){return t.id}))),r=t.filter((function(t){return!i.has(t.id)})).length>0;return r=r||e.filter((function(t){return!n.has(t.id)})).length>0},e._loadTiles=function(){for(var t,e=B(this._requestedTiles);!(t=e()).done;){var n=t.value;n.contentUnloaded&&this._loadTile(n)}},e._unloadTiles=function(){this._cache.unloadTiles(this,(function(t,e){return t._unloadTile(e)}))},e._updateStats=function(){for(var t,e=0,n=0,i=B(this.selectedTiles);!(t=i()).done;){var r=t.value;r.contentAvailable&&r.content&&(e++,r.content.pointCount&&(n+=r.content.pointCount))}this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=e,this.stats.get("Points").count=n},e._initializeTileSet=function(t){this.root=this._initializeTileHeaders(t,null),this.type===j.c.TILES3D&&this._initializeCesiumTileset(t),this.type===j.c.I3S&&this._initializeI3STileset(),this._calculateViewProps()},e._calculateViewProps=function(){var t=this.root;Object(d.a)(t);var e=t.boundingVolume.center;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new c.a,void(this.zoom=1);this.cartographicCenter=h.a.WGS84.cartesianToCartographic(e,new c.a),this.cartesianCenter=e,this.zoom=E(t.boundingVolume)},e._initializeStats=function(){this.stats.get("Tiles In Tileset(s)"),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points","memory"),this.stats.get("Tile Memory Use","memory")},e._initializeTileHeaders=function(t,e){var n=new M.a(this,t.root,e);if(e&&(e.children.push(n),n.depth=e.depth+1),this.type===j.c.TILES3D){var i=[];for(i.push(n);i.length>0;){var r=i.pop();this.stats.get("Tiles In Tileset(s)").incrementCount();for(var a,s=B(r.header.children||[]);!(a=s()).done;){var o=a.value,u=new M.a(this,o,r);r.children.push(u),u.depth=r.depth+1,i.push(u)}}}return n},e._initializeTraverser=function(){var t;switch(this.type){case j.c.TILES3D:t=I;break;case j.c.I3S:t=L;break;default:t=x.a}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})},e._destroyTileHeaders=function(t){this._destroySubtree(t)},e._loadTile=function(){var t=Object(a.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._onStartTileLoading(),t.next=4,e.loadContent();case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this._onTileLoadError(e,t.t0);case 10:return t.prev=10,this._onEndTileLoading(),this._onTileLoad(e,n),t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[0,7,10,14]])})));return function(e){return t.apply(this,arguments)}}(),e._onTileLoadError=function(t,e){this.stats.get("Failed Tile Loads").incrementCount();var n=e.message||e.toString(),i=t.url;console.error("A 3D tile failed to load: "+t.url+" "+n),this.options.onTileError(t,n,i)},e._onTileLoad=function(t,e){e&&(t&&t.content&&function(t,e){Object(d.a)(t),Object(d.a)(e);var n=e.rtcCenter,i=e.gltfUpAxis,r=t.computedTransform,a=t.boundingVolume.center,s=new u.a(r);switch(n&&s.translate(n),i){case"Z":break;case"Y":var o=(new u.a).rotateX(Math.PI/2);s=s.multiplyRight(o);break;case"X":var l=(new u.a).rotateY(-Math.PI/2);s=s.multiplyRight(l)}e.isQuantized&&s.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);var f=new c.a(a);e.cartesianModelMatrix=s,e.cartesianOrigin=f;var p=h.a.WGS84.cartesianToCartographic(f,new c.a),m=h.a.WGS84.eastNorthUpToFixedFrame(f).invert();e.cartographicModelMatrix=m.multiplyRight(s),e.cartographicOrigin=p,e.modelMatrix=e.cartographicModelMatrix}(t,t.content),this._addTileToCache(t),this.options.onTileLoad(t))},e._onStartTileLoading=function(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()},e._onEndTileLoading=function(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()},e._addTileToCache=function(t){this._cache.add(this,t,(function(e){return e._updateCacheStats(t)}))},e._updateCacheStats=function(t){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes},e._unloadTile=function(t){this.gpuMemoryUsageInBytes-=t.content&&t.content.byteLength||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()},e._destroy=function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){for(var e,n=t.pop(),i=B(n.children);!(e=i()).done;){var r=e.value;t.push(r)}this._destroyTile(n)}this.root=null},e._destroySubtree=function(t){var e=t,n=[];for(n.push(e);n.length>0;){for(var i,r=B((t=n.pop()).children);!(i=r()).done;){var a=i.value;n.push(a)}t!==e&&this._destroyTile(t)}e.children=[]},e._destroyTile=function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()},e._initializeCesiumTileset=function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras},e._initializeI3STileset=function(){this.loadOptions.i3s&&"token"in this.loadOptions.i3s&&(this._queryParams.token=this.loadOptions.i3s.token)},Object(o.a)(t,[{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(t){for(var e=[],n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];e.push(r+"="+t[r])}switch(e.length){case 0:return"";case 1:return"?"+e[0];default:return"?"+e.join("&")}}(this._queryParams)),this._queryParamsString}}]),t}()},"G+eI":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("1OyB"),r=n("vuIU"),a=n("OyGM"),s=function(){function t(e,n){Object(i.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(r.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),o=function(){function t(e){var n=e.id,r=e.stats;Object(i.a)(this,t),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return Object(r.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"size",get:function(){return Object.keys(this.stats).length}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof s?t:new s(e,n)),this.stats[e]}}]),t}()},GA6j:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("1OyB"),r=n("vuIU"),a=n("Ji7U"),s=n("md7G"),o=n("foSv"),u=n("fxzv"),c=n("+H0l"),h=n("sSh/"),l=n("HwUG"),d=n("ZxFD"),f=n("n+fv");function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(s.a)(this,n)}}var m=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),y=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),g={},b=function(t){Object(a.a)(n,t);var e=p(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(r.a)(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return y}},{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,n,i,r,a,s,o,u){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=a,this[6]=s,this[7]=o,this[8]=u,this.check()}},{key:"setRowMajor",value:function(t,e,n,i,r,a,s,o,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=e,this[4]=r,this[5]=o,this[6]=n,this[7]=a,this[8]=u,this.check()}},{key:"determinant",value:function(){return l.b(this)}},{key:"identity",value:function(){return this.copy(m)}},{key:"fromQuaternion",value:function(t){return l.c(this,t),this.check()}},{key:"transpose",value:function(){return l.i(this,this),this.check()}},{key:"invert",value:function(){return l.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return l.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return l.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return l.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?l.g(this,this,t):l.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return l.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=d.i(e||[-0,-0],t,this);break;case 3:e=f.p(e||[-0,-0,-0],t,this);break;case 4:e=Object(h.d)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}],[{key:"IDENTITY",get:function(){return g.IDENTITY=g.IDENTITY||Object.freeze(new n(m)),g.IDENTITY}},{key:"ZERO",get:function(){return g.ZERO=g.ZERO||Object.freeze(new n(v)),g.ZERO}}]),n}(u.a)},HwUG:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"i",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return d}));n("QFcT");var i=n("yU0y");function r(){var t=new i.a(9);return i.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function a(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function s(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],c=e[7],h=e[8],l=h*s-o*c,d=-h*a+o*u,f=c*a-s*u,p=n*l+i*d+r*f;return p?(p=1/p,t[0]=l*p,t[1]=(-h*i+r*c)*p,t[2]=(o*i-r*s)*p,t[3]=d*p,t[4]=(h*n-r*u)*p,t[5]=(-o*n+r*a)*p,t[6]=f*p,t[7]=(-c*n+i*u)*p,t[8]=(s*n-i*a)*p,t):null}function o(t){var e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],s=t[5],o=t[6],u=t[7],c=t[8];return e*(c*a-s*u)+n*(-c*r+s*o)+i*(u*r-a*o)}function u(t,e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],h=e[7],l=e[8],d=n[0],f=n[1],p=n[2],m=n[3],v=n[4],y=n[5],g=n[6],b=n[7],_=n[8];return t[0]=d*i+f*s+p*c,t[1]=d*r+f*o+p*h,t[2]=d*a+f*u+p*l,t[3]=m*i+v*s+y*c,t[4]=m*r+v*o+y*h,t[5]=m*a+v*u+y*l,t[6]=g*i+b*s+_*c,t[7]=g*r+b*o+_*h,t[8]=g*a+b*u+_*l,t}function c(t,e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],h=e[7],l=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=a,t[3]=s,t[4]=o,t[5]=u,t[6]=d*i+f*s+c,t[7]=d*r+f*o+h,t[8]=d*a+f*u+l,t}function h(t,e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=e[4],u=e[5],c=e[6],h=e[7],l=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*s,t[1]=f*r+d*o,t[2]=f*a+d*u,t[3]=f*s-d*i,t[4]=f*o-d*r,t[5]=f*u-d*a,t[6]=c,t[7]=h,t[8]=l,t}function l(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function d(t,e){var n=e[0],i=e[1],r=e[2],a=e[3],s=n+n,o=i+i,u=r+r,c=n*s,h=i*s,l=i*o,d=r*s,f=r*o,p=r*u,m=a*s,v=a*o,y=a*u;return t[0]=1-l-p,t[3]=h-y,t[6]=d+v,t[1]=h+y,t[4]=1-c-p,t[7]=f-m,t[2]=d-v,t[5]=f+m,t[8]=1-c-l,t}},Ns70:function(t,e,n){"use strict";n.d(e,"a",(function(){return q}));var i=n("ODXe"),r=n("1OyB"),a=n("vuIU"),s=n("zXfU"),o=n("tS8E"),u=n("gOKY"),c=n("Nw31"),h=n("a3TU"),l=n("n+fv"),d=(Math.max(6378137,6378137,6356752.314245179),function(t){return t}),f=new s.a;function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return Object(h.f)(t)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=n(t.longitude),e[1]=n(t.latitude),e[2]=t.height):(e[0]=n(t.x),e[1]=n(t.y),e[2]=t.z),e}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return p(t,e,h.b._cartographicRadians?d:h.i)}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d;return Object(h.f)(e)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=n(t[0]),e.latitude=n(t[1]),e.height=t[2]):(e.x=n(t[0]),e.y=n(t[1]),e.z=t[2]),e}function y(t,e){return v(t,e,h.b._cartographicRadians?d:h.h)}var g=new s.a,b=new s.a,_=new s.a;var T=new s.a,w={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},O={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},S={east:new s.a,north:new s.a,up:new s.a,west:new s.a,south:new s.a,down:new s.a},E=new s.a,M=new s.a,k=new s.a;function j(t,e,n,i,r,a){var s,u,c,l=w[e]&&w[e][n];Object(o.a)(l&&(!i||i===l));var d=T.copy(r);if(Object(h.d)(d.x,0,1e-14)&&Object(h.d)(d.y,0,1e-14)){var f=Math.sign(d.z);s=E.fromArray(O[e]),"east"!==e&&"west"!==e&&s.scale(f),u=M.fromArray(O[n]),"east"!==n&&"west"!==n&&u.scale(f),c=k.fromArray(O[i]),"east"!==i&&"west"!==i&&c.scale(f)}else{var p=S.up,m=S.east,v=S.north;m.set(-d.y,d.x,0).normalize(),t.geodeticSurfaceNormal(d,p),v.copy(p).cross(m);var y=S.west,g=S.south;S.down.copy(p).scale(-1),y.copy(m).scale(-1),g.copy(v).scale(-1),s=S[e],u=S[n],c=S[i]}return a[0]=s.x,a[1]=s.y,a[2]=s.z,a[3]=0,a[4]=u.x,a[5]=u.y,a[6]=u.z,a[7]=0,a[8]=c.x,a[9]=c.y,a[10]=c.z,a[11]=0,a[12]=d.x,a[13]=d.y,a[14]=d.z,a[15]=1,a}var x,I=new s.a,C=new s.a,A=new s.a,P=new s.a,R=new s.a,N=new s.a,q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),Object(o.a)(e>=0),Object(o.a)(n>=0),Object(o.a)(i>=0),this.radii=new s.a(e,n,i),this.radiiSquared=new s.a(e*e,n*n,i*i),this.radiiToTheFourth=new s.a(e*e*e*e,n*n*n*n,i*i*i*i),this.oneOverRadii=new s.a(0===e?0:1/e,0===n?0:1/n,0===i?0:1/i),this.oneOverRadiiSquared=new s.a(0===e?0:1/(e*e),0===n?0:1/(n*n),0===i?0:1/(i*i)),this.minimumRadius=Math.min(e,n,i),this.maximumRadius=Math.max(e,n,i),this.centerToleranceSquared=u.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(a.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=C,r=A,a=Object(i.a)(t,3),s=a[2];this.geodeticSurfaceNormalCartographic(t,n),r.copy(this.radiiSquared).scale(n);var o=Math.sqrt(n.dot(r));return r.scale(1/o),n.scale(s),r.add(n),r.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];N.from(t);var n=this.scaleToGeodeticSurface(N,P);if(n){var i=this.geodeticSurfaceNormal(n,C),r=R;r.copy(N).subtract(n);var a=Math.atan2(i.y,i.x),s=Math.asin(i.z),o=Math.sign(l.e(r,N))*l.h(r);return y([a,s,o],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return j(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new c.a;return j(this,t,e,n,i,r)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return I.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=m(t),i=n[0],r=n[1],a=Math.cos(r);return I.set(a*Math.cos(i),a*Math.sin(i),Math.sin(r)).normalize(),I.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return I.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.a,i=e.oneOverRadii,r=e.oneOverRadiiSquared,a=e.centerToleranceSquared;g.from(t);var o=t.x,c=t.y,h=t.z,l=i.x,d=i.y,f=i.z,p=o*o*l*l,m=c*c*d*d,v=h*h*f*f,y=p+m+v,T=Math.sqrt(1/y);if(Number.isFinite(T)){var w=b;if(w.copy(t).scale(T),y<a)return w.to(n);var O=r.x,S=r.y,E=r.z,M=_;M.set(w.x*O*2,w.y*S*2,w.z*E*2);var k,j,x,I,C=(1-T)*t.len()/(.5*M.len()),A=0;do{var P=(k=1/(1+(C-=A)*O))*k,R=(j=1/(1+C*S))*j,N=(x=1/(1+C*E))*x,q=P*k,D=R*j,V=N*x,z=p*q*O+m*D*S+v*V*E,U=-2*z;A=(I=p*P+m*R+v*N-1)/U}while(Math.abs(I)>u.a.EPSILON12);return g.scale([k,j,x]).to(n)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];P.from(t);var n=P.x,i=P.y,r=P.z,a=this.oneOverRadiiSquared,s=1/Math.sqrt(n*n*a.x+i*i*a.y+r*r*a.z);return P.multiplyScalar(s).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return P.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return P.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(o.a)(Object(h.d)(this.radii.x,this.radii.y,u.a.EPSILON15)),Object(o.a)(this.radii.z>0),P.from(t);var i=P.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-e))return P.set(0,0,i).to(n)}}],[{key:"WGS84",get:function(){return x=x||new t(6378137,6378137,6356752.314245179)}}]),t}()},OyGM:function(t,e,n){"use strict";(function(t){function i(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return i}))}).call(this,n("8oxB"))},VnMh:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var i={};function r(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i="/";return(e=e.map((function(t,n){return n&&(t=t.replace(new RegExp("^"+i),"")),n!==e.length-1&&(t=t.replace(new RegExp(i+"$"),"")),t}))).join(i)}n.r(i),n.d(i,"dirname",(function(){return r})),n.d(i,"join",(function(){return a}));var s=n(19)},Xjzu:function(t,e,n){"use strict";n.d(e,"a",(function(){return q}));var i=n("1OyB"),r=n("vuIU"),a=n("Ji7U"),s=n("md7G"),o=n("foSv"),u=n("41X0"),c=n("+H0l"),h=n("tS8E"),l=n("yU0y"),d=n("HwUG"),f=n("n+fv"),p=n("bl9R");function m(){var t=new l.a(4);return l.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function v(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function y(t,e,n){var i=e[0],r=e[1],a=e[2],s=e[3],o=n[0],u=n[1],c=n[2],h=n[3];return t[0]=i*h+s*o+r*c-a*u,t[1]=r*h+s*u+a*o-i*c,t[2]=a*h+s*c+i*u-r*o,t[3]=s*h-i*o-r*u-a*c,t}function g(t,e,n,i){var r,a,s,o,u,c=e[0],h=e[1],d=e[2],f=e[3],p=n[0],m=n[1],v=n[2],y=n[3];return(a=c*p+h*m+d*v+f*y)<0&&(a=-a,p=-p,m=-m,v=-v,y=-y),1-a>l.b?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-i)*r)/s,u=Math.sin(i*r)/s):(o=1-i,u=i),t[0]=o*c+u*p,t[1]=o*h+u*m,t[2]=o*d+u*v,t[3]=o*f+u*y,t}function b(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var a=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*a+a]-e[3*s+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*a+s]-e[3*s+a])*n,t[a]=(e[3*a+r]+e[3*r+a])*n,t[s]=(e[3*s+r]+e[3*r+s])*n}return t}p.b,p.g,p.c,p.l;var _,T,w,O,S,E,M=p.a,k=p.k,j=p.d,x=p.i,I=p.h,C=p.m,A=p.j,P=(p.f,p.e,_=f.c(),T=f.f(1,0,0),w=f.f(0,1,0),function(t,e,n){var i=f.e(e,n);return i<-.999999?(f.d(_,T,e),f.g(_)<1e-6&&f.d(_,w,e),f.k(_,_),v(t,_,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(f.d(_,e,n),t[0]=_[0],t[1]=_[1],t[2]=_[2],t[3]=1+i,A(t,t))});O=m(),S=m(),E=d.a();function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(s.a)(this,n)}}var N=[0,0,0,1],q=function(t){Object(a.a)(n,t);var e=R(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(i.a)(this,n),t=e.call(this,-0,-0,-0,-0),Array.isArray(r)&&1===arguments.length?t.copy(r):t.set(r,a,s,o),t}return Object(r.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}},{key:"set",value:function(t,e,n,i){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this.check()}},{key:"fromMatrix3",value:function(t){return b(this,t),this.check()}},{key:"identity",value:function(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.check()}},{key:"fromAxisRotation",value:function(t,e){return v(this,t,e),this.check()}},{key:"setAxisAngle",value:function(t,e){return this.fromAxisRotation(t,e)}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=Object(c.a)(t)}},{key:"len",value:function(){return I(this)}},{key:"lengthSquared",value:function(){return C(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return j(this,t)}},{key:"rotationTo",value:function(t,e){return P(this,t,e),this.check()}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return M(this,this,t),this.check()}},{key:"calculateW",value:function(){var t,e,n,i,r;return t=this,n=(e=this)[0],i=e[1],r=e[2],t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),this.check()}},{key:"conjugate",value:function(){var t,e;return e=this,(t=this)[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.check()}},{key:"invert",value:function(){var t,e,n,i,r,a,s,o;return t=this,n=(e=this)[0],i=e[1],r=e[2],a=e[3],o=(s=n*n+i*i+r*r+a*a)?1/s:0,t[0]=-n*o,t[1]=-i*o,t[2]=-r*o,t[3]=a*o,this.check()}},{key:"lerp",value:function(t,e,n){return x(this,t,e,n),this.check()}},{key:"multiplyRight",value:function(t,e){return Object(h.a)(!e),y(this,this,t),this.check()}},{key:"multiplyLeft",value:function(t,e){return Object(h.a)(!e),y(this,t,this),this.check()}},{key:"normalize",value:function(){var t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,0===t&&(this[3]=1),this.check()}},{key:"rotateX",value:function(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),u=Math.cos(n);t[0]=i*u+s*o,t[1]=r*u+a*o,t[2]=a*u-r*o,t[3]=s*u-i*o}(this,this,t),this.check()}},{key:"rotateY",value:function(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),u=Math.cos(n);t[0]=i*u-a*o,t[1]=r*u+s*o,t[2]=a*u+i*o,t[3]=s*u-r*o}(this,this,t),this.check()}},{key:"rotateZ",value:function(t){return function(t,e,n){n*=.5;var i=e[0],r=e[1],a=e[2],s=e[3],o=Math.sin(n),u=Math.cos(n);t[0]=i*u+r*o,t[1]=r*u-i*o,t[2]=a*u+s*o,t[3]=s*u-a*o}(this,this,t),this.check()}},{key:"scale",value:function(t){return k(this,this,t),this.check()}},{key:"slerp",value:function(t,e,n){switch(arguments.length){case 1:var i=arguments[0],r=i.start;t=void 0===r?N:r,e=i.target,n=i.ratio;break;case 2:var a=Array.prototype.slice.call(arguments);e=a[0],n=a[1],t=this}return g(this,t,e,n),this.check()}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return p.o(e,t,this),Object(c.b)(e,4)}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"setFromAxisAngle",value:function(t,e){return this.setAxisAngle(t,e)}},{key:"premultiply",value:function(t,e){return this.multiplyLeft(t,e)}},{key:"multiply",value:function(t,e){return this.multiplyRight(t,e)}}]),n}(u.a)},fa8B:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var i=n("o0o1"),r=n.n(i),a=n("rePB"),s=(n("wcNg"),n("HaE+")),o=n("vuIU"),u=n("zXfU"),c=n("Nw31"),h=n("rOwd"),l=n("xszv"),d=n("FJ6+"),f=n("KQm4"),p=n("a3TU"),m=n("Xjzu"),v=n("GA6j"),y=n("Ns70"),g=n("Qk7e");function b(t){return null!=t}var _=new u.a,T=new u.a,w=new u.a;function O(t,e,n){if(Object(g.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,n){var i=new u.a(t[0],t[1],t[2]);e.transform(i,i);var r=[];if(10===t.length){var a=t.slice(3,6),s=new m.a;s.fromArray(t,6);var o=new u.a([1,0,0]),c=new u.a([0,1,0]),l=new u.a([0,0,1]);o.transformByQuaternion(s),o.scale(a[0]),c.transformByQuaternion(s),c.scale(a[1]),l.transformByQuaternion(s),l.scale(a[2]),r=[].concat(Object(f.a)(o.toArray()),Object(f.a)(c.toArray()),Object(f.a)(l.toArray()))}else r=[].concat(Object(f.a)(t.slice(3,6)),Object(f.a)(t.slice(6,9)),Object(f.a)(t.slice(9,12)));var d=e.transformAsVector(r.slice(0,3)),p=e.transformAsVector(r.slice(3,6)),y=e.transformAsVector(r.slice(6,9)),g=new v.a([d[0],d[1],d[2],p[0],p[1],p[2],y[0],y[1],y[2]]);if(b(n))return n.center=i,n.halfAxes=g,n;return new h.c(i,g)}(t.box,e,n);if(t.region){var i=t.region,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],d=i[5],_=y.a.WGS84.cartographicToCartesian([Object(p.c)(r),Object(p.c)(o),l],T),O=y.a.WGS84.cartographicToCartesian([Object(p.c)(s),Object(p.c)(a),d],w),E=(new u.a).addVectors(_,O).multiplyScalar(.5),M=(new u.a).subVectors(_,O).len()/2;return S([E[0],E[1],E[2],M],new c.a)}if(t.sphere)return S(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function S(t,e,n){var i=new u.a(t[0],t[1],t[2]);e.transform(i,i);var r=e.getScale(_),a=Math.max(Math.max(r[0],r[1]),r[2]),s=t[3]*a;return b(n)?(n.center=i,n.radius=s,n):new h.a(i,s)}new u.a,new u.a,new c.a,new u.a,new u.a,new u.a;function E(t,e){if(t.dynamicScreenSpaceError&&t.dynamicScreenSpaceErrorComputedDensity){var n=t.dynamicScreenSpaceErrorComputedDensity,i=t.dynamicScreenSpaceErrorFactor;return function(t,e){var n=t*e;return 1-Math.exp(-n*n)}(e,n)*i}return 0}var M=n("BZIa");var k=n("vrw9");function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I=new u.a;var C=function(){function t(t,e,n,i){void 0===i&&(i=""),this.header=e,this.tileset=t,this.id=i||e.id,this.url=e.url,this.parent=n,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=d.d.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new k.a({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new c.a,this.transform=new c.a,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}var e=t.prototype;return e.destroy=function(){this.header=null},e.isDestroyed=function(){return null===this.header},e.getScreenSpaceError=function(t,e){switch(this.tileset.type){case d.c.I3S:return Object(M.a)(this,t);case d.c.TILES3D:return function(t,e,n){var i=t.tileset,r=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,a=n?r:t.lodMetricValue;if(0===a)return 0;var s=Math.max(t._distanceToCamera,1e-7),o=e.height,u=e.sseDenominator,c=a*o*(i.options.viewDistanceScale||1)/(s*u);return c-=E(i,s)}(this,t,e);default:throw new Error("Unsupported tileset type")}},e._getPriority=function(){var t=this.tileset._traverser,e=t.options.skipLevelOfDetail,n=this.refine===d.e.ADD||e;if(n&&!this.isVisible&&void 0!==this._visible)return-1;if(this.tileset._frameNumber-this._touchedFrame>=1)return-1;if(this.contentState===d.d.UNLOADED)return-1;var i=this.parent,r=i&&(!n||0===this._screenSpaceError||i.hasTilesetContent)?i._screenSpaceError:this._screenSpaceError,a=t.root?t.root._screenSpaceError:0;return Math.max(a-r,0)},e.loadContent=function(){var t=Object(s.a)(r.a.mark((function t(){var e,n,i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasEmptyContent){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.content){t.next=4;break}return t.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=d.d.LOADING,t.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(e=t.sent){t.next=13;break}return this.contentState=d.d.UNLOADED,t.abrupt("return",!1);case 13:return t.prev=13,i=this.tileset.getTileUrl(this.contentUrl),a=this.tileset.loader,s=x(x({},this.tileset.loadOptions),{},((n={})[a.id]=x(x({},this.tileset.loadOptions[a.id]),{},{isTileset:"json"===this.type},this._getLoaderSpecificOptions(a.id)),n)),t.next=19,Object(l.a)(i,a,s);case 19:if(this.content=t.sent,!this.tileset.options.contentLoader){t.next=23;break}return t.next=23,this.tileset.options.contentLoader(this);case 23:return this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this),this.contentState=d.d.READY,this._onContentLoaded(),t.abrupt("return",!0);case 29:throw t.prev=29,t.t0=t.catch(13),this.contentState=d.d.FAILED,t.t0;case 33:return t.prev=33,e.done(),t.finish(33);case 36:case"end":return t.stop()}}),t,this,[[13,29,33,36]])})));return function(){return t.apply(this,arguments)}}(),e.unloadContent=function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=d.d.UNLOADED,!0},e.updateVisibility=function(t,e){if(this._frameNumber!==t.frameNumber){var n=this.parent,i=n?n._visibilityPlaneMask:h.b.MASK_INDETERMINATE;if(this.tileset._traverser.options.updateTransforms){var r=n?n.computedTransform:this.tileset.modelMatrix;this._updateTransform(r)}this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,i),this._visible=this._visibilityPlaneMask!==h.b.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._frameNumber=t.frameNumber,this.viewportIds=e}},e.visibility=function(t,e){var n=t.cullingVolume,i=this.boundingVolume;return n.computeVisibilityWithPlaneMask(i,e)},e.contentVisibility=function(){return!0},e.distanceToTile=function(t){var e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))},e.cameraSpaceZDepth=function(t){var e=t.camera,n=this.boundingVolume;return I.subVectors(n.center,e.position),e.direction.dot(I)},e.insideViewerRequestVolume=function(t){var e=this._viewerRequestVolume;return!e||e.distanceSquaredTo(t.camera.position)<=0},e.updateExpiration=function(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=d.d.EXPIRED,this._expiredContent=this.content)}},e._initializeLodMetric=function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))},e._initializeTransforms=function(t){this.transform=t.transform?new c.a(t.transform):new c.a;var e=this.parent,n=this.tileset,i=e&&e.computedTransform?e.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new c.a(i).multiplyRight(this.transform);var r=e&&e._initialTransform?e._initialTransform.clone():new c.a;this._initialTransform=new c.a(r).multiplyRight(this.transform)},e._initializeBoundingVolumes=function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)},e._initializeContent=function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=d.d.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)},e._initializeRenderingState=function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=h.b.MASK_INDETERMINATE,this._visible=void 0,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0},e._getRefine=function(t){return t||this.parent&&this.parent.refine||d.e.REPLACE},e._isTileset=function(){return-1!==this.contentUrl.indexOf(".json")},e._onContentLoaded=function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)},e._updateBoundingVolume=function(t){this.boundingVolume=O(t.boundingVolume,this.computedTransform,this.boundingVolume);var e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=O(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=O(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))},e._updateTransform=function(t){void 0===t&&(t=new c.a);var e=t.clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))},e._getLoaderSpecificOptions=function(t){switch(t){case"i3s":return x(x({},this.tileset.options.i3s),{},{tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"}}var e},Object(o.a)(t,[{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===d.d.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===d.d.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===d.d.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===d.d.FAILED}},{key:"extras",get:function(){return this.header.extras}}]),t}()},gOKY:function(t,e,n){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},rOwd:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return I})),n.d(e,"b",(function(){return L})),n.d(e,"d",(function(){return N})),n.d(e,"e",(function(){return nt})),n.d(e,"f",(function(){return St}));var i=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),r=n("1OyB"),a=n("vuIU"),s=n("zXfU"),o=(new s.a,new s.a,n("ZaHm")),u=new s.a,c=new s.a,h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.radius=-0,this.center=new s.a,this.fromCenterRadius(e,n)}return Object(a.a)(t,[{key:"fromCenterRadius",value:function(t,e){return this.center.from(t),this.radius=e,this}},{key:"fromCornerPoints",value:function(t,e){return e=u.from(e),this.center=(new s.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(t){var e=this.center,n=this.radius,i=t.center,r=t.radius,a=u.copy(i).subtract(e),s=a.magnitude();if(n>=s+r)return this.clone();if(r>=s+n)return t.clone();var o=.5*(n+s+r);return c.copy(a).scale((-n+o)/s).add(e),this.center.copy(c),this.radius=o,this}},{key:"expand",value:function(t){var e=(t=u.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}},{key:"transform",value:function(t){this.center.transform(t);var e=o.e(u,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){return(t=u.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"intersectPlane",value:function(t){var e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?i.OUTSIDE:r<n?i.INTERSECTING:i.INSIDE}}]),t}(),l=n("KQm4"),d=n("GA6j"),f=n("Xjzu"),p=new s.a,m=new s.a,v=new s.a,y=new s.a,g=new s.a,b=new s.a,_=new s.a,T=0,w=1,O=2,S=3,E=4,M=5,k=6,j=7,x=8,I=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(r.a)(this,t),this.center=(new s.a).from(e),this.halfAxes=new d.a(n)}return Object(a.a)(t,[{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new s.a(t).len(),new s.a(e).len(),new s.a(n).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new s.a(t).normalize(),r=new s.a(e).normalize(),a=new s.a(n).normalize();return(new f.a).fromMatrix3(new d.a([].concat(Object(l.a)(i),Object(l.a)(r),Object(l.a)(a))))}},{key:"fromCenterHalfSizeQuaternion",value:function(t,e,n){var i=new f.a(n),r=(new d.a).fromQuaternion(i);return r[0]=r[0]*e[0],r[1]=r[1]*e[0],r[2]=r[2]*e[0],r[3]=r[3]*e[1],r[4]=r[4]*e[1],r[5]=r[5]*e[1],r[6]=r[6]*e[2],r[7]=r[7]*e[2],r[8]=r[8]*e[2],this.center=(new s.a).from(t),this.halfAxes=r,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new h,e=this.halfAxes,n=e.getColumn(0,v),i=e.getColumn(1,y),r=e.getColumn(2,g),a=p.copy(n).add(i).add(r);return t.center.copy(this.center),t.radius=a.magnitude(),t}},{key:"intersectPlane",value:function(t){var e=this.center,n=t.normal,r=this.halfAxes,a=n.x,s=n.y,o=n.z,u=Math.abs(a*r[T]+s*r[w]+o*r[O])+Math.abs(a*r[S]+s*r[E]+o*r[M])+Math.abs(a*r[k]+s*r[j]+o*r[x]),c=n.dot(e)+t.distance;return c<=-u?i.OUTSIDE:c>=u?i.INSIDE:i.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e=m.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,v),r=n.getColumn(1,y),a=n.getColumn(2,g),s=i.magnitude(),o=r.magnitude(),u=a.magnitude();i.normalize(),r.normalize(),a.normalize();var c,h=0;return(c=Math.abs(e.dot(i))-s)>0&&(h+=c*c),(c=Math.abs(e.dot(r))-o)>0&&(h+=c*c),(c=Math.abs(e.dot(a))-u)>0&&(h+=c*c),h}},{key:"computePlaneDistances",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=this.center,s=this.halfAxes,o=s.getColumn(0,v),u=s.getColumn(1,y),c=s.getColumn(2,g),h=b.copy(o).add(u).add(c).add(a),l=_.copy(h).subtract(t),d=e.dot(l);return i=Math.min(d,i),r=Math.max(d,r),h.copy(a).add(o).add(u).subtract(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),h.copy(a).add(o).subtract(u).add(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),h.copy(a).add(o).subtract(u).subtract(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),a.copy(h).subtract(o).add(u).add(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),a.copy(h).subtract(o).add(u).subtract(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),a.copy(h).subtract(o).subtract(u).add(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),a.copy(h).subtract(o).subtract(u).subtract(c),l.copy(h).subtract(t),d=e.dot(l),i=Math.min(d,i),r=Math.max(d,r),n[0]=i,n[1]=r,n}},{key:"transform",value:function(t){this.center.transformAsPoint(t);var e=this.halfAxes.getColumn(0,v);e.transformAsPoint(t);var n=this.halfAxes.getColumn(1,y);n.transformAsPoint(t);var i=this.halfAxes.getColumn(2,g);return i.transformAsPoint(t),this.halfAxes=new d.a([].concat(Object(l.a)(e),Object(l.a)(n),Object(l.a)(i))),this}},{key:"getTransform",value:function(){throw new Error("not implemented")}}]),t}(),C=n("tS8E"),A=n("a3TU"),P=new s.a,R=new s.a,N=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.normal=new s.a,this.distance=-0,this.fromNormalDistance(e,n)}return Object(a.a)(t,[{key:"fromNormalDistance",value:function(t,e){return Object(C.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}},{key:"fromPointNormal",value:function(t,e){t=P.from(t),this.normal.from(e).normalize();var n=-this.normal.dot(t);return this.distance=n,this}},{key:"fromCoefficients",value:function(t,e,n,i){return this.normal.set(t,e,n),Object(C.a)(Object(A.d)(this.normal.len(),1)),this.distance=i,this}},{key:"clone",value:function(e){return new t(this.normal,this.distance)}},{key:"equals",value:function(t){return Object(A.d)(this.distance,t.distance)&&Object(A.d)(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var e=R.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}},{key:"projectPointOntoPlane",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=P.from(t);var n=this.getPointDistance(t),i=R.copy(this.normal).scale(n);return t.subtract(i).to(e)}}]),t}();function q(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var V=[new s.a([1,0,0]),new s.a([0,1,0]),new s.a([0,0,1])],z=new s.a,U=new s.a,L=(new N(new s.a(1,0,0),0),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.a)(this,t),this.planes=e,Object(C.a)(this.planes.every((function(t){return t instanceof N})))}return Object(a.a)(t,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*V.length;var e,n=t.center,i=t.radius,r=0,a=q(V);try{for(a.s();!(e=a.n()).done;){var s=e.value,o=this.planes[r],u=this.planes[r+1];o||(o=this.planes[r]=new N),u||(u=this.planes[r+1]=new N);var c=z.copy(s).scale(-i).add(n);s.dot(c);o.fromPointNormal(c,s);var h=z.copy(s).scale(i).add(n),l=U.copy(s).negate();l.dot(h);u.fromPointNormal(h,l),r+=2}}catch(d){a.e(d)}finally{a.f()}return this}},{key:"computeVisibility",value:function(t){Object(C.a)(t);var e,n=i.INSIDE,r=q(this.planes);try{for(r.s();!(e=r.n()).done;){var a=e.value;switch(t.intersectPlane(a)){case i.OUTSIDE:return i.OUTSIDE;case i.INTERSECTING:n=i.INTERSECTING}}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(e,n){if(Object(C.a)(e,"boundingVolume is required."),Object(C.a)(Number.isFinite(n),"parentPlaneMask is required."),n===t.MASK_OUTSIDE||n===t.MASK_INSIDE)return n;for(var r=t.MASK_INSIDE,a=this.planes,s=0;s<this.planes.length;++s){var o=s<31?1<<s:0;if(!(s<31&&0==(n&o))){var u=a[s],c=e.intersectPlane(u);if(c===i.OUTSIDE)return t.MASK_OUTSIDE;c===i.INTERSECTING&&(r|=o)}}return r}}],[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),t}());n("rePB"),n("Nw31");new s.a,new s.a,new s.a,new s.a,new s.a;function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var G=new s.a,W=new s.a,X=new s.a,H=new s.a,Q=new s.a,Z=new s.a,Y=new s.a,K=new s.a,J=new s.a,$=new s.a,tt=new s.a,et=new s.a;Math.PI;function nt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new h;if(!t||0===t.length)return e.fromCenterRadius([0,0,0],0);var n,i=Y.copy(t[0]),r=G.copy(i),a=W.copy(i),s=X.copy(i),o=H.copy(i),u=Q.copy(i),c=Z.copy(i),l=B(t);try{for(l.s();!(n=l.n()).done;){var d=n.value;i.copy(d);var f=i.x,p=i.y,m=i.z;f<r.x&&i.copy(r),f>o.x&&i.copy(o),p<a.y&&i.copy(a),p>u.y&&i.copy(u),m<s.z&&i.copy(s),m>c.z&&i.copy(c)}}catch(q){l.e(q)}finally{l.f()}var v=K.copy(o).subtract(r).magnitudeSquared(),y=K.copy(u).subtract(a).magnitudeSquared(),g=K.copy(c).subtract(s).magnitudeSquared(),b=r,_=o,T=v;y>T&&(T=y,b=a,_=u),g>T&&(T=g,b=s,_=c);var w=J;w.x=.5*(b.x+_.x),w.y=.5*(b.y+_.y),w.z=.5*(b.z+_.z);var O=K.copy(_).subtract(w).magnitudeSquared(),S=Math.sqrt(O),E=$;E.x=r.x,E.y=a.y,E.z=s.z;var M=tt;M.x=o.x,M.y=u.y,M.z=c.z;var k,j=et.copy(E).add(M).multiplyByScalar(.5),x=0,I=B(t);try{for(I.s();!(k=I.n()).done;){var C=k.value;i.copy(C);var A=K.copy(i).subtract(j).magnitude();A>x&&(x=A);var P=K.copy(i).subtract(w).magnitudeSquared();if(P>O){var R=Math.sqrt(P);O=(S=.5*(S+R))*S;var N=R-S;w.x=(S*w.x+N*i.x)/R,w.y=(S*w.y+N*i.y)/R,w.z=(S*w.z+N*i.z)/R}}}catch(q){I.e(q)}finally{I.f()}return S<x?(w.to(e.center),e.radius=S):(j.to(e.center),e.radius=x),e}var it=n("gOKY"),rt=new d.a,at=new d.a,st=new d.a,ot=new d.a,ut=new d.a;function ct(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=it.a.EPSILON20,i=10,r=0,a=0,s=at,o=st;s.identity(),o.copy(t);for(var u=n*ht(o);a<i&&ft(o)>u;)pt(o,ot),ut.copy(ot).transpose(),o.multiplyRight(ot),o.multiplyLeft(ut),s.multiplyRight(ot),++r>2&&(++a,r=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=o.toTarget(e.diagonal),e}function ht(t){for(var e=0,n=0;n<9;++n){var i=t[n];e+=i*i}return Math.sqrt(e)}var lt=[1,0,0],dt=[2,2,1];function ft(t){for(var e=0,n=0;n<3;++n){var i=t[rt.getElementIndex(dt[n],lt[n])];e+=2*i*i}return Math.sqrt(e)}function pt(t,e){for(var n=it.a.EPSILON15,i=0,r=1,a=0;a<3;++a){var s=Math.abs(t[rt.getElementIndex(dt[a],lt[a])]);s>i&&(r=a,i=s)}var o=lt[r],u=dt[r],c=1,h=0;if(Math.abs(t[rt.getElementIndex(u,o)])>n){var l,f=(t[rt.getElementIndex(u,u)]-t[rt.getElementIndex(o,o)])/2/t[rt.getElementIndex(u,o)];h=(l=f<0?-1/(-f+Math.sqrt(1+f*f)):1/(f+Math.sqrt(1+f*f)))*(c=1/Math.sqrt(1+l*l))}return d.a.IDENTITY.to(e),e[rt.getElementIndex(o,o)]=e[rt.getElementIndex(u,u)]=c,e[rt.getElementIndex(u,o)]=h,e[rt.getElementIndex(o,u)]=-h,e}function mt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var yt=new s.a,gt=new s.a,bt=new s.a,_t=new s.a,Tt=new s.a,wt=new d.a,Ot={diagonal:new d.a,unitary:new d.a};function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new I;if(!t||0===t.length)return e.halfAxes=new d.a([0,0,0,0,0,0,0,0,0]),e.center=new s.a,e;var n,i=t.length,r=new s.a(0,0,0),a=mt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.add(o)}}catch(z){a.e(z)}finally{a.f()}var u=1/i;r.multiplyByScalar(u);var c,h=0,l=0,f=0,p=0,m=0,v=0,y=mt(t);try{for(y.s();!(c=y.n()).done;){var g=c.value,b=yt.copy(g).subtract(r);h+=b.x*b.x,l+=b.x*b.y,f+=b.x*b.z,p+=b.y*b.y,m+=b.y*b.z,v+=b.z*b.z}}catch(z){y.e(z)}finally{y.f()}h*=u,l*=u,f*=u,p*=u,m*=u,v*=u;var _=wt;_[0]=h,_[1]=l,_[2]=f,_[3]=l,_[4]=p,_[5]=m,_[6]=f,_[7]=m,_[8]=v;var T,w=ct(_,Ot),O=w.unitary,S=e.halfAxes.copy(O),E=S.getColumn(0,bt),M=S.getColumn(1,_t),k=S.getColumn(2,Tt),j=-Number.MAX_VALUE,x=-Number.MAX_VALUE,C=-Number.MAX_VALUE,A=Number.MAX_VALUE,P=Number.MAX_VALUE,R=Number.MAX_VALUE,N=mt(t);try{for(N.s();!(T=N.n()).done;){var q=T.value;j=Math.max(q.dot(E),j),x=Math.max(q.dot(M),x),C=Math.max(q.dot(k),C),A=Math.min(q.dot(E),A),P=Math.min(q.dot(M),P),R=Math.min(q.dot(k),R)}}catch(z){N.e(z)}finally{N.f()}E=E.multiplyByScalar(.5*(A+j)),M=M.multiplyByScalar(.5*(P+x)),k=k.multiplyByScalar(.5*(R+C)),e.center.copy(E).add(M).add(k);var D=gt.set(j-A,x-P,C-R).multiplyByScalar(.5),V=new d.a([D[0],0,0,0,D[1],0,0,0,D[2]]);return e.halfAxes.multiplyRight(V),e}},vrw9:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("rePB"),r=n("vuIU"),a=n("Qk7e"),s=function(){function t(t){void 0===t&&(t=0),this._array=new Array(t),this._map=new Map,this._length=t}var e=t.prototype;return e.get=function(t){return Object(a.a)(t<this._array.length),this._array[t]},e.set=function(t,e){Object(a.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)},e.delete=function(t){var e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)},e.peek=function(){return this._array[this._length-1]},e.push=function(t){if(!this._map.has(t)){var e=this.length++;this._array[e]=t,this._map.set(t,e)}},e.pop=function(){var t=this._array[--this.length];return this._map.delete(t),t},e.reserve=function(t){Object(a.a)(t>=0),t>this._array.length&&(this._array.length=t)},e.resize=function(t){Object(a.a)(t>=0),this.length=t},e.trim=function(t){null==t&&(t=this.length),this._array.length=t},e.reset=function(){this._array=[],this._map=new Map,this._length=0},e.find=function(t){return this._map.has(t)},Object(r.a)(t,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}}]),t}(),o=n("FJ6+");function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,updateTransforms:!0,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},f=function(){function t(t){this.options=l(l({},d),t),this._traversalStack=new s,this._emptyTraversalStack=new s,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}var e=t.prototype;return e.traverse=function(t,e,n){this.root=t,this.options=l(l({},this.options),n),this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)},e.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},e.executeTraversal=function(t,e){var n=this._traversalStack;for(t._selectionDepth=1,n.push(t);n.length>0;){var i=n.pop(),r=!1;this.canTraverse(i,e)&&(this.updateChildTiles(i,e),r=this.updateAndPushChildren(i,e,n,i.hasRenderContent?i._selectionDepth+1:i._selectionDepth));var a=i.parent,s=Boolean(!a||a._shouldRefine),u=!r;i.hasRenderContent?i.refine===o.e.ADD?(this.loadTile(i,e),this.selectTile(i,e)):i.refine===o.e.REPLACE&&(this.loadTile(i,e),u&&this.selectTile(i,e)):(this.emptyTiles[i.id]=i,this.loadTile(i,e),u&&this.selectTile(i,e)),this.touchTile(i,e),i._shouldRefine=r&&s}this.options.onTraversalEnd(e)},e.updateChildTiles=function(t,e){for(var n,i=u(t.children);!(n=i()).done;){var r=n.value;this.updateTile(r,e)}return!0},e.updateAndPushChildren=function(t,e,n,i){var r=this.options,a=r.loadSiblings,s=r.skipLevelOfDetail,c=t.children;c.sort(this.compareDistanceToCamera.bind(this));for(var h,l=t.refine===o.e.REPLACE&&t.hasRenderContent&&!s,d=!1,f=!0,p=u(c);!(h=p()).done;){var m=h.value;if(m._selectionDepth=i,m.isVisibleAndInRequestVolume?(n.find(m)&&n.delete(m),n.push(m),d=!0):(l||a)&&(this.loadTile(m,e),this.touchTile(m,e)),l){var v=void 0;if(v=!!m._inRequestVolume&&(m.hasRenderContent?m.contentAvailable:this.executeEmptyTraversal(m,e)),!(f=f&&v))return!1}}return d||(f=!1),f},e.updateTile=function(t,e){this.updateTileVisibility(t,e)},e.selectTile=function(t,e){this.shouldSelectTile(t)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)},e.loadTile=function(t,e){this.shouldLoadTile(t)&&(t._requestedFrame=e.frameNumber,t._priority=t._getPriority(),this.requestedTiles[t.id]=t)},e.touchTile=function(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber},e.canTraverse=function(t,e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:!(!i&&!t.isVisibleAndInRequestVolume)&&this.shouldRefine(t,e,n))},e.shouldLoadTile=function(t){return t.hasUnloadedContent||t.contentExpired},e.shouldSelectTile=function(t){return t.contentAvailable&&!this.options.skipLevelOfDetail},e.shouldRefine=function(t,e,n){var i=t._screenSpaceError;return n&&(i=t.getScreenSpaceError(e,!0)),i>this.options.maximumScreenSpaceError},e.updateTileVisibility=function(t,e){var n=[];if(this.options.viewportTraversersMap)for(var i in this.options.viewportTraversersMap){this.options.viewportTraversersMap[i]===e.viewport.id&&n.push(i)}else n.push(e.viewport.id);t.updateVisibility(e,n)},e.compareDistanceToCamera=function(t,e){return t._distanceToCamera-e._distanceToCamera},e.anyChildrenVisible=function(t,e){for(var n,i=!1,r=u(t.children);!(n=r()).done;){var a=n.value;a.updateVisibility(e),i=i||a.isVisibleAndInRequestVolume}return i},e.executeEmptyTraversal=function(t,e){var n=!0,i=this._emptyTraversalStack;for(i.push(t);i.length>0&&n;){var r=i.pop();if(this.updateTile(r,e),r.isVisibleAndInRequestVolume||this.loadTile(r,e),this.touchTile(r,e),!r.hasRenderContent&&this.canTraverse(r,e,!1,!0))for(var a,s=u(r.children);!(a=s()).done;){var o=a.value;i.find(o)&&i.delete(o),i.push(o)}else r.contentAvailable||(n=!1)}return n},t}()},wBSN:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("rePB"),r=n("G+eI");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o={id:"request-scheduler",throttleRequests:!0,maxRequests:6},u=function(){function t(t){void 0===t&&(t={}),this.activeRequestCount=0,this.requestQueue=[],this.requestMap=new Map,this.deferredUpdate=null,this.props=s(s({},o),t),this.stats=new r.a({id:this.props.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever")}var e=t.prototype;return e.scheduleRequest=function(t,e){if(void 0===e&&(e=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var n={handle:t,priority:0,getPriority:e},i=new Promise((function(t){return n.resolve=t,n}));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i},e._issueRequest=function(t){var e=this,n=t.handle,i=t.resolve,r=!1,a=function(){r||(r=!0,e.requestMap.delete(n),e.activeRequestCount--,e._issueNewRequests())};return this.activeRequestCount++,i?i({done:a}):Promise.resolve({done:a})},e._issueNewRequests=function(){var t=this;this.deferredUpdate||(this.deferredUpdate=setTimeout((function(){return t._issueNewRequestsAsync()}),0))},e._issueNewRequestsAsync=function(){this.deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(var e=0;e<t;++e){var n=this.requestQueue.shift();n&&this._issueRequest(n)}}},e._updateAllRequests=function(){for(var t=this.requestQueue,e=0;e<t.length;++e){var n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort((function(t,e){return t.priority-e.priority}))},e._updateRequest=function(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)},t}()}}]);