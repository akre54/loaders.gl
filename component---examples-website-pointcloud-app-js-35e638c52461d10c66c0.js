(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{16:function(t,e){},17:function(t,e){},"7ueG":function(t,e,r){"use strict";var n=r("I+eb"),a=r("WKiH").start,i=r("yNLB")("trimStart"),o=i?function(){return a(this)}:"".trimStart;n({target:"String",proto:!0,forced:i},{trimStart:o,trimLeft:o})},WJkJ:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},WKiH:function(t,e,r){var n=r("HYAF"),a="["+r("WJkJ")+"]",i=RegExp("^"+a+a+"*"),o=RegExp(a+a+"*$"),s=function(t){return function(e){var r=String(n(e));return 1&t&&(r=r.replace(i,"")),2&t&&(r=r.replace(o,"")),r}};t.exports={start:s(1),end:s(2),trim:s(3)}},mVup:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return We})),r.d(e,"renderToDOM",(function(){return Ke}));var n=r("rePB"),a=r("JX7q"),i=r("dI71"),o=r("q1tI"),s=r.n(o),u=r("i8i4"),c=r("yYqN"),l=r("RPaY"),p=r("V3d6"),h=r("vuIU"),f=r("1OyB"),d=r("Ji7U"),m=r("md7G"),v=r("foSv"),y=r("nICr"),b=r("e/LK"),g=r("c9N0"),O=r("sxJW"),w=r("rSc4"),x=r("zheZ"),S=r("F8bt");function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(v.a)(t);if(e){var a=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(m.a)(this,r)}}var _={orbitAxis:"Z",rotationX:0,rotationOrbit:0,zoom:0,target:[0,0,0],minRotationX:-90,maxRotationX:90,minZoom:-1/0,maxZoom:1/0},I={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new l.a(["target","zoom","rotationX","rotationOrbit"]),transitionInterruption:x.a.BREAK},P=function(t){return Math.pow(2,t)},A=function(t){Object(d.a)(r,t);var e=j(r);function r(t){var n,a=t.makeViewport,i=t.width,o=t.height,s=t.orbitAxis,u=void 0===s?_.orbitAxis:s,c=t.rotationX,l=void 0===c?_.rotationX:c,p=t.rotationOrbit,h=void 0===p?_.rotationOrbit:p,d=t.target,m=void 0===d?_.target:d,v=t.zoom,y=void 0===v?_.zoom:v,b=t.minRotationX,g=void 0===b?_.minRotationX:b,O=t.maxRotationX,w=void 0===O?_.maxRotationX:O,x=t.minZoom,S=void 0===x?_.minZoom:x,j=t.maxZoom,I=void 0===j?_.maxZoom:j,P=t.startPanPosition,A=t.startTarget,E=t.startRotationX,k=t.startRotationOrbit,z=t.startZoomPosition,T=t.startZoom;return Object(f.a)(this,r),(n=e.call(this,{width:i,height:o,orbitAxis:u,rotationX:l,rotationOrbit:h,target:m,zoom:y,minRotationX:g,maxRotationX:w,minZoom:S,maxZoom:I}))._interactiveState={startPanPosition:P,startTarget:A,startRotationX:E,startRotationOrbit:k,startZoomPosition:z,startZoom:T},n.makeViewport=a,n}return Object(h.a)(r,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(t){var e=t.pos,r=this._viewportProps.target;return this._getUpdatedState({startPanPosition:e,startTarget:r})}},{key:"pan",value:function(t){var e=t.pos,r=(t.startPos,this._interactiveState),n=r.startPanPosition,a=r.startTarget,i=new g.c(e).subtract(n);return this._getUpdatedState({target:this._calculateNewTarget({startTarget:a,pixelOffset:i})})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanPosition:null,startTarget:null})}},{key:"rotateStart",value:function(t){t.pos;return this._getUpdatedState({startRotationX:this._viewportProps.rotationX,startRotationOrbit:this._viewportProps.rotationOrbit})}},{key:"rotate",value:function(t){var e=t.deltaScaleX,r=t.deltaScaleY,n=this._interactiveState,a=n.startRotationX,i=n.startRotationOrbit;return Number.isFinite(a)&&Number.isFinite(i)?((a<-90||a>90)&&(e*=-1),this._getUpdatedState({rotationX:a+180*r,rotationOrbit:i+180*e,isRotating:!0})):this}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}},{key:"shortestPathFrom",value:function(t){var e=t.getViewportProps(),r=Object.assign({},this._viewportProps),n=r.rotationOrbit;return Math.abs(n-e.rotationOrbit)>180&&(r.rotationOrbit=n<0?n+360:n-360),r}},{key:"zoomStart",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomPosition:e,startTarget:this._viewportProps.target,startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(t){var e=t.pos,r=t.startPos,n=t.scale,a=this._viewportProps,i=a.zoom,o=a.width,s=a.height,u=a.target,c=this._interactiveState,l=c.startZoom,p=c.startZoomPosition,h=c.startTarget;Number.isFinite(l)||(l=i,h=u,p=r||e);var f=this._calculateNewZoom({scale:n,startZoom:l}),d=P(l),m=P(f),v=(o/2-p[0])*(m/d-1),y=(s/2-p[1])*(m/d-1);return this._getUpdatedState({zoom:f,target:this._calculateNewTarget({startTarget:h,zoom:f,pixelOffset:[v,y]})})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomPosition:null,startTarget:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:2})})}},{key:"zoomOut",value:function(){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:.5})})}},{key:"moveLeft",value:function(){var t=[-50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveRight",value:function(){var t=[50,0];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveUp",value:function(){var t=[0,-50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"moveDown",value:function(){var t=[0,50];return this._getUpdatedState({target:this._calculateNewTarget({pixelOffset:t})})}},{key:"rotateLeft",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({rotationOrbit:this._viewportProps.rotationOrbit+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX-10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({rotationX:this._viewportProps.rotationX+10})}},{key:"_calculateNewZoom",value:function(t){var e=t.scale,r=t.startZoom,n=this._viewportProps,a=n.maxZoom,i=n.minZoom;Number.isFinite(r)||(r=this._viewportProps.zoom);var o=r+Math.log2(e);return Object(g.e)(o,i,a)}},{key:"_calculateNewTarget",value:function(t){var e=t.startTarget,r=t.zoom,n=t.pixelOffset,a=Object.assign({},this._viewportProps);Number.isFinite(r)&&(a.zoom=r),e&&(a.target=e);var i=this.makeViewport(a),o=i.project(a.target);return i.unproject([o[0]-n[0],o[1]-n[1],o[2]])}},{key:"_getUpdatedState",value:function(t){return new r(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(t){var e=t.maxZoom,r=t.minZoom,n=t.zoom,a=t.maxRotationX,i=t.minRotationX,o=t.rotationOrbit;return t.zoom=Object(g.e)(n,r,e),t.rotationX=Object(g.e)(t.rotationX,i,a),(o<-180||o>180)&&(t.rotationOrbit=Object(S.d)(o+180,360)-180),t}}]),r}(w.a),E=function(t){Object(d.a)(r,t);var e=j(r);function r(t){return Object(f.a)(this,r),e.call(this,A,t)}return Object(h.a)(r,[{key:"_getTransitionProps",value:function(){return I}}]),r}(O.a);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(v.a)(t);if(e){var a=Object(v.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(m.a)(this,r)}}var z=Math.PI/180;function T(t){var e=t.height,r=t.fovy,n=t.orbitAxis,a=t.rotationX,i=t.rotationOrbit,o=t.zoom,s=.5/Math.tan(r*z/2),u="Z"===n?[0,0,1]:[0,1,0],c="Z"===n?[0,-s,0]:[0,0,s],l=(new g.a).lookAt({eye:c,up:u});l.rotateX(a*z),"Z"===n?l.rotateZ(i*z):l.rotateY(i*z);var p=Math.pow(2,o)/(e||1);return l.scale(p),l}var U=function(t){Object(d.a)(r,t);var e=k(r);function r(t){Object(f.a)(this,r);var n=t.id,a=t.x,i=t.y,o=t.width,s=t.height,u=t.fovy,c=void 0===u?50:u,l=t.near,p=t.far,h=t.orbitAxis,d=void 0===h?"Z":h,m=t.target,v=void 0===m?[0,0,0]:m,y=t.rotationX,b=void 0===y?0:y,g=t.rotationOrbit,O=void 0===g?0:g,w=t.zoom,x=void 0===w?0:w;return e.call(this,{id:n,viewMatrix:T({height:s,fovy:c,orbitAxis:d,rotationX:b,rotationOrbit:O,zoom:x}),fovy:c,near:l,far:p,x:a,y:i,position:v,width:o,height:s,zoom:x})}return r}(b.a),C=function(t){Object(d.a)(r,t);var e=k(r);function r(t){return Object(f.a)(this,r),e.call(this,Object.assign({},t,{type:U}))}return Object(h.a)(r,[{key:"controller",get:function(){return this._getControllerProps({type:E})}}]),r}(y.a);C.displayName="OrbitView";var D=r("FR1t"),F=r("1Nab"),N=r("o0o1"),R=r.n(N),L=(r("wcNg"),r("HaE+")),M=r("/WnK"),V=r("eQLy"),X=r.n(V),Z=null,B={0:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0)}},1:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0)}},2:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0),color:[t.getUint16(20,!0),t.getUint16(22,!0),t.getUint16(24,!0)]}},3:function(t){return{position:[t.getInt32(0,!0),t.getInt32(4,!0),t.getInt32(8,!0)],intensity:t.getUint16(12,!0),classification:t.getUint8(15,!0),color:[t.getUint16(28,!0),t.getUint16(30,!0),t.getUint16(32,!0)]}}};function J(t,e,r,n){n=void 0===n||0===n?1:n;var a=new e(t.slice(r,r+e.BYTES_PER_ELEMENT*n));if(1===n)return a[0];for(var i=[],o=0;o<n;o++)i.push(a[o]);return i}function H(t){var e={};e.pointsOffset=J(t,Uint32Array,96),e.pointsFormatId=J(t,Uint8Array,104),e.pointsStructSize=J(t,Uint16Array,105),e.pointsCount=J(t,Uint32Array,107);var r=131;e.scale=J(t,Float64Array,r,3),r+=24,e.offset=J(t,Float64Array,r,3),r+=24;var n=J(t,Float64Array,r,6);return r+=48,e.maxs=[n[0],n[2],n[4]],e.mins=[n[1],n[3],n[5]],e}var Y=function(){function t(t){this.arraybuffer=t}var e=t.prototype;return e.open=function(){return this.readOffset=0,!0},e.getHeader=function(){return this.header=H(this.arraybuffer),this.header},e.readData=function(t,e,r){var n=this.header,a=this.arraybuffer;if(!n)throw new Error("Cannot start reading data till a header request is issued");var i,o=this.readOffset;if(r<=1){t=Math.min(t,n.pointsCount-o);var s=(i=n.pointsOffset+o*n.pointsStructSize)+t*n.pointsStructSize;return o+=t,this.readOffset=o,{buffer:a.slice(i,s),count:t,hasMoreData:o<n.pointsCount}}for(var u=Math.min(t*r,n.pointsCount-o),c=Math.ceil(u/r),l=0,p=new Uint8Array(c*n.pointsStructSize),h=0;h<u;h++){if(h%r==0){i=n.pointsOffset+o*n.pointsStructSize;var f=new Uint8Array(a,i,n.pointsStructSize);p.set(f,l*n.pointsStructSize),l++}o++}return this.readOffset=o,{buffer:p.buffer,count:l,hasMoreData:o<n.pointsCount}},e.close=function(){return this.arraybuffer=null,!0},t}(),W=function(){function t(t){this.arraybuffer=t,this.instance=null,Z||(Z=X()())}var e=t.prototype;return e.open=function(){try{var t=this.arraybuffer;this.instance=new Z.LASZip;var e=new Uint8Array(t),r=Z._malloc(t.byteLength);return this.instance.arraybuffer=t,this.instance.buf=r,Z.HEAPU8.set(e,r),this.instance.open(r,t.byteLength),this.instance.readOffset=0,!0}catch(n){throw new Error("Failed to open file: "+n.message)}},e.getHeader=function(){if(!this.instance)throw new Error("You need to open the file before trying to read header");try{var t=H(this.instance.arraybuffer);return t.pointsFormatId&=63,this.header=t,t}catch(e){throw new Error("Failed to get header: "+e.message)}},e.readData=function(t,e,r){if(!this.instance)throw new Error("You need to open the file before trying to read stuff");var n=this.header,a=this.instance;if(!n)throw new Error("You need to query header before reading, I maintain state that way, sorry :(");try{for(var i=Math.min(t*r,n.pointsCount-a.readOffset),o=Math.ceil(i/r),s=0,u=new Uint8Array(o*n.pointsStructSize),c=Z._malloc(n.pointsStructSize),l=0;l<i;l++){if(a.getPoint(c),l%r==0){var p=new Uint8Array(Z.HEAPU8.buffer,c,n.pointsStructSize);u.set(p,s*n.pointsStructSize),s++}a.readOffset++}return{buffer:u.buffer,count:s,hasMoreData:a.readOffset<n.pointsCount}}catch(h){throw new Error("Failed to read data: "+h.message)}},e.close=function(){try{return null!==this.instance&&(this.instance.delete(),this.instance=null),!0}catch(t){throw new Error("Failed to close file: "+t.message)}},t}(),K=function(){function t(t,e,r){this.arrayb=t,this.decoder=B[r.pointsFormatId],this.pointsCount=e,this.pointSize=r.pointsStructSize,this.scale=r.scale,this.offset=r.offset,this.mins=r.mins,this.maxs=r.maxs}return t.prototype.getPoint=function(t){if(t<0||t>=this.pointsCount)throw new Error("Point index out of range");var e=new DataView(this.arrayb,t*this.pointSize,this.pointSize);return this.decoder(e)},t}(),G=function(){function t(t){if(this.arraybuffer=t,this.determineVersion()>13)throw new Error("Only file versions <= 1.3 are supported at this time");if(this.determineFormat(),void 0===B[this.formatId])throw new Error("The point format ID is not supported");this.loader=this.isCompressed?new W(this.arraybuffer):new Y(this.arraybuffer)}var e=t.prototype;return e.determineFormat=function(){var t=J(this.arraybuffer,Uint8Array,104),e=(128&t)>>7,r=(64&t)>>6;if(1===e&&1===r)throw new Error("Old style compression not supported");this.formatId=63&t,this.isCompressed=1===e||1===r},e.determineVersion=function(){var t=new Int8Array(this.arraybuffer,24,2);return this.version=10*t[0]+t[1],this.versionAsString=t[0]+"."+t[1],this.version},e.open=function(){this.loader.open()&&(this.isOpen=!0)},e.getHeader=function(){return this.loader.getHeader()},e.readData=function(t,e,r){return this.loader.readData(t,e,r)},e.close=function(){this.loader.close()&&(this.isOpen=!1)},e.getUnpacker=function(){return K},t}();function q(t,e){void 0===e&&(e={});var r,n,a,i,o,s=0,u={},c=e.onProgress,l=e.las||{},p=l.skip,h=l.colorDepth,f=l.fp64;return function(t,e,r){var n=new G(t);try{n.open();var a=n.getHeader(),i=n.getUnpacker(),o=Math.ceil(a.pointsCount/Math.max(1,e));a.totalToRead=o;for(var s=0;;){var u=n.readData(1e5,0,e);s+=u.count,a.totalRead=s,a.versionAsString=u.versionAsString,a.isCompressed=u.isCompressed;var c=new i(u.buffer,u.count,a);if(r(c,a),!u.hasMoreData||s>=o)break}}catch(l){throw l}finally{n.close()}}(t,p,(function(t,e){if(!o){o=e;var l=e.totalToRead,p=f?Float64Array:Float32Array;r=new p(3*l),n=e.pointsFormatId>=2?new Uint8Array(4*l):null,a=new Uint16Array(l),i=new Uint8Array(l),Object.assign(u,{loaderData:{header:e},mode:0,attributes:{POSITION:{value:r,size:3},intensity:{value:a,size:1},classification:{value:i,size:1}}}),n&&(u.attributes.COLOR_0={value:n,size:4})}for(var d=t.pointsCount,m=e.scale,v=m[0],y=m[1],b=m[2],g=e.offset,O=g[0],w=g[1],x=g[2],S=function(t,e,r){var n;switch(t){case 8:n=!1;break;case 16:n=!0;break;case"auto":if(e.getPoint(0).color)for(var a=0;a<r;a++){var i=e.getPoint(a).color;(i[0]>255||i[1]>255||i[2]>255)&&(n=!0)}break;default:console.warn("las: illegal value for options.las.colorDepth")}return n}(h,t,d),j=0;j<d;j++){var _=t.getPoint(j),I=_.position,P=_.color,A=_.intensity,E=_.classification;r[3*s]=I[0]*v+O,r[3*s+1]=I[1]*y+w,r[3*s+2]=I[2]*b+x,P&&(S?(n[4*s]=P[0]/256,n[4*s+1]=P[1]/256,n[4*s+2]=P[2]/256):(n[4*s]=P[0],n[4*s+1]=P[1],n[4*s+2]=P[2]),n[4*s+3]=255),a[s]=A,i[s]=E,s++}c&&c(Object.assign({header:{vertexCount:e.totalRead},progress:e.totalRead/e.totalToRead},u))})),u.header={vertexCount:o.totalToRead,boundingBox:Object(M.a)(u.attributes)},u}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var tt,et="undefined"!=typeof __VERSION__?__VERSION__:"latest",rt=Q(Q({},{id:"las",name:"LAS",version:et,extensions:["las","laz"],mimeTypes:["application/octet-stream"],text:!0,binary:!0,tests:["LAS"],options:{las:{workerUrl:"https://unpkg.com/@loaders.gl/las@"+et+"/dist/las-loader.worker.js",fp64:!1,skip:1,colorDepth:8}}}),{},{parse:(tt=Object(L.a)(R.a.mark((function t(e,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",q(e,r));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return tt.apply(this,arguments)}),parseSync:q});function nt(t,e,r){var n=function(t){var e={};e.POSITION={value:new Float32Array(t.vertices),size:3},t.normals.length>0&&(e.NORMAL={value:new Float32Array(t.normals),size:3});t.uvs.length>0&&(e.TEXCOORD_0={value:new Float32Array(t.uvs),size:2});t.colors.length>0&&(e.COLOR_0={value:new Uint8Array(t.colors),size:3,normalized:!0});return e}(e),a={loaderData:{header:t},header:{vertexCount:e.indices.length||e.vertices.length/3,boundingBox:Object(M.a)(n)},mode:e.indices&&e.indices.length>0?4:0,attributes:n};return e.indices&&e.indices.length>0&&(a.indices={value:new Uint32Array(e.indices),size:1}),a}function at(t,e){var r,n;if(void 0===e&&(e={}),t instanceof ArrayBuffer){var a=(new TextDecoder).decode(t);n="ascii"===(r=it(a,e)).format?ct(a,r):function(t,e){for(var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="binary_little_endian"===e.format,i=new DataView(t,e.headerLength),o=0,s=0;s<e.elements.length;s++)for(var u=e.elements[s].count,c=0;c<u;c++){r=ht(i,o,e.elements[s].properties,a),o+=r[1];var l=r[0];lt(n,e.elements[s].name,l)}return n}(t,r)}else n=ct(t,r=it(t,e));return nt(r,n)}function it(t,e){var r="",n=0,a=/ply([\s\S]*)end_header\s/.exec(t);null!==a&&(r=a[1],n=a[0].length);for(var i,o,s,u={comments:[],elements:[],headerLength:n},c=r.split("\n"),l=0;l<c.length;l++){var p=c[l];if(""!==(p=p.trim()))switch(o=(s=p.split(/\s+/)).shift(),p=s.join(" "),o){case"format":u.format=s[0],u.version=s[1];break;case"comment":u.comments.push(p);break;case"element":void 0!==i&&u.elements.push(i),i={name:s[0],count:parseInt(s[1],10),properties:[]};break;case"property":i.properties.push(ot(s,e.propertyNameMapping));break;default:console.log("unhandled",o,s)}}return void 0!==i&&u.elements.push(i),u}function ot(t,e){var r={type:t[0]};return"list"===r.type?(r.name=t[3],r.countType=t[1],r.itemType=t[2]):r.name=t[1],e&&r.name in e&&(r.name=e[r.name]),r}function st(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function ut(t,e){for(var r=e.split(/\s+/),n={},a=0;a<t.length;a++)if("list"===t[a].type){for(var i=[],o=st(r.shift(),t[a].countType),s=0;s<o;s++)i.push(st(r.shift(),t[a].itemType));n[t[a].name]=i}else n[t[a].name]=st(r.shift(),t[a].type);return n}function ct(t,e){var r,n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a="";null!==(r=/end_header\s([\s\S]*)$/.exec(t))&&(a=r[1]);for(var i=a.split("\n"),o=0,s=0,u=0;u<i.length;u++){var c=i[u];if(""!==(c=c.trim())){s>=e.elements[o].count&&(o++,s=0);var l=ut(e.elements[o].properties,c);lt(n,e.elements[o].name,l),s++}}return n}function lt(t,e,r){if("vertex"===e)t.vertices.push(r.x,r.y,r.z),"nx"in r&&"ny"in r&&"nz"in r&&t.normals.push(r.nx,r.ny,r.nz),"s"in r&&"t"in r&&t.uvs.push(r.s,r.t),"red"in r&&"green"in r&&"blue"in r&&t.colors.push(r.red,r.green,r.blue);else if("face"===e){var n=r.vertex_indices||r.vertex_index;3===n.length?t.indices.push(n[0],n[1],n[2]):4===n.length&&(t.indices.push(n[0],n[1],n[3]),t.indices.push(n[1],n[2],n[3]))}}function pt(t,e,r,n){switch(r){case"int8":case"char":return[t.getInt8(e),1];case"uint8":case"uchar":return[t.getUint8(e),1];case"int16":case"short":return[t.getInt16(e,n),2];case"uint16":case"ushort":return[t.getUint16(e,n),2];case"int32":case"int":return[t.getInt32(e,n),4];case"uint32":case"uint":return[t.getUint32(e,n),4];case"float32":case"float":return[t.getFloat32(e,n),4];case"float64":case"double":return[t.getFloat64(e,n),8];default:throw new Error(r)}}function ht(t,e,r,n){for(var a,i={},o=0,s=0;s<r.length;s++)if("list"===r[s].type){var u=[],c=(a=pt(t,e+o,r[s].countType,n))[0];o+=a[1];for(var l=0;l<c;l++)a=pt(t,e+o,r[s].itemType,n),u.push(a[0]),o+=a[1];i[r[s].name]=u}else a=pt(t,e+o,r[s].type,n),i[r[s].name]=a[0],o+=a[1];return[i,o]}var ft=r("Zova"),dt=r("16gb"),mt=r("iGi1"),vt=r("czTJ"),yt=r("9BK7");function bt(){return(bt=Object(mt.a)(R.a.mark((function t(e,r){var n,a,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),n=Object(vt.a)(Object(vt.b)(e)),t.next=4,Object(dt.a)(gt(n,r));case 4:a=t.sent,t.t0=a.format,t.next="ascii"===t.t0?8:12;break;case 8:return t.next=10,Object(dt.a)(xt(n,a));case 10:return i=t.sent,t.abrupt("break",13);case 12:throw new Error("Binary PLY can not yet be parsed in streaming mode");case 13:return t.next=15,nt(a,i);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gt(t,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(L.a)(R.a.mark((function t(e,r){var n,a;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={comments:[],elements:[]},t.next=3,Object(yt.b)(e,(function(t){if("end_header"===(t=t.trim()))return!0;if(""===t)return!1;var e=t.split(/\s+/),i=e.shift();switch(t=e.join(" "),i){case"ply":break;case"format":n.format=e[0],n.version=e[1];break;case"comment":n.comments.push(t);break;case"element":a&&n.elements.push(a),a={name:e[0],count:parseInt(e[1],10),properties:[]};break;case"property":var o=wt(e,r.propertyNameMapping);a.properties.push(o);break;default:console.log("unhandled",i,e)}return!1}));case 3:return a&&n.elements.push(a),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function wt(t,e){var r={type:t[0]};return"list"===r.type?(r.name=t[3],r.countType=t[1],r.itemType=t[2]):r.name=t[1],e&&r.name in e&&(r.name=e[r.name]),r}function xt(t,e){return St.apply(this,arguments)}function St(){return(St=Object(L.a)(R.a.mark((function t(e,r){var n,a,i,o,s,u,c,l,p,h,f;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={indices:[],vertices:[],normals:[],uvs:[],colors:[]},a=0,i=0,o=!0,s=!1,t.prev=5,c=Object(ft.a)(e);case 7:return t.next=9,c.next();case 9:return l=t.sent,o=l.done,t.next=13,l.value;case 13:if(p=t.sent,o){t.next=21;break}""!==(h=(h=p).trim())&&(i>=r.elements[a].count&&(a++,i=0),f=_t(r.elements[a].properties,h),It(n,r.elements[a].name,f),i++);case 18:o=!0,t.next=7;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(5),s=!0,u=t.t0;case 27:if(t.prev=27,t.prev=28,o||null==c.return){t.next=32;break}return t.next=32,c.return();case 32:if(t.prev=32,!s){t.next=35;break}throw u;case 35:return t.finish(32);case 36:return t.finish(27);case 37:return t.abrupt("return",n);case 38:case"end":return t.stop()}}),t,null,[[5,23,27,37],[28,,32,36]])})))).apply(this,arguments)}function jt(t,e){switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(t,10);case"float":case"double":case"float32":case"float64":return parseFloat(t);default:throw new Error(e)}}function _t(t,e){for(var r=e.split(/\s+/),n={},a=0;a<t.length;a++)if("list"===t[a].type){for(var i=[],o=jt(r.shift(),t[a].countType),s=0;s<o;s++)i.push(jt(r.shift(),t[a].itemType));n[t[a].name]=i}else n[t[a].name]=jt(r.shift(),t[a].type);return n}function It(t,e,r){switch(e){case"vertex":t.vertices.push(r.x,r.y,r.z),"nx"in r&&"ny"in r&&"nz"in r&&t.normals.push(r.nx,r.ny,r.nz),"s"in r&&"t"in r&&t.uvs.push(r.s,r.t),"red"in r&&"green"in r&&"blue"in r&&t.colors.push(r.red/255,r.green/255,r.blue/255);break;case"face":var n=r.vertex_indices||r.vertex_index;3===n.length?t.indices.push(n[0],n[1],n[2]):4===n.length&&(t.indices.push(n[0],n[1],n[3]),t.indices.push(n[1],n[2],n[3]))}}function Pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Et="undefined"!=typeof __VERSION__?__VERSION__:"latest",kt=At(At({},{id:"ply",name:"PLY",version:Et,extensions:["ply"],mimeTypes:["text/plain","application/octet-stream"],text:!0,binary:!0,tests:["ply"],options:{ply:{workerUrl:"https://unpkg.com/@loaders.gl/ply@"+Et+"/dist/ply-loader.worker.js"}}}),{},{parse:function(){var t=Object(L.a)(R.a.mark((function t(e,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",at(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:at,parseSync:at,parseInBatches:function(t){return bt.apply(this,arguments)}});function zt(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Tt=0,Ut=1,Ct=2,Dt=3,Ft=4,Nt=5,Rt=6,Lt=7,Mt=8,Vt=9,Xt=10,Zt=11,Bt=12,Jt=13,Ht=14,Yt=15,Wt=16,Kt=17,Gt=-1,qt=function(){function t(){}return t.isNull=function(t){return t&&t.typeId===Ut},t.isInt=function(t){return t&&t.typeId===Ct},t.isFloat=function(t){return t&&t.typeId===Dt},t.isBinary=function(t){return t&&t.typeId===Ft},t.isUtf8=function(t){return t&&t.typeId===Nt},t.isBool=function(t){return t&&t.typeId===Rt},t.isDecimal=function(t){return t&&t.typeId===Lt},t.isDate=function(t){return t&&t.typeId===Mt},t.isTime=function(t){return t&&t.typeId===Vt},t.isTimestamp=function(t){return t&&t.typeId===Xt},t.isInterval=function(t){return t&&t.typeId===Zt},t.isList=function(t){return t&&t.typeId===Bt},t.isStruct=function(t){return t&&t.typeId===Jt},t.isUnion=function(t){return t&&t.typeId===Ht},t.isFixedSizeBinary=function(t){return t&&t.typeId===Yt},t.isFixedSizeList=function(t){return t&&t.typeId===Wt},t.isMap=function(t){return t&&t.typeId===Kt},t.isDictionary=function(t){return t&&t.typeId===Gt},t.prototype.compareTo=function(t){return this===t},Object(h.a)(t,[{key:"typeId",get:function(){return Tt}}]),t}(),$t=function(t){function e(e,r){var n;return(n=t.call(this)||this).isSigned=e,n.bitWidth=r,n}return Object(i.a)(e,t),e.prototype.toString=function(){return(this.isSigned?"I":"Ui")+"nt"+this.bitWidth},Object(h.a)(e,[{key:"typeId",get:function(){return Ct}},{key:"ArrayType",get:function(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array;default:throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")}}},{key:Symbol.toStringTag,get:function(){return"Int"}}]),e}(qt),Qt=function(t){function e(){return t.call(this,!1,8)||this}return Object(i.a)(e,t),e}($t),te=16,ee=32,re=64,ne=function(t){function e(e){var r;return(r=t.call(this)||this).precision=e,r}return Object(i.a)(e,t),e.prototype.toString=function(){return"Float"+this.precision},Object(h.a)(e,[{key:"typeId",get:function(){return Dt}},{key:"ArrayType",get:function(){switch(this.precision){case te:return Uint16Array;case ee:return Float32Array;case re:return Float64Array;default:throw new Error("Unrecognized "+this[Symbol.toStringTag]+" type")}}},{key:Symbol.toStringTag,get:function(){return"Float"}}]),e}(qt),ae=function(t){function e(){return t.call(this,ee)||this}return Object(i.a)(e,t),e}(ne),ie=function(t){function e(){return t.call(this,re)||this}return Object(i.a)(e,t),e}(ne),oe=function(t){function e(e,r){var n;return(n=t.call(this)||this).listSize=e,n.children=[r],n}return Object(i.a)(e,t),e.prototype.toString=function(){return"FixedSizeList["+this.listSize+"]<"+this.valueType+">"},Object(h.a)(e,[{key:"typeId",get:function(){return Wt}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:"ArrayType",get:function(){return this.valueType.ArrayType}},{key:Symbol.toStringTag,get:function(){return"FixedSizeList"}}]),e}(qt),se=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=!1),void 0===n&&(n=new Map),zt("string"==typeof t),zt(!e||e instanceof qt),zt("boolean"==typeof r),zt(!n||"object"==typeof n),this.name=t,this.type=e,this.nullable=r,this.metadata=n}var e=t.prototype;return e.clone=function(){return new t(this.name,this.type,this.nullable,this.metadata)},e.compareTo=function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata},e.toString=function(){return this.type+(this.nullable?", nullable":"")+(this.metadata?", metadata: "+this.metadata:"")},Object(h.a)(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}}]),t}(),ue=r("KQm4");function ce(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var pe=function(){function t(t,e){void 0===e&&(e=null),zt(Array.isArray(t)),function(t){for(var e,r={},n=ce(t);!(e=n()).done;){var a=e.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}(t),this.fields=t,this.metadata=e||new Map}var e=t.prototype;return e.compareTo=function(t){if(this.fields.metadata!==t.fields.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(var e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0},e.select=function(){for(var e=Object.create(null),r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var s=o[i];e[s]=!0}var u=n.filter((function(t){return e[t.name]}));return new t(u,this.metadata)},e.selectAt=function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.map((function(t){return e.fields[t]})).filter(Boolean);return new t(i,this.metadata)},e.assign=function(e){var r=this.metadata,n=e;if(e instanceof t){var a=e;n=a.fields,r=he(he(new Map,this.metadata),a.metadata)}for(var i,o=Object.create(null),s=ce(this.fields);!(i=s()).done;){var u=i.value;o[u.name]=u}for(var c,l=ce(n);!(c=l()).done;){var p=c.value;o[p.name]=p}return new t(Object.values(o),r)},t}();function he(t,e){return new Map([].concat(Object(ue.a)(t||new Map),Object(ue.a)(e||new Map)))}function fe(t,e,r){var n,a=(new TextDecoder).decode(t),i=function(t){var e=t.search(/[\r\n]DATA\s(\S*)\s/i),r=/[\r\n]DATA\s(\S*)\s/i.exec(t.substr(e-1)),n={};n.data=r&&r[1],n.headerLen=(r&&r[0].length)+e,n.str=t.substr(0,n.headerLen),n.str=n.str.replace(/\#.*/gi,""),n.version=/VERSION (.*)/i.exec(n.str),n.fields=/FIELDS (.*)/i.exec(n.str),n.size=/SIZE (.*)/i.exec(n.str),n.type=/TYPE (.*)/i.exec(n.str),n.count=/COUNT (.*)/i.exec(n.str),n.width=/WIDTH (.*)/i.exec(n.str),n.height=/HEIGHT (.*)/i.exec(n.str),n.viewpoint=/VIEWPOINT (.*)/i.exec(n.str),n.points=/POINTS (.*)/i.exec(n.str),null!==n.version&&(n.version=parseFloat(n.version[1]));null!==n.fields&&(n.fields=n.fields[1].split(" "));null!==n.type&&(n.type=n.type[1].split(" "));null!==n.width&&(n.width=parseInt(n.width[1],10));null!==n.height&&(n.height=parseInt(n.height[1],10));null!==n.viewpoint&&(n.viewpoint=n.viewpoint[1]);null!==n.points&&(n.points=parseInt(n.points[1],10));null===n.points&&(n.points=n.width*n.height);null!==n.size&&(n.size=n.size[1].split(" ").map((function(t){return parseInt(t,10)})));if(null!==n.count)n.count=n.count[1].split(" ").map((function(t){return parseInt(t,10)}));else{n.count=[];for(var a=0;a<n.fields.length;a++)n.count.push(1)}n.offset={};for(var i=0,o=0;o<n.fields.length;o++)"ascii"===n.data?n.offset[n.fields[o]]=o:(n.offset[n.fields[o]]=i,i+=n.size[o]);return n.rowSize=i,n}(a);switch(i.data){case"ascii":n=function(t,e){for(var r=[],n=[],a=[],i=t.offset,o=e.substr(t.headerLen).split("\n"),s=0;s<o.length;s++)if(""!==o[s]){var u=o[s].split(" ");if(void 0!==i.x&&(r.push(parseFloat(u[i.x])),r.push(parseFloat(u[i.y])),r.push(parseFloat(u[i.z]))),void 0!==i.rgb){var c=parseFloat(u[i.rgb]),l=new Float32Array([c]),p=new DataView(l.buffer,0);a.push(p.getUint8(0)),a.push(p.getUint8(1)),a.push(p.getUint8(2))}void 0!==i.normal_x&&(n.push(parseFloat(u[i.normal_x])),n.push(parseFloat(u[i.normal_y])),n.push(parseFloat(u[i.normal_z])))}return{position:r,normal:n,color:a}}(i,a);break;case"binary":n=function(t,e){for(var r=[],n=[],a=[],i=new DataView(e,t.headerLen),o=t.offset,s=0,u=0;s<t.points;s++,u+=t.rowSize)void 0!==o.x&&(r.push(i.getFloat32(u+o.x,!0)),r.push(i.getFloat32(u+o.y,!0)),r.push(i.getFloat32(u+o.z,!0))),void 0!==o.rgb&&(a.push(i.getUint8(u+o.rgb+0)),a.push(i.getUint8(u+o.rgb+1)),a.push(i.getUint8(u+o.rgb+2))),void 0!==o.normal_x&&(n.push(i.getFloat32(u+o.normal_x,!0)),n.push(i.getFloat32(u+o.normal_y,!0)),n.push(i.getFloat32(u+o.normal_z,!0)));return{position:r,normal:n,color:a}}(i,t);break;case"binary_compressed":default:throw new Error("PCD: "+i.data+" files are not supported")}var o=function(t,e){return{vertexCount:t.width*t.height,boundingBox:Object(M.a)(e)}}(i,n=function(t){var e={POSITION:{value:new Float32Array(t.position),size:3}};t.normal&&t.normal.length>0&&(e.NORMAL={value:new Float32Array(t.normal),size:3});t.color&&t.color.length>0&&(e.COLOR_0={value:new Uint8Array(t.color),size:3});return e}(n));return{loaderData:{header:i},header:o,schema:function(t,e){var r=t.offset,n=[];void 0!==r.x&&n.push(new se("POSITION",new oe(3,new se("xyz",new ae)),!1));void 0!==r.normal_x&&n.push(new se("NORMAL",new oe(3,new se("xyz",new ae)),!1));void 0!==r.rgb&&n.push(new se("COLOR_0",new oe(3,new se("rgb",new Qt)),!1));return new pe(n,e)}(i,new Map([["mode","0"],["boundingBox",JSON.stringify(o.boundingBox)]])),mode:0,indices:null,attributes:n}}function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ve="undefined"!=typeof __VERSION__?__VERSION__:"latest",ye=me(me({},{id:"pcd",name:"PCD",version:ve,extensions:["pcd"],mimeTypes:["text/plain"],options:{pcd:{workerUrl:"https://unpkg.com/@loaders.gl/pcd@"+ve+"/dist/pcd-loader.worker.js"}}}),{},{parse:function(){var t=Object(L.a)(R.a.mark((function t(e,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fe(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseSync:fe});r("E9XD"),r("7ueG");function be(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ge(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ge(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function ge(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Oe=/^[og]\s*(.+)?/,we=/^mtllib /,xe=/^usemtl /,Se=function(){function t(t){var e=t.index,r=t.name,n=void 0===r?"":r,a=t.mtllib,i=t.smooth,o=t.groupStart;this.index=e,this.name=n,this.mtllib=a,this.smooth=i,this.groupStart=o,this.groupEnd=-1,this.groupCount=-1,this.inherited=!1}return t.prototype.clone=function(e){return void 0===e&&(e=this.index),new t({index:e,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0})},t}(),je=function(){function t(t){void 0===t&&(t=""),this.name=t,this.geometry={vertices:[],normals:[],colors:[],uvs:[]},this.materials=[],this.smooth=!0,this.fromDeclaration=null}var e=t.prototype;return e.startMaterial=function(t,e){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n=new Se({index:this.materials.length,name:t,mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0});return this.materials.push(n),n},e.currentMaterial=function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},e._finalize=function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e},t}(),_e=function(){function t(){this.objects=[],this.object=null,this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.materialLibraries=[],this.startObject("",!1)}var e=t.prototype;return e.startObject=function(t,e){if(void 0===e&&(e=!0),this.object&&!this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=e);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object=new je(t),this.object.fromDeclaration=e,r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},e.finalize=function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},e.parseVertexIndex=function(t,e){var r=parseInt(t,10);return 3*(r>=0?r-1:r+e/3)},e.parseNormalIndex=function(t,e){var r=parseInt(t,10);return 3*(r>=0?r-1:r+e/3)},e.parseUVIndex=function(t,e){var r=parseInt(t,10);return 2*(r>=0?r-1:r+e/2)},e.addVertex=function(t,e,r){var n=this.vertices,a=this.object.geometry.vertices;a.push(n[t+0],n[t+1],n[t+2]),a.push(n[e+0],n[e+1],n[e+2]),a.push(n[r+0],n[r+1],n[r+2])},e.addVertexPoint=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addVertexLine=function(t){var e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},e.addNormal=function(t,e,r){var n=this.normals,a=this.object.geometry.normals;a.push(n[t+0],n[t+1],n[t+2]),a.push(n[e+0],n[e+1],n[e+2]),a.push(n[r+0],n[r+1],n[r+2])},e.addColor=function(t,e,r){var n=this.colors,a=this.object.geometry.colors;a.push(n[t+0],n[t+1],n[t+2]),a.push(n[e+0],n[e+1],n[e+2]),a.push(n[r+0],n[r+1],n[r+2])},e.addUV=function(t,e,r){var n=this.uvs,a=this.object.geometry.uvs;a.push(n[t+0],n[t+1]),a.push(n[e+0],n[e+1]),a.push(n[r+0],n[r+1])},e.addUVLine=function(t){var e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},e.addFace=function(t,e,r,n,a,i,o,s,u){var c=this.vertices.length,l=this.parseVertexIndex(t,c),p=this.parseVertexIndex(e,c),h=this.parseVertexIndex(r,c);if(this.addVertex(l,p,h),void 0!==n&&""!==n){var f=this.uvs.length;l=this.parseUVIndex(n,f),p=this.parseUVIndex(a,f),h=this.parseUVIndex(i,f),this.addUV(l,p,h)}if(void 0!==o&&""!==o){var d=this.normals.length;l=this.parseNormalIndex(o,d),p=o===s?l:this.parseNormalIndex(s,d),h=o===u?l:this.parseNormalIndex(u,d),this.addNormal(l,p,h)}this.colors.length>0&&this.addColor(l,p,h)},e.addPointGeometry=function(t){this.object.geometry.type="Points";for(var e,r=this.vertices.length,n=be(t);!(e=n()).done;){var a=e.value;this.addVertexPoint(this.parseVertexIndex(a,r))}},e.addLineGeometry=function(t,e){this.object.geometry.type="Line";for(var r,n=this.vertices.length,a=this.uvs.length,i=be(t);!(r=i()).done;){var o=r.value;this.addVertexLine(this.parseVertexIndex(o,n))}for(var s,u=be(e);!(s=u()).done;){var c=s.value;this.addUVLine(this.parseUVIndex(c,a))}},t}();function Ie(t,e){var r=new Map;for(var n in e)"value"!==n&&r.set(n,JSON.stringify(e[n]));var a=function(t){switch(t.constructor){case Float32Array:return new ae;case Float64Array:return new ie;case Uint8Array:return new Qt;default:throw new Error("array type not supported")}}(e.value),i=!("size"in e)||1===e.size;return new se(t,i?a:new oe(e.size,new se("value",a)),!1,r)}function Pe(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ae(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ee(t,e){var r=function(t){var e=new _e;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var r=t.split("\n"),n="",a="",i=[],o="function"==typeof"".trimLeft,s=0,u=r.length;s<u;s++)if(n=r[s],0!==(n=o?n.trimLeft():n.trim()).length&&"#"!==(a=n.charAt(0)))if("v"===a){var c=n.split(/\s+/);switch(c[0]){case"v":e.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),8===c.length&&e.colors.push(parseFloat(c[4]),parseFloat(c[5]),parseFloat(c[6]));break;case"vn":e.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));break;case"vt":e.uvs.push(parseFloat(c[1]),parseFloat(c[2]))}}else if("f"===a){for(var l=n.substr(1).trim().split(/\s+/),p=[],h=0,f=l.length;h<f;h++){var d=l[h];if(d.length>0){var m=d.split("/");p.push(m)}}for(var v=p[0],y=1,b=p.length-1;y<b;y++){var g=p[y],O=p[y+1];e.addFace(v[0],g[0],O[0],v[1],g[1],O[1],v[2],g[2],O[2])}}else if("l"===a){var w=n.substring(1).trim().split(" "),x=void 0,S=[];if(-1===n.indexOf("/"))x=w;else{x=[];for(var j=0,_=w.length;j<_;j++){var I=w[j].split("/");""!==I[0]&&x.push(I[0]),""!==I[1]&&S.push(I[1])}}e.addLineGeometry(x,S)}else if("p"===a){var P=n.substr(1).trim().split(" ");e.addPointGeometry(P)}else if(null!==(i=Oe.exec(n))){var A=(" "+i[0].substr(1).trim()).substr(1);e.startObject(A)}else if(xe.test(n))e.object.startMaterial(n.substring(7).trim(),e.materialLibraries);else if(we.test(n))e.materialLibraries.push(n.substring(7).trim());else{if("s"!==a){if("\0"===n)continue;throw new Error('Unexpected line: "'+n+'"')}if((i=n.split(" ")).length>1){var E=i[1].trim().toLowerCase();e.object.smooth="0"!==E&&"off"!==E}else e.object.smooth=!0;var k=e.object.currentMaterial();k&&(k.smooth=e.object.smooth)}e.finalize();for(var z,T=[],U=[],C=be(e.objects);!(z=C()).done;){var D=z.value,F=D.geometry;if(0!==F.vertices.length){var N={header:{vertexCount:F.vertices.length/3},attributes:{}};switch(F.type){case"Points":N.mode=0;break;case"Line":N.mode=1;break;default:N.mode=4}N.attributes.POSITION={value:new Float32Array(F.vertices),size:3},F.normals.length>0&&(N.attributes.NORMAL={value:new Float32Array(F.normals),size:3}),F.colors.length>0&&(N.attributes.COLOR_0={value:new Float32Array(F.colors),size:3}),F.uvs.length>0&&(N.attributes.TEXCOORD_0={value:new Float32Array(F.uvs),size:2}),N.materials=[];for(var R,L=be(D.materials);!(R=L()).done;){var M=R.value,V={name:M.name,flatShading:!M.smooth};N.materials.push(V),U.push(V)}N.name=D.name,T.push(N)}}return{meshes:T,materials:U}}(t).meshes,n=r.reduce((function(t,e){return t+e.header.vertexCount}),0),a=function(t,e){for(var r,n,a,i,o=new Float32Array(3*e),s=0,u=Pe(t);!(i=u()).done;){var c=i.value.attributes,l=c.POSITION,p=c.NORMAL,h=c.COLOR_0,f=c.TEXCOORD_0;o.set(l.value,3*s),p&&(r=r||new Float32Array(3*e)).set(p.value,3*s),h&&(n=n||new Float32Array(3*e)).set(h.value,3*s),f&&(a=a||new Float32Array(2*e)).set(f.value,2*s),s+=l.value.length/3}var d={};d.POSITION={value:o,size:3},r&&(d.NORMAL={value:r,size:3});n&&(d.COLOR_0={value:n,size:3});a&&(d.TEXCOORD_0={value:a,size:2});return d}(r,n),i={vertexCount:n,boundingBox:Object(M.a)(a)};return{loaderData:{header:{}},schema:function(t,e){void 0===e&&(e={});var r=null;for(var n in e)r=r||new Map,"value"!==n&&r.set(n,JSON.stringify(e[n]));var a=[];for(var i in t){var o=Ie(i,t[i]);a.push(o)}return new pe(a,r)}(a,{mode:4,boundingBox:i.boundingBox}),header:i,mode:4,attributes:a}}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ze(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Te="undefined"!=typeof __VERSION__?__VERSION__:"latest",Ue=ze(ze({},{id:"obj",name:"OBJ",version:Te,extensions:["obj"],mimeTypes:["text/plain"],testText:function(t){return"v"===t[0]},options:{obj:{workerUrl:"https://unpkg.com/@loaders.gl/obj@"+Te+"/dist/obj-loader.worker.js"}}}),{},{parse:function(){var t=Object(L.a)(R.a.mark((function t(e,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Ee((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),parseTextSync:Ee});var Ce=r("tXnp"),De=r("24Wh"),Fe=r("vOnD"),Ne=Fe.c.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),Re=Fe.c.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),Le=function(t){function e(){return t.apply(this,arguments)||this}Object(i.a)(e,t);var r=e.prototype;return r.componentDidMount=function(){var t=this.props,e=t.examples,r=void 0===e?{}:e,n=t.onExampleChange,a=this.props.selectedCategory,i=this.props.selectedExample;(a&&i||this._autoSelected||(a=Object.keys(r)[0],i=Object.keys(r[a])[0],this._autoSelected=!0),a&&i)&&n({selectedCategory:a,selectedExample:i,example:r[a][i]})},r._renderDropDown=function(){var t=this.props,e=t.examples,r=void 0===e?{}:e,n=t.selectedCategory,a=t.selectedExample,i=t.onExampleChange;if(!n||!a)return!1;var o=n+"."+a;return s.a.createElement(Re,{value:o,onChange:function(t){var e=t.target.value.split("."),n=e[0],a=e[1],o=r[n][a];i({selectedCategory:n,selectedExample:a,example:o})}},Object.keys(r).map((function(t,e){var n=r[t];return s.a.createElement("optgroup",{key:e,label:t},Object.keys(n).map((function(e,r){var n=t+"."+e;return s.a.createElement("option",{key:r,value:n},e+" ("+t+")")})))})))},r._renderHeader=function(){var t=this.props,e=t.selectedCategory,r=t.selectedExample;return e&&r?s.a.createElement("div",null,s.a.createElement("h3",null,r," ",s.a.createElement("b",null,e)," ")):null},r._renderDropped=function(){var t=this.props.droppedFile;return t?s.a.createElement("div",null,"Dropped file: ",JSON.stringify(t.name)):null},r._renderStats=function(){var t,e=this.props,r=e.vertexCount,n=e.loadTimeMs;return t=r>=1e7?(r/1e6).toFixed(0)+"M":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e4?(r/1e3).toFixed(0)+"K":r>=1e3?(r/1e3).toFixed(1)+"K":""+r,s.a.createElement("div",null,s.a.createElement("div",null,Number.isFinite(r)?"Points: "+t:null),s.a.createElement("div",null,Number.isFinite(n)?"Load time: "+(n/1e3).toFixed(1)+"s":null))},r.render=function(){return s.a.createElement(Ne,null,this._renderHeader(),this._renderDropDown(),this._renderDropped(),this._renderStats())},e}(o.PureComponent);Le.defaultProps={examples:{},selectedCategory:null,selectedExample:null,onExampleChange:function(){}};var Me="https://raw.githubusercontent.com/uber-common/deck.gl-data/master",Ve="https://raw.githubusercontent.com/uber-web/loaders.gl/master",Xe={PLY:{"Lucy 800K":{uri:Me+"/examples/point-cloud-ply/lucy800k.ply"},"Lucy 100K":{uri:Me+"/examples/point-cloud-ply/lucy100k.ply"},Bunny:{uri:Ve+"/modules/ply/test/data/bunny.ply"},"Bun Zipper (Text)":{uri:Ve+"/modules/ply/test/data/bun_zipper.ply"},"Richmond Azaelias":{uri:Ve+"/modules/ply/test/data/richmond-azaelias.ply"}},LAZ:{"Indoor Scan 800K":{uri:Me+"/examples/point-cloud-laz/indoor.0.1.laz"}},Draco:{Bunny:{uri:Ve+"/modules/draco/test/data/bunny.drc"}},OBJ:{Magnolia:{uri:Ve+"/modules/obj/test/data/magnolia.obj"},Bunny:{uri:Ve+"/modules/obj/test/data/bunny.obj"}}};function Ze(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Be(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ze(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ze(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}Object(Ce.b)([F.a,rt,kt,ye,Ue]);var Je={target:[0,0,0],rotationX:0,rotationOrbit:0,orbitAxis:"Y",fov:50,minZoom:0,maxZoom:10,zoom:1},He=new l.a(["rotationOrbit"]);function Ye(t){var e={getPosition:t.POSITION};return t.COLOR_0&&(e.getColor=t.COLOR_0),{length:t.POSITION.value.length/t.POSITION.size,attributes:e}}var We=function(t){function e(e){var r;return(r=t.call(this,e)||this).state={viewState:Je,pointData:null,selectedExample:"Richmond Azaelias",selectedCategory:"PLY"},r._onLoad=r._onLoad.bind(Object(a.a)(r)),r._rotateCamera=r._rotateCamera.bind(Object(a.a)(r)),r._onViewStateChange=r._onViewStateChange.bind(Object(a.a)(r)),r._onExampleChange=r._onExampleChange.bind(Object(a.a)(r)),r}Object(i.a)(e,t);var r=e.prototype;return r._onViewStateChange=function(t){var e=t.viewState;this.setState({viewState:e})},r._rotateCamera=function(){var t=this.state.viewState;this.setState({viewState:Be(Be({},t),{},{rotationOrbit:t.rotationOrbit+10,transitionDuration:600,transitionInterpolator:He,onTransitionEnd:this._rotateCamera})})},r._onExampleChange=function(t){var e=t.selectedCategory,r=t.selectedExample,n=t.example.uri;this._loadStartMs=Date.now(),this.setState({selectedCategory:e,selectedExample:r,pointData:null,loadTimeMs:void 0}),Object(De.a)(n).then(this._onLoad.bind(this))},r._onLoad=function(t){t.header;var e=t.loaderData,r=t.attributes,n=(t.progress,e.header.mins&&e.header.maxs?e.header:function(t){for(var e=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],r=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],n=t.POSITION.size,a=t.POSITION.value.length/n,i=0;i<a;i+=n){var o=t.POSITION.value[i],s=t.POSITION.value[i+1],u=t.POSITION.value[i+2];o<e[0]?e[0]=o:o>r[0]&&(r[0]=o),s<e[1]?e[1]=s:s>r[1]&&(r[1]=s),u<e[2]?e[2]=u:u>r[2]&&(r[2]=u)}return{mins:e,maxs:r}}(r)),a=n.maxs,i=n.mins,o=this.state.viewState;o=Be(Be({},Je),{},{target:[(i[0]+a[0])/2,(i[1]+a[1])/2,(i[2]+a[2])/2],zoom:Math.log2(window.innerWidth/(a[0]-i[0]))-1}),this.setState({loadTimeMs:Date.now()-this._loadStartMs,pointData:Ye(r),viewState:o},this._rotateCamera)},r._renderLayers=function(){var t=this.state,e=t.pointData,r=t.selectedExample;return[e&&new D.a({id:"point-cloud-layer-"+r,coordinateSystem:p.a.CARTESIAN,data:e,getNormal:[0,1,0],getColor:[255,255,255],opacity:.5,pointSize:.5})]},r._renderControlPanel=function(){var t=this.state,e=t.selectedExample,r=t.pointData,n=t.selectedCategory,a=t.loadTimeMs;return s.a.createElement(Le,{examples:Xe,selectedCategory:n,selectedExample:e,onExampleChange:this._onExampleChange,vertexCount:r&&r.length,loadTimeMs:a})},r.render=function(){var t=this.state.viewState,e=this.props.panel,r=void 0===e||e;return s.a.createElement("div",{style:{position:"relative",height:"100%"}},s.a.createElement("div",{style:{visibility:r?"default":"hidden"}},this._renderControlPanel()),s.a.createElement(c.a,{views:new C,viewState:t,controller:!0,onViewStateChange:this._onViewStateChange,layers:this._renderLayers(),parameters:{clearColor:[.07,.14,.19,1]}}))},e}(o.PureComponent);function Ke(t){Object(u.render)(s.a.createElement(We,null),t)}},yNLB:function(t,e,r){var n=r("0Dky"),a=r("WJkJ");t.exports=function(t){return n((function(){return!!a[t]()||"​᠎"!="​᠎"[t]()||a[t].name!==t}))}}}]);