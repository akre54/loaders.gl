(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"9h7C":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n={};function r(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function s(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n="/";return(e=e.map((function(t,i){return i&&(t=t.replace(new RegExp("^"+n),"")),i!==e.length-1&&(t=t.replace(new RegExp(n+"$"),"")),t}))).join(n)}i.r(n),i.d(n,"dirname",(function(){return r})),i.d(n,"join",(function(){return s}))},"G+eI":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("1OyB"),r=i("vuIU"),s=i("OyGM"),a=function(){function t(e,i){Object(n.a)(this,t),this.name=e,this.type=i,this.sampleSize=1,this.reset()}return Object(r.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(s.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(s.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),o=function(){function t(e){var i=e.id,r=e.stats;Object(n.a)(this,t),this.id=i,this.stats={},this._initializeStats(r),Object.seal(this)}return Object(r.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,i=t.type;return this.stats[e]||(this.stats[e]=t instanceof a?t:new a(e,i)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),t}()},GA6j:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("1OyB"),r=i("vuIU"),s=i("Ji7U"),a=i("md7G"),o=i("foSv"),u=i("fxzv"),c=i("+H0l"),h=i("sSh/"),l=i("HwUG"),f=i("ZxFD"),d=i("n+fv");function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Object(a.a)(this,i)}}var m=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),y=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),g={},b=function(t){Object(s.a)(i,t);var e=p(i);function i(t){var r;return Object(n.a)(this,i),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(r.a)(i,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return y}}],[{key:"IDENTITY",get:function(){return g.IDENTITY=g.IDENTITY||Object.freeze(new i(m)),g.IDENTITY}},{key:"ZERO",get:function(){return g.ZERO=g.ZERO||Object.freeze(new i(v)),g.ZERO}}]),Object(r.a)(i,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,i,n,r,s,a,o,u){return this[0]=t,this[1]=e,this[2]=i,this[3]=n,this[4]=r,this[5]=s,this[6]=a,this[7]=o,this[8]=u,this.check()}},{key:"setRowMajor",value:function(t,e,i,n,r,s,a,o,u){return this[0]=t,this[1]=n,this[2]=a,this[3]=e,this[4]=r,this[5]=o,this[6]=i,this[7]=s,this[8]=u,this.check()}},{key:"determinant",value:function(){return l.b(this)}},{key:"identity",value:function(){return this.copy(m)}},{key:"fromQuaternion",value:function(t){return l.c(this,t),this.check()}},{key:"transpose",value:function(){return l.i(this,this),this.check()}},{key:"invert",value:function(){return l.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return l.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return l.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return l.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?l.g(this,this,t):l.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return l.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=f.i(e||[-0,-0],t,this);break;case 3:e=d.n(e||[-0,-0,-0],t,this);break;case 4:e=Object(h.d)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}]),i}(u.a)},GqEx:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return u}));var n=i("a3TU"),r=Math.PI/2;function s(t,e){var i=e.viewport,n=i.metersPerPixel,s=t.header.mbs[1],a=t.header.mbs[0],c=t.header.mbs[2],h=t.header.mbs[3],l=i.height,f=i.width,d=i.latitude,p=i.longitude,m=[p,d],v=[a,s,c],y=[p,s],g=[a,d],b=Math.sqrt(l*l+f*f)*n[0],_=.5*l+h/6378137,O=.5*f+h/6378137;if(o(m,v)>b+h/6378137)return"OUT";if(o(m,y)>_)return"OUT";if(o(m,g)>O)return"OUT";if(0===t.lodMetricValue)return"DIG";var T=u(t,e);return(T*=r)<.5?"OUT":!t.header.children||T<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}function a(t){var e=t[0],i=t[1],r=t[2],s=Object(n.j)(e),a=Object(n.j)(i),o=1+r/6378137,u=o*Math.cos(a);return[e=u*Math.cos(s),i=u*Math.sin(s),r=o*Math.sin(a)]}function o(t,e){var i=t[0],n=t[1],r=t[2],s=void 0===r?0:r,o=e[0],u=e[1],c=e[2],h=a([o,u,void 0===c?0:c]),l=a([i,n,s]),f=l[0]-h[0],d=l[1]-h[1],p=l[2]-h[2];return f*f+d*d+p*p}function u(t,e){var i=e.viewport,n=t.header.mbs[1],r=[t.header.mbs[0],n,t.header.mbs[2]],s=t.header.mbs[3]/6378137,a=o(i.unprojectPosition(i.cameraPosition),r)-s*s;if(a<=0)return 170141175e30;var u=function(t,e){var i=e.viewport,n=i.width,r=i.height,s=i.pixelProjectionMatrix,a=Math.tan(Math.atan(Math.sqrt(1/(s[0]*s[0])+1/(s[5]*s[5]))));return Math.sqrt(r*r+n*n)/a}(0,e);return u*=s/Math.sqrt(a)/i.scale}},Ns70:function(t,e,i){"use strict";i.d(e,"a",(function(){return q}));var n=i("ODXe"),r=i("1OyB"),s=i("vuIU"),a=i("zXfU"),o=i("tS8E"),u=i("gOKY"),c=i("Nw31"),h=i("a3TU"),l=i("n+fv"),f=(Math.max(6378137,6378137,6356752.314245179),function(t){return t}),d=new a.a;function p(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return Object(h.f)(t)?(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=i(t.longitude),e[1]=i(t.latitude),e[2]=t.height):(e[0]=i(t.x),e[1]=i(t.y),e[2]=t.z),e}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return p(t,e,h.b._cartographicRadians?f:h.j)}function v(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return Object(h.f)(e)?(e[0]=i(t[0]),e[1]=i(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=i(t[0]),e.latitude=i(t[1]),e.height=t[2]):(e.x=i(t[0]),e.y=i(t[1]),e.z=t[2]),e}function y(t,e){return v(t,e,h.b._cartographicRadians?f:h.i)}var g=new a.a,b=new a.a,_=new a.a;var O=new a.a,T={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},w={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},S={east:new a.a,north:new a.a,up:new a.a,west:new a.a,south:new a.a,down:new a.a},j=new a.a,E=new a.a,M=new a.a;function P(t,e,i,n,r,s){var a,u,c,l=T[e]&&T[e][i];Object(o.a)(l&&(!n||n===l));var f=O.copy(r);if(Object(h.d)(f.x,0,1e-14)&&Object(h.d)(f.y,0,1e-14)){var d=Math.sign(f.z);a=j.fromArray(w[e]),"east"!==e&&"west"!==e&&a.scale(d),u=E.fromArray(w[i]),"east"!==i&&"west"!==i&&u.scale(d),c=M.fromArray(w[n]),"east"!==n&&"west"!==n&&c.scale(d)}else{var p=S.up,m=S.east,v=S.north;m.set(-f.y,f.x,0).normalize(),t.geodeticSurfaceNormal(f,p),v.copy(p).cross(m);var y=S.west,g=S.south;S.down.copy(p).scale(-1),y.copy(m).scale(-1),g.copy(v).scale(-1),a=S[e],u=S[i],c=S[n]}return s[0]=a.x,s[1]=a.y,s[2]=a.z,s[3]=0,s[4]=u.x,s[5]=u.y,s[6]=u.z,s[7]=0,s[8]=c.x,s[9]=c.y,s[10]=c.z,s[11]=0,s[12]=f.x,s[13]=f.y,s[14]=f.z,s[15]=1,s}var k,x=new a.a,C=new a.a,I=new a.a,R=new a.a,N=new a.a,D=new a.a,q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),Object(o.a)(e>=0),Object(o.a)(i>=0),Object(o.a)(n>=0),this.radii=new a.a(e,i,n),this.radiiSquared=new a.a(e*e,i*i,n*n),this.radiiToTheFourth=new a.a(e*e*e*e,i*i*i*i,n*n*n*n),this.oneOverRadii=new a.a(0===e?0:1/e,0===i?0:1/i,0===n?0:1/n),this.oneOverRadiiSquared=new a.a(0===e?0:1/(e*e),0===i?0:1/(i*i),0===n?0:1/(n*n)),this.minimumRadius=Math.min(e,i,n),this.maximumRadius=Math.max(e,i,n),this.centerToleranceSquared=u.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(s.a)(t,null,[{key:"WGS84",get:function(){return k=k||new t(6378137,6378137,6356752.314245179)}}]),Object(s.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=C,r=I,s=Object(n.a)(t,3),a=s[2];this.geodeticSurfaceNormalCartographic(t,i),r.copy(this.radiiSquared).scale(i);var o=Math.sqrt(i.dot(r));return r.scale(1/o),i.scale(a),r.add(i),r.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];D.from(t);var i=this.scaleToGeodeticSurface(D,R);if(i){var n=this.geodeticSurfaceNormal(i,C),r=N;r.copy(D).subtract(i);var s=Math.atan2(n.y,n.x),a=Math.asin(n.z),o=Math.sign(l.d(r,D))*l.g(r);return y([s,a,o],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return P(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new c.a;return P(this,t,e,i,n,r)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return x.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=m(t),n=i[0],r=i[1],s=Math.cos(r);return x.set(s*Math.cos(n),s*Math.sin(n),Math.sin(r)).normalize(),x.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return x.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new a.a,n=e.oneOverRadii,r=e.oneOverRadiiSquared,s=e.centerToleranceSquared;g.from(t);var o=t.x,c=t.y,h=t.z,l=n.x,f=n.y,d=n.z,p=o*o*l*l,m=c*c*f*f,v=h*h*d*d,y=p+m+v,O=Math.sqrt(1/y);if(Number.isFinite(O)){var T=b;if(T.copy(t).scale(O),y<s)return T.to(i);var w=r.x,S=r.y,j=r.z,E=_;E.set(T.x*w*2,T.y*S*2,T.z*j*2);var M,P,k,x,C=(1-O)*t.len()/(.5*E.len()),I=0;do{var R=(M=1/(1+(C-=I)*w))*M,N=(P=1/(1+C*S))*P,D=(k=1/(1+C*j))*k,q=R*M,A=N*P,V=D*k,z=p*q*w+m*A*S+v*V*j,U=-2*z;I=(x=p*R+m*N+v*D-1)/U}while(Math.abs(x)>u.a.EPSILON12);return g.scale([M,P,k]).to(i)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];R.from(t);var i=R.x,n=R.y,r=R.z,s=this.oneOverRadiiSquared,a=1/Math.sqrt(i*i*s.x+n*n*s.y+r*r*s.z);return R.multiplyScalar(a).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return R.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return R.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(o.a)(Object(h.d)(this.radii.x,this.radii.y,u.a.EPSILON15)),Object(o.a)(this.radii.z>0),R.from(t);var n=R.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(n)>=this.radii.z-e))return R.set(0,0,n).to(i)}}]),t}()},O6hP:function(t,e,i){"use strict";i.d(e,"d",(function(){return n})),i.d(e,"e",(function(){return r})),i.d(e,"f",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return u}));var n={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},r={ADD:1,REPLACE:2},s={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},a={I3S:"I3S",TILES3D:"TILES3D"},o={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},u={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},OyGM:function(t,e,i){"use strict";(function(t){function n(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var i=t.hrtime();e=1e3*i[0]+i[1]/1e6}else e=Date.now();return e}i.d(e,"a",(function(){return n}))}).call(this,i("8oxB"))},Vmat:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("rePB"),r=i("G+eI");function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){Object(n.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var o={id:"request-scheduler",throttleRequests:!0,maxRequests:6},u=function(){function t(t){void 0===t&&(t={}),this.props=a(a({},o),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new r.a({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}var e=t.prototype;return e.scheduleRequest=function(t,e){if(void 0===e&&(e=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var i={handle:t,getPriority:e},n=new Promise((function(t){return i.resolve=t,i}));return this.requestQueue.push(i),this.requestMap.set(t,n),this._issueNewRequests(),n},e._issueRequest=function(t){var e=this,i=t.handle,n=t.resolve,r=!1,s=function(){r||(r=!0,e.requestMap.delete(i),e.activeRequestCount--,e._issueNewRequests())};return this.activeRequestCount++,n?n({done:s}):Promise.resolve({done:s})},e._issueNewRequests=function(){var t=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return t._issueNewRequestsAsync()}),0))},e._issueNewRequestsAsync=function(){this._deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(var e=0;e<t;++e)if(this.requestQueue.length>0){var i=this.requestQueue.shift();this._issueRequest(i)}}},e._updateAllRequests=function(){for(var t=this.requestQueue,e=0;e<t.length;++e){var i=t[e];this._updateRequest(i)||(t.splice(e,1),this.requestMap.delete(i.handle),e--)}t.sort((function(t,e){return t.priority-e.priority}))},e._updateRequest=function(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)},t}()},cKlU:function(t,e,i){"use strict";i.d(e,"a",(function(){return J}));var n=i("o0o1"),r=i.n(n),s=(i("wcNg"),i("HaE+")),a=i("rePB"),o=i("vuIU"),u=i("Nw31"),c=i("zXfU"),h=i("Ns70"),l=i("G+eI"),f=i("P+ME"),d=i("9h7C"),p=i("Vmat"),m=function(t,e,i){this.item=t,this.previous=e,this.next=i},v=function(){function t(){this.head=null,this.tail=null,this._length=0}var e=t.prototype;return e.add=function(t){var e=new m(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e},e.remove=function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)},e.splice=function(t,e){t!==e&&(this.remove(e),this._insert(t,e))},e._insert=function(t,e){var i=t.next;t.next=e,this.tail===t?this.tail=e:i.previous=e,e.next=i,e.previous=t,++this._length},Object(o.a)(t,[{key:"length",get:function(){return this._length}}]),t}();function y(t){return null!=t}var g=function(){function t(){this._list=new v,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}var e=t.prototype;return e.reset=function(){this._list.splice(this._list.tail,this._sentinel)},e.touch=function(t){var e=t._cacheNode;y(e)&&this._list.splice(this._sentinel,e)},e.add=function(t,e,i){y(e._cacheNode)||(e._cacheNode=this._list.add(e),i&&i(t,e))},e.unloadTile=function(t,e,i){var n=e._cacheNode;y(n)&&(this._list.remove(n),e._cacheNode=void 0,i&&i(t,e))},e.unloadTiles=function(t,e){var i=this._trimTiles;this._trimTiles=!1;for(var n=this._list,r=1024*t.maximumMemoryUsage*1024,s=this._sentinel,a=n.head;a!==s&&(t.gpuMemoryUsageInBytes>r||i);){var o=a.item;a=a.next,this.unloadTile(t,o,e)}},e.trim=function(){this._trimTiles=!0},t}();var b=i("rOwd"),_=new c.a,O=new c.a,T=new b.b([new b.d,new b.d,new b.d,new b.d,new b.d,new b.d]);function w(t,e){var i=t.cameraDirection,n=t.cameraUp,r=t.height,s=t.distanceScales.metersPerUnit,a=[t.longitude,t.latitude,0],o=h.a.WGS84.cartographicToCartesian(a,new c.a),u=h.a.WGS84.eastNorthUpToFixedFrame(o),l=t.unprojectPosition(t.cameraPosition),f=h.a.WGS84.cartographicToCartesian(l,new c.a),d=new c.a(u.transformAsVector(new c.a(i).scale(s))).normalize(),p=new c.a(u.transformAsVector(new c.a(n).scale(s))).normalize();return function(t,e){var i=t.getFrustumPlanes(),n=0;for(var r in i){var s=i[r],a=s.normal.dot(t.center);O.copy(s.normal).scale(s.distance-a).add(t.center);var o=t.unprojectPosition(O),u=h.a.WGS84.cartographicToCartesian(o,new c.a);T.planes[n++].fromPointNormal(u,_.copy(e).subtract(u))}}(t,o),{camera:{position:f,direction:d,up:p},viewport:t,height:r,cullingVolume:T,frameNumber:e,sseDenominator:1.15}}var S=new c.a;var j=i("tzeD"),E=i("dI71"),M=i("O6hP"),P=function(){function t(t){void 0===t&&(t=0),this._array=new Array(t),this._map=new Map,this._length=t}var e=t.prototype;return e.get=function(t){return Object(f.a)(t<this._array.length),this._array[t]},e.set=function(t,e){Object(f.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)},e.delete=function(t){var e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)},e.peek=function(){return this._array[this._length-1]},e.push=function(t){if(!this._map.has(t)){var e=this.length++;this._array[e]=t,this._map.set(t,e)}},e.pop=function(){var t=this._array[--this.length];return this._map.delete(t),t},e.reserve=function(t){Object(f.a)(t>=0),t>this._array.length&&(this._array.length=t)},e.resize=function(t){Object(f.a)(t>=0),this.length=t},e.trim=function(t){null==t&&(t=this.length),this._array.length=t},e.reset=function(){this._array=[],this._map=new Map,this._length=0},e.find=function(t){return this._map.has(t)},Object(o.a)(t,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}}]),t}();function k(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function C(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function I(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?C(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var R={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2},N=function(){function t(t){this.options=I(I({},R),t),this._traversalStack=new P,this._emptyTraversalStack=new P,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}var e=t.prototype;return e.traverse=function(t,e,i){this.root=t,this.options=I(I({},this.options),i),this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)},e.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},e.executeTraversal=function(t,e){var i=this._traversalStack;for(i.push(t);i.length>0;){var n=i.pop(),r=!1;this.canTraverse(n,e)&&(this.updateChildTiles(n,e),r=this.updateAndPushChildren(n,e,i));var s=n.parent,a=Boolean(!s||s._shouldRefine),o=!r;n.hasRenderContent?n.refine===M.e.ADD?(this.loadTile(n,e),this.selectTile(n,e)):n.refine===M.e.REPLACE&&(this.loadTile(n,e),o&&this.selectTile(n,e)):(this.emptyTiles[n.id]=n,this.loadTile(n,e),o&&this.selectTile(n,e)),this.touchTile(n,e),n._shouldRefine=r&&a}this.options.onTraversalEnd&&this.options.onTraversalEnd(this,e)},e.updateChildTiles=function(t,e){for(var i,n=k(t.children);!(i=n()).done;){var r=i.value;this.updateTile(r,e)}return!0},e.updateAndPushChildren=function(t,e,i){var n=this.options,r=n.loadSiblings,s=n.skipLevelOfDetail,a=t.children;a.sort(this.compareDistanceToCamera);for(var o,u=!s&&t.refine===M.e.REPLACE&&t.hasRenderContent,c=!1,h=k(a);!(o=h()).done;){var l=o.value;if(l.isVisibleAndInRequestVolume?(i.find(l)&&i.delete(l),i.push(l),c=!0):(u||r)&&(this.loadTile(l,e),this.touchTile(l,e)),u){var f=void 0;if(!(f=!!l._inRequestVolume&&(l.hasRenderContent?l.contentAvailable:this.executeEmptyTraversal(l,e))))return f}}return c},e.updateTile=function(t,e){this.updateTileVisibility(t,e)},e.selectTile=function(t,e){this.shouldSelectTile(t,e)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)},e.loadTile=function(t,e){this.shouldLoadTile(t,e)&&(t._requestedFrame=e.frameNumber,t._priority=this.getPriority(t),this.requestedTiles[t.id]=t)},e.touchTile=function(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber},e.canTraverse=function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),!(!n&&!t.isVisibleAndInRequestVolume)&&(!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:this.shouldRefine(t,e,i)))},e.shouldLoadTile=function(t,e){return t.hasUnloadedContent||t.contentExpired},e.shouldSelectTile=function(t,e){return t.contentAvailable&&!this.options.skipLevelOfDetail},e.shouldRefine=function(t,e,i){var n=t._screenSpaceError;return i&&(n=t.getScreenSpaceError(e,!0)),n>this.options.maximumScreenSpaceError},e.updateTileVisibility=function(t,e){var i=[];if(this.options.viewportTraversersMap)for(var n in this.options.viewportTraversersMap){this.options.viewportTraversersMap[n]===e.viewport.id&&i.push(n)}else i.push(e.viewport.id);t.updateVisibility(e,i)},e.compareDistanceToCamera=function(t,e){return t._distanceToCamera-e._distanceToCamera},e.getPriority=function(t){var e=this.options;switch(t.refine){case M.e.ADD:return t._distanceToCamera;case M.e.REPLACE:var i=t.parent,n=i&&(!e.skipLevelOfDetail||0===t._screenSpaceError||i.hasTilesetContent)?i._screenSpaceError:t._screenSpaceError;return this.root._screenSpaceError-n;default:return Object(f.a)(!1)}},e.anyChildrenVisible=function(t,e){for(var i,n=!1,r=k(t.children);!(i=r()).done;){var s=i.value;s.updateVisibility(e),n=n||s.isVisibleAndInRequestVolume}return n},e.executeEmptyTraversal=function(t,e){for(var i=!0,n=this._emptyTraversalStack;n.length>0;){var r=n.pop();this.updateTile(r,e),r.isVisibleAndInRequestVolume||(this.loadTile(r,e),this.touchTile(r,e));var s=!r.hasRenderContent&&this.canTraverse(r,e,!1,!0);if(s||r.contentAvailable||(i=!1),s)for(var a,o=k(r.children.filter((function(t){return t})));!(a=o()).done;){var u=a.value;n.find(u)&&n.delete(u),n.push(u)}}return i},t}(),D=function(t){function e(){return t.apply(this,arguments)||this}Object(E.a)(e,t);var i=e.prototype;return i.compareDistanceToCamera=function(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera},i.updateTileVisibility=function(e,i){if(t.prototype.updateTileVisibility.call(this,e,i),e.isVisibleAndInRequestVolume){var n=e.children.length>0;if(e.hasTilesetContent&&n){var r=e.children[0];return this.updateTileVisibility(r,i),void(e._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(e,i))e._visible=!1;else{var s=e.refine===M.e.REPLACE,a=e._optimChildrenWithinParent===M.b.USE_OPTIMIZATION;s&&a&&n&&!this.anyChildrenVisible(e,i)&&(e._visible=!1)}}},i.meetsScreenSpaceErrorEarly=function(t,e){var i=t.parent;return!(!i||i.hasTilesetContent||i.refine!==M.e.ADD)&&!this.shouldRefine(t,e,!0)},e}(N),q=i("24Wh"),A=i("GqEx"),V="REQUESTED",z="COMPLETED",U="ERROR",L=function(){function t(){this._statusMap={}}var e=t.prototype;return e.add=function(t,e,i,n){var r=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:i,key:e,frameState:n,status:V},t().then((function(t){r._statusMap[e].status=z,r._statusMap[e].callback(t,n)})).catch((function(t){r._statusMap[e].status=U,i(t)})))},e.update=function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)},e.find=function(t){return this._statusMap[t]},t}();function F(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function G(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?F(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):F(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function B(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return W(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var H=function(t){function e(e){var i;return(i=t.call(this,e)||this)._tileManager=new L,i}Object(E.a)(e,t);var i=e.prototype;return i.shouldRefine=function(t,e){return t._lodJudge=Object(A.b)(t,e),"DIG"===t._lodJudge},i.updateChildTiles=function(t,e){for(var i,n=this,r=t.header.children||[],s=t.children,a=t.tileset,o=function(){var r=i.value,o=r.id+"-"+e.viewport.id,u=s&&s.find((function(t){return t.id===o}));if(u)u&&n.updateTile(u,e);else{var c=function(){return n._loadTile(r.id,a)};n._tileManager.find(o)?n._tileManager.update(o,e):(a.tileset.nodePages&&(c=function(){return a.tileset.nodePagesTile.formTileFromNodePages(r.id)}),n._tileManager.add(c,o,(function(e){return n._onTileLoad(e,t,o)}),e))}},u=B(r);!(i=u()).done;)o()},i._loadTile=function(){var t=Object(s.a)(r.a.mark((function t(e,i){var n,s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.loader,s=i.getTileUrl(i.url+"/nodes/"+e),a={i3s:G(G({},i.fetchOptions),{},{isTileHeader:!0,loadContent:!1})},t.next=5,Object(q.a)(s,n,a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),i._onTileLoad=function(t,e,i){var n=this.options.basePath,r=new j.a(e.tileset,t,e,n,i);e.children.push(r);var s=this._tileManager.find(r.id).frameState;this.updateTile(r,s),this._frameNumber===s.frameNumber&&this.executeTraversal(r,s)},e}(N);function K(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach((function(e){Object(a.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Q={ellipsoid:h.a.WGS84,modelMatrix:new u.a,throttleRequests:!1,maximumMemoryUsage:32,onTileLoad:function(){},onTileUnload:function(){},onTileError:function(t,e,i){},maximumScreenSpaceError:8},J=function(){function t(t,e){void 0===e&&(e={}),Object(f.a)(t),this.options=X(X({},Q),e),this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||d.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.fetchOptions=this.options.fetchOptions||{},this.options.headers&&(this.fetchOptions.headers=this.options.headers),this.options.token&&(this.fetchOptions.token=this.options.token),this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this._traversers={},this._cache=new g,this._requestScheduler=new p.a({throttleRequests:this.options.throttleRequests}),this._frameNumber=0,this._updateFrameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this.frameStateData={},this._queryParams={},this._queryParamsString=null,this.maximumMemoryUsage=this.options.maximumMemoryUsage,this.gpuMemoryUsageInBytes=0,this.stats=new l.a({id:this.url}),this._initializeStats(),this._hasMixedContent=!1,this._maximumScreenSpaceError=this.options.maximumScreenSpaceError,this._properties=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description,this._defaultGeometrySchema=[],this._initializeTileSet(t,this.options)}var e=t.prototype;return e.isLoaded=function(){return 0===this._pendingCount},e.destroy=function(){this._destroy()},e.getTileUrl=function(t){return t.startsWith("data:")?t:""+t+this.queryParams},e.update=function(t){if(!(this.traverseCounter>0)){t instanceof Array||(t=[t]),this._cache.reset(),this._frameNumber++,this.traverseCounter=t.length;for(var e,i=K(t);!(e=i()).done;){var n=e.value.id;this._initTraverser(n)}for(var r,s=K(t);!(r=s()).done;){var a=r.value,o=a.id;if(this.roots[o]||(this.roots[o]=this._initializeTileHeaders(this.tileset,null,this.basePath)),this._traversers[o]){var u=this._traversers[o],c=w(a,this._frameNumber);u.traverse(this.roots[o],c,this.options)}}}},e._initTraverser=function(t){var e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e!==t?(this.traverseCounter--,null):(this._traversers[e]||(this._traversers[e]=this._initializeTraverser()),this._traversers[e])},e._onTraversalEnd=function(t,e){var i=e.viewport.id;this.frameStateData[i]||(this.frameStateData[i]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var n=this.frameStateData[i],r=Object.values(t.selectedTiles);n.selectedTiles=r,n._requestedTiles=Object.values(t.requestedTiles),n._emptyTiles=Object.values(t.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()},e._updateTiles=function(){for(var t in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}for(var i,n=K(this.selectedTiles);!(i=n()).done;){var r=i.value;this._tiles[r.id]=r}this._loadTiles(),this._unloadTiles(),this._updateStats()},e._tilesChanged=function(t,e){if(t.length!==e.length)return!0;var i=new Set(t.map((function(t){return t.id}))),n=new Set(e.map((function(t){return t.id}))),r=t.filter((function(t){return!n.has(t.id)})).length>0;return r=r||e.filter((function(t){return!i.has(t.id)})).length>0},e._loadTiles=function(){for(var t,e=K(this._requestedTiles);!(t=e()).done;){var i=t.value;i.contentUnloaded&&this._loadTile(i)}},e._unloadTiles=function(){this._cache.unloadTiles(this,(function(t,e){return t._unloadTile(e)}))},e._updateStats=function(){for(var t,e=0,i=0,n=K(this.selectedTiles);!(t=n()).done;){var r=t.value;r.contentAvailable&&(e++,r.content.pointCount&&(i+=r.content.pointCount))}this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=e,this.stats.get("Points").count=i},e._initializeTileSet=function(t){this.root=this._initializeTileHeaders(t,null,this.basePath),this.type===M.c.TILES3D&&this._initializeCesiumTileset(t),this.type===M.c.I3S&&this._initializeI3STileset(t),this._calculateViewProps()},e._calculateViewProps=function(){var t=this.root,e=t.boundingVolume.center;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new c.a,void(this.zoom=1);this.cartographicCenter=h.a.WGS84.cartesianToCartographic(e,new c.a),this.cartesianCenter=e,this.zoom=function(t){var e=t.halfAxes,i=t.radius,n=t.width,r=t.height;if(e){e.getColumn(0,S);var s=S.len();e.getColumn(1,S);var a=S.len();e.getColumn(2,S);var o=s/2,u=a/2,c=S.len()/2;return(Math.log2(6378137/o)+Math.log2(6378137/u)+Math.log2(6356752.314245179/c))/3}return i?Math.log2(6356752.314245179/i):r&&n?(Math.log2(6378137/n)+Math.log2(6378137/r))/2:1}(t.boundingVolume)},e._initializeStats=function(){this.stats.get("Tiles In Tileset(s)"),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points","memory"),this.stats.get("Tile Memory Use","memory")},e._initializeTileHeaders=function(t,e,i){var n=new j.a(this,t.root,e,i);if(e&&(e.children.push(n),n.depth=e.depth+1),this.type===M.c.TILES3D){var r=[];for(r.push(n);r.length>0;){var s=r.pop();this.stats.get("Tiles In Tileset(s)").incrementCount();for(var a,o=K(s.header.children||[]);!(a=o()).done;){var u=a.value,c=new j.a(this,u,s,i);s.children.push(c),c.depth=s.depth+1,r.push(c)}}}return n},e._initializeTraverser=function(){var t;switch(this.type){case M.c.TILES3D:t=D;break;case M.c.I3S:t=H;break;default:t=N}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})},e._destroyTileHeaders=function(t){this._destroySubtree(t)},e._loadTile=function(){var t=Object(s.a)(r.a.mark((function t(e){var i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._onStartTileLoading(),t.next=4,e.loadContent();case 4:i=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this._onTileLoadError(e,t.t0);case 10:return t.prev=10,this._onEndTileLoading(),this._onTileLoad(e,i),t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[0,7,10,14]])})));return function(e){return t.apply(this,arguments)}}(),e._onTileLoadError=function(t,e){this.stats.get("Failed Tile Loads").incrementCount();var i=e.message||e.toString(),n=t.url;console.error("A 3D tile failed to load: "+t.url+" "+i),this.options.onTileError(t,i,n)},e._onTileLoad=function(t,e){e&&(t&&t.content&&function(t,e){Object(f.a)(t),Object(f.a)(e);var i=e.rtcCenter,n=e.gltfUpAxis,r=t.computedTransform,s=t.boundingVolume.center,a=new u.a(r);switch(i&&a.translate(i),n){case"Z":break;case"Y":var o=(new u.a).rotateX(Math.PI/2);a=a.multiplyRight(o);break;case"X":var l=(new u.a).rotateY(-Math.PI/2);a=a.multiplyRight(l)}e.isQuantized&&a.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);var d=new c.a(s);e.cartesianModelMatrix=a,e.cartesianOrigin=d;var p=h.a.WGS84.cartesianToCartographic(d,new c.a),m=h.a.WGS84.eastNorthUpToFixedFrame(d).invert();e.cartographicModelMatrix=m.multiplyRight(a),e.cartographicOrigin=p,e.modelMatrix=e.cartographicModelMatrix}(t,t.content),this._addTileToCache(t),this.options.onTileLoad(t))},e._onStartTileLoading=function(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()},e._onEndTileLoading=function(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()},e._addTileToCache=function(t){this._cache.add(this,t,(function(e){return e._updateCacheStats(t)}))},e._updateCacheStats=function(t){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes},e._unloadTile=function(t){this.gpuMemoryUsageInBytes-=t.content.byteLength||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()},e._destroy=function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){for(var e,i=t.pop(),n=K(i.children);!(e=n()).done;){var r=e.value;t.push(r)}this._destroyTile(i)}this.root=null},e._destroySubtree=function(t){var e=t,i=[];for(i.push(e);i.length>0;){for(var n,r=K((t=i.pop()).children);!(n=r()).done;){var s=n.value;i.push(s)}t!==e&&this._destroyTile(t)}e.children=[]},e._destroyTile=function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()},e._initializeCesiumTileset=function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description,this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras},e._initializeI3STileset=function(t){"token"in this.options&&(this._queryParams.token=this.options.token),this._defaultGeometrySchema=t.store.defaultGeometrySchema},e.hasExtension=function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)},Object(o.a)(t,[{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];e.push(r+"="+t[r])}switch(e.length){case 0:return"";case 1:return"?"+e[0];default:return"?"+e.join("&")}}(this._queryParams)),this._queryParamsString}}]),t}()},gOKY:function(t,e,i){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},rOwd:function(t,e,i){"use strict";i.d(e,"a",(function(){return f})),i.d(e,"c",(function(){return D})),i.d(e,"b",(function(){return H})),i.d(e,"d",(function(){return U}));var n=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),r=i("1OyB"),s=i("vuIU"),a=i("zXfU"),o=new a.a,u=new a.a,c=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.a)(this,t),n=n||o.copy(e).add(i).scale(.5),this.center=new a.a(n),this.halfDiagonal=new a.a(i).subtract(this.center),this.minimum=new a.a(e),this.maximum=new a.a(i)}Object(s.a)(t,[{key:"clone",value:function(){return new t(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"intersectPlane",value:function(t){var e=this.halfDiagonal,i=u.from(t.normal),r=e.x*Math.abs(i.x)+e.y*Math.abs(i.y)+e.z*Math.abs(i.z),s=this.center.dot(i)+t.distance;return s-r>0?n.INSIDE:s+r<0?n.OUTSIDE:n.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e,i=o.from(t).subtract(this.center),n=this.halfDiagonal,r=0;return(e=Math.abs(i.x)-n.x)>0&&(r+=e*e),(e=Math.abs(i.y)-n.y)>0&&(r+=e*e),(e=Math.abs(i.z)-n.z)>0&&(r+=e*e),r}}])}(),i("ZaHm")),h=new a.a,l=new a.a,f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.radius=-0,this.center=new a.a,this.fromCenterRadius(e,i)}return Object(s.a)(t,[{key:"fromCenterRadius",value:function(t,e){return this.center.from(t),this.radius=e,this}},{key:"fromCornerPoints",value:function(t,e){return e=h.from(e),this.center=(new a.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(t){var e=this.center,i=this.radius,n=t.center,r=t.radius,s=h.copy(n).subtract(e),a=s.magnitude();if(i>=a+r)return this.clone();if(r>=a+i)return t.clone();var o=.5*(i+a+r);return l.copy(s).scale((-i+o)/a).add(e),this.center.copy(l),this.radius=o,this}},{key:"expand",value:function(t){var e=(t=h.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}},{key:"intersectPlane",value:function(t){var e=this.center,i=this.radius,r=t.normal.dot(e)+t.distance;return r<-i?n.OUTSIDE:r<i?n.INTERSECTING:n.INSIDE}},{key:"transform",value:function(t){this.center.transform(t);var e=c.e(h,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){return(t=h.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}}]),t}(),d=i("KQm4"),p=i("GA6j"),m=i("Xjzu"),v=new a.a,y=new a.a,g=new a.a,b=new a.a,_=new a.a,O=new a.a,T=new a.a,w=new a.a,S=new a.a,j=new a.a,E=0,M=1,P=2,k=3,x=4,C=5,I=6,R=7,N=8,D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(r.a)(this,t),this.center=(new a.a).from(e),this.halfAxes=new p.a(i)}return Object(s.a)(t,[{key:"fromCenterHalfSizeQuaternion",value:function(t,e,i){var n=new m.a(i),r=(new p.a).fromQuaternion(n);return r[0]=r[0]*e[0],r[1]=r[1]*e[0],r[2]=r[2]*e[0],r[3]=r[3]*e[1],r[4]=r[4]*e[1],r[5]=r[5]*e[1],r[6]=r[6]*e[2],r[7]=r[7]*e[2],r[8]=r[8]*e[2],this.center=(new a.a).from(t),this.halfAxes=r,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f,e=this.halfAxes,i=e.getColumn(0,w),n=e.getColumn(1,S),r=e.getColumn(2,j),s=v.copy(i).add(n).add(r);return t.center.copy(this.center),t.radius=s.magnitude(),t}},{key:"intersectPlane",value:function(t){var e=this.center,i=t.normal,r=this.halfAxes,s=i.x,a=i.y,o=i.z,u=Math.abs(s*r[E]+a*r[M]+o*r[P])+Math.abs(s*r[k]+a*r[x]+o*r[C])+Math.abs(s*r[I]+a*r[R]+o*r[N]),c=i.dot(e)+t.distance;return c<=-u?n.OUTSIDE:c>=u?n.INSIDE:n.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e=y.from(t).subtract(this.center),i=this.halfAxes,n=i.getColumn(0,g),r=i.getColumn(1,b),s=i.getColumn(2,_),a=n.magnitude(),o=r.magnitude(),u=s.magnitude();n.normalize(),r.normalize(),s.normalize();var c,h=0;return(c=Math.abs(e.dot(n))-a)>0&&(h+=c*c),(c=Math.abs(e.dot(r))-o)>0&&(h+=c*c),(c=Math.abs(e.dot(s))-u)>0&&(h+=c*c),h}},{key:"computePlaneDistances",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=this.center,a=this.halfAxes,o=a.getColumn(0,g),u=a.getColumn(1,b),c=a.getColumn(2,_),h=O.copy(o).add(u).add(c).add(s),l=T.copy(h).subtract(t),f=e.dot(l);return n=Math.min(f,n),r=Math.max(f,r),h.copy(s).add(o).add(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),h.copy(s).add(o).subtract(u).add(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),h.copy(s).add(o).subtract(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),s.copy(h).subtract(o).add(u).add(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),s.copy(h).subtract(o).add(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),s.copy(h).subtract(o).subtract(u).add(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),s.copy(h).subtract(o).subtract(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),n=Math.min(f,n),r=Math.max(f,r),i[0]=n,i[1]=r,i}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new a.a(t).len(),new a.a(e).len(),new a.a(i).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),n=new a.a(t).normalize(),r=new a.a(e).normalize(),s=new a.a(i).normalize();return(new m.a).fromMatrix3(new p.a([].concat(Object(d.a)(n),Object(d.a)(r),Object(d.a)(s))))}}]),t}(),q=i("tS8E"),A=i("a3TU"),V=new a.a,z=new a.a,U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.normal=new a.a,this.distance=-0,this.fromNormalDistance(e,i)}return Object(s.a)(t,[{key:"fromNormalDistance",value:function(t,e){return Object(q.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}},{key:"fromPointNormal",value:function(t,e){t=V.from(t),this.normal.from(e).normalize();var i=-this.normal.dot(t);return this.distance=i,this}},{key:"fromCoefficients",value:function(t,e,i,n){return this.normal.set(t,e,i),Object(q.a)(Object(A.d)(this.normal.len(),1)),this.distance=n,this}},{key:"clone",value:function(e){return new t(this.normal,this.distance)}},{key:"equals",value:function(t){return Object(A.d)(this.distance,t.distance)&&Object(A.d)(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var e=z.copy(this.normal).transformAsVector(t).normalize(),i=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(i,e)}},{key:"projectPointOntoPlane",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=V.from(t);var i=this.getPointDistance(t),n=z.copy(this.normal).scale(i);return t.subtract(n).to(e)}}]),t}();function L(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return F(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==i.return||i.return()}finally{if(o)throw s}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var G=[new a.a([1,0,0]),new a.a([0,1,0]),new a.a([0,0,1])],B=new a.a,W=new a.a,H=(new U(new a.a(1,0,0),0),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.a)(this,t),this.planes=e,Object(q.a)(this.planes.every((function(t){return t instanceof U})))}return Object(s.a)(t,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Object(s.a)(t,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*G.length;var e,i=t.center,n=t.radius,r=0,s=L(G);try{for(s.s();!(e=s.n()).done;){var a=e.value,o=this.planes[r],u=this.planes[r+1];o||(o=this.planes[r]=new U),u||(u=this.planes[r+1]=new U);var c=B.copy(a).scale(-n).add(i);a.dot(c);o.fromPointNormal(c,a);var h=B.copy(a).scale(n).add(i),l=W.copy(a).negate();l.dot(h);u.fromPointNormal(h,l),r+=2}}catch(f){s.e(f)}finally{s.f()}return this}},{key:"computeVisibility",value:function(t){Object(q.a)(t);var e,i=n.INSIDE,r=L(this.planes);try{for(r.s();!(e=r.n()).done;){var s=e.value;switch(t.intersectPlane(s)){case n.OUTSIDE:return n.OUTSIDE;case n.INTERSECTING:i=n.INTERSECTING}}}catch(a){r.e(a)}finally{r.f()}return i}},{key:"computeVisibilityWithPlaneMask",value:function(e,i){if(Object(q.a)(e,"boundingVolume is required."),Object(q.a)(Number.isFinite(i),"parentPlaneMask is required."),i===t.MASK_OUTSIDE||i===t.MASK_INSIDE)return i;for(var r=t.MASK_INSIDE,s=this.planes,a=0;a<this.planes.length;++a){var o=a<31?1<<a:0;if(!(a<31&&0==(i&o))){var u=s[a],c=e.intersectPlane(u);if(c===n.OUTSIDE)return t.MASK_OUTSIDE;c===n.INTERSECTING&&(r|=o)}}return r}}]),t}()),K=i("rePB"),Z=i("Nw31");function Y(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(i),!0).forEach((function(e){Object(K.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var Q=new a.a,J=new a.a,$=new a.a,tt=new a.a,et=new a.a,it=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),e=X({near:1,far:5e8},e),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this._cullingVolume=new H([new U,new U,new U,new U,new U,new U]),this._perspectiveMatrix=new Z.a,this._infinitePerspective=new Z.a}return Object(s.a)(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"computeCullingVolume",value:function(t,e,i){Object(q.a)(t,"position is required."),Object(q.a)(e,"direction is required."),Object(q.a)(i,"up is required.");var n=this._cullingVolume.planes;i=Q.copy(i).normalize();var r=J.copy(e).cross(i).normalize(),s=$.copy(e).multiplyByScalar(this.near).add(t),o=tt.copy(e).multiplyByScalar(this.far).add(t),u=et;return u.copy(r).multiplyByScalar(this.left).add(s).subtract(t).cross(i),n[0].fromPointNormal(t,u),u.copy(r).multiplyByScalar(this.right).add(s).subtract(t).cross(i).negate(),n[1].fromPointNormal(t,u),u.copy(i).multiplyByScalar(this.bottom).add(s).subtract(t).cross(r).negate(),n[2].fromPointNormal(t,u),u.copy(i).multiplyByScalar(this.top).add(s).subtract(t).cross(r),n[3].fromPointNormal(t,u),u=(new a.a).copy(e),n[4].fromPointNormal(s,u),u.negate(),n[5].fromPointNormal(o,u),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,e,i,n){nt(this),Object(q.a)(Number.isFinite(t)&&Number.isFinite(e)),Object(q.a)(t>0),Object(q.a)(e>0),Object(q.a)(i>0),Object(q.a)(n);var r=1/this.near,s=this.top*r,a=2*i*s/e,o=2*i*(s=this.right*r)/t;return n.x=o,n.y=a,n}},{key:"projectionMatrix",get:function(){return nt(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return nt(this),this._infinitePerspective}}]),t}();function nt(t){Object(q.a)(Number.isFinite(t.right)&&Number.isFinite(t.left)&&Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t.top,i=t.bottom,n=t.right,r=t.left,s=t.near,a=t.far;e===t._top&&i===t._bottom&&r===t._left&&n===t._right&&s===t._near&&a===t._far||(Object(q.a)(t.near>0&&t.near<t.far,"near must be greater than zero and less than far."),t._left=r,t._right=n,t._top=e,t._bottom=i,t._near=s,t._far=a,t._perspectiveMatrix=(new Z.a).frustum({left:r,right:n,bottom:i,top:e,near:s,far:a}),t._infinitePerspective=(new Z.a).frustum({left:r,right:n,bottom:i,top:e,near:s,far:1/0}))}function rt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function st(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(i),!0).forEach((function(e){Object(K.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}!function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),e=st({near:1,far:5e8,xOffset:0,yOffset:0},e),this._offCenterFrustum=new it,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this.xOffset=e.xOffset,this._xOffset=this.xOffset,this.yOffset=e.yOffset,this._yOffset=this.yOffset}Object(s.a)(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return null!=e&&e instanceof t&&(at(this),at(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}},{key:"computeCullingVolume",value:function(t,e,i){return at(this),this._offCenterFrustum.computeCullingVolume(t,e,i)}},{key:"getPixelDimensions",value:function(t,e,i,n){return at(this),this._offCenterFrustum.getPixelDimensions(t,e,i,n)}},{key:"projectionMatrix",get:function(){return at(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return at(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return at(this),this._fovy}},{key:"sseDenominator",get:function(){return at(this),this._sseDenominator}}])}();function at(t){Object(q.a)(Number.isFinite(t.fov)&&Number.isFinite(t.aspectRatio)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||(Object(q.a)(t.fov>=0&&t.fov<Math.PI),Object(q.a)(t.aspectRatio>0),Object(q.a)(t.near>=0&&t.near<t.far),t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio<=1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,new a.a,Math.PI;i("gOKY"),new p.a,new p.a,new p.a,new p.a,new p.a;new a.a,new a.a,new a.a,new a.a,new a.a,new p.a,new p.a,new p.a},tzeD:function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i("o0o1"),r=i.n(n),s=i("rePB"),a=(i("wcNg"),i("HaE+")),o=i("vuIU"),u=i("zXfU"),c=i("Nw31"),h=i("rOwd"),l=i("24Wh"),f=i("P+ME"),d=i("9h7C"),p=i("O6hP"),m=i("a3TU"),v=i("GA6j"),y=i("Ns70");function g(t){return null!=t}var b=new u.a,_=new u.a,O=new u.a;new c.a;function T(t,e,i){if(Object(f.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,i){var n=new u.a(t[0],t[1],t[2]);e.transform(n,n);var r=e.transformAsVector(t.slice(3,6)),s=e.transformAsVector(t.slice(6,9)),a=e.transformAsVector(t.slice(9,12)),o=new v.a([r[0],r[1],r[2],s[0],s[1],s[2],a[0],a[1],a[2]]);if(g(i))return i.center=n,i.halfAxes=o,i;return new h.c(n,o)}(t.box,e,i);if(t.region){var n=t.region,r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],d=n[5],p=y.a.WGS84.cartographicToCartesian([Object(m.c)(r),Object(m.c)(o),l],_),b=y.a.WGS84.cartographicToCartesian([Object(m.c)(a),Object(m.c)(s),d],O),T=(new u.a).addVectors(p,b).multiplyScalar(.5),S=(new u.a).subVectors(p,b).len()/2;return w([T[0],T[1],T[2],S],new c.a)}if(t.sphere)return w(t.sphere,e,i);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function w(t,e,i){var n=new u.a(t[0],t[1],t[2]);e.transform(n,n);var r=e.getScale(b),s=Math.max(Math.max(r[0],r[1]),r[2]),a=t[3]*s;return g(i)?(i.center=n,i.radius=a,i):new h.a(n,a)}new u.a,new u.a,new c.a,new u.a,new u.a,new u.a;function S(t,e){if(t.dynamicScreenSpaceError&&t._dynamicScreenSpaceErrorComputedDensity){var i=t._dynamicScreenSpaceErrorComputedDensity,n=t.dynamicScreenSpaceErrorFactor;return function(t,e){var i=t*e;return 1-Math.exp(-i*i)}(e,i)*n}return 0}var j=i("GqEx");function E(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function M(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?E(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var P=new u.a;var k=function(){function t(t,e,i,n,r){Object(f.a)("object"==typeof e),this.header=e,this.tileset=t,this.id=r||e.id,this.url=e.url,this.parent=i,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this.lodMetricType=null,this.lodMetricValue=null,this.boundingVolume=null,this.content=null,this.contentState=p.d.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.depth=0,this.viewportIds=[],this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,this._getPriority=this._getPriority.bind(this),Object.seal(this)}var e=t.prototype;return e.destroy=function(){this.header=null},e.isDestroyed=function(){return null===this.header},e.getScreenSpaceError=function(t,e){switch(this.tileset.type){case p.c.I3S:return Object(j.a)(this,t);case p.c.TILES3D:return function(t,e,i){var n=t.tileset,r=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,s=i?r:t.lodMetricValue;if(0===s)return 0;var a=Math.max(t._distanceToCamera,1e-7),o=s*e.height/(a*e.sseDenominator);return o-=S(n,a)}(this,t,e);default:return console.error("Unsupported tileset type"),null}},e._getPriority=function(){return this.isVisible?this.contentState===p.d.UNLOADED?-1:Math.max(1e7-this._priority,0)||0:-1},e.loadContent=function(){var t=Object(a.a)(r.a.mark((function t(){var e,i,n,s,a,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasEmptyContent){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.content){t.next=4;break}return t.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=p.d.LOADING,t.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority);case 9:if(e=t.sent){t.next=13;break}return this.contentState=p.d.UNLOADED,t.abrupt("return",!1);case 13:return t.prev=13,n=this.tileset.getTileUrl(this.contentUrl),s=this.tileset.fetchOptions,a=this.tileset.loader,o=M(M({},s),{},((i={})[a.id]=M({isTileset:"json"===this.type},this._getLoaderSpecificOptions(a.id)),i)),t.next=20,Object(l.a)(n,a,o);case 20:return this.content=t.sent,this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this,d.a.dirname(this.contentUrl)),this.contentState=p.d.READY,this._onContentLoaded(),t.abrupt("return",!0);case 27:throw t.prev=27,t.t0=t.catch(13),this.contentState=p.d.FAILED,t.t0;case 31:return t.prev=31,e.done(),t.finish(31);case 34:case"end":return t.stop()}}),t,this,[[13,27,31,34]])})));return function(){return t.apply(this,arguments)}}(),e.unloadContent=function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=p.d.UNLOADED,!0},e.updateVisibility=function(t,e){if(this._frameNumber!==t.frameNumber){var i=this.parent,n=i?i.computedTransform:this.tileset.modelMatrix,r=i?i._visibilityPlaneMask:h.b.MASK_INDETERMINATE;this._updateTransform(n),this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,r),this._visible=this._visibilityPlaneMask!==h.b.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._priority=this.lodMetricValue,this._frameNumber=t.frameNumber,this.viewportIds=e}},e.visibility=function(t,e){var i=t.cullingVolume,n=this.boundingVolume;return i.computeVisibilityWithPlaneMask(n,e)},e.contentVisibility=function(t){return!0},e.distanceToTile=function(t){var e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))},e.cameraSpaceZDepth=function(t){var e=t.camera,i=this.boundingVolume;return P.subVectors(i.center,e.position),e.direction.dot(P)},e.insideViewerRequestVolume=function(t){var e=this._viewerRequestVolume;return!e||0===e.distanceToCamera(t.camera.position)},e._initializeLodMetric=function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))},e._initializeTransforms=function(t){this.transform=t.transform?new c.a(t.transform):new c.a;var e=this.parent,i=this.tileset,n=e&&e.computedTransform?e.computedTransform.clone():i.modelMatrix.clone();this.computedTransform=new c.a(n).multiplyRight(this.transform);var r=e&&e._initialTransform?e._initialTransform.clone():new c.a;this._initialTransform=new c.a(r).multiplyRight(this.transform)},e._initializeBoundingVolumes=function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)},e._initializeContent=function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=p.d.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)},e._initializeRenderingState=function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=h.b.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0},e._getRefine=function(t){return t||this.parent&&this.parent.refine||p.e.REPLACE},e._isTileset=function(){return-1!==this.contentUrl.indexOf(".json")},e._onContentLoaded=function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset.traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)},e._updateBoundingVolume=function(t){this.boundingVolume=T(t.boundingVolume,this.computedTransform,this.boundingVolume);var e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=T(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=T(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))},e._updateTransform=function(t){void 0===t&&(t=new c.a);var e=t.clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))},e._getLoaderSpecificOptions=function(t){switch(t){case"i3s":return M(M({},this.tileset.options.i3s),{},{tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"}}var e},e.updateExpiration=function(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=p.d.EXPIRED,this._expiredContent=this.content)}},Object(o.a)(t,[{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===p.d.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===p.d.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===p.d.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===p.d.FAILED}},{key:"extras",get:function(){return this.header.extras}}]),t}()}}]);