(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{KnHi:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return it})),r.d(t,"renderToDOM",(function(){return ct}));var n,a=r("dI71"),s=r("q1tI"),o=r.n(s),i=r("i8i4"),c=r("iein"),u=r("OklE"),l=[{formatName:"Browser Native Formats (Uncompressed)",description:"Non-texture image formats. Compact on disk, but need to be fully decompressed into GPU texture memory, and mipmaps need to be generated by client.",codeSample:"load(url, ImageLoader)",images:[{format:"JPG",src:"shannon.jpg"},{format:"GIF",src:"shannon.gif"},{format:"PNG",src:"shannon.png"},{format:"BMP",src:"shannon.bmp"},{format:"WEBP",src:"shannon.webp"}]},{formatName:"S3 Texture Compression (WEBGL_compressed_texture_s3tc)",description:"S3 (aka DXTn, DXTC, or BCn).",availability:"Common on desktop GPUs. DXT5 is usually the preferred version",link:"https://en.wikipedia.org/wiki/S3_Texture_Compression",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"DXT5",src:"shannon-dxt5.dds"},{format:"DXT3",src:"shannon-dxt3.dds"},{format:"DXT1",src:"shannon-dxt1.dds"}]},{formatName:"PowerVR Texture Compression (WEBGL_compressed_texture_pvrtc)",description:"Lossy, fixed-rate GPU texture compression format",availability:"Mobile devices with PowerVR chipsets, including iPhone, iPod Touch and iPad and certain Android devices.",link:"https://en.wikipedia.org/wiki/PVRTC",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"PVRTC (2BPP RGB)",src:"shannon-pvrtc-2bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-2bpp-rgba.pvr"},{format:"PVRTC (4BPP RGB)",src:"shannon-pvrtc-4bpp-rgb.pvr"},{format:"PVRTC (2BPP RGBA)",src:"shannon-pvrtc-4bpp-rgba.pvr"}]},{formatName:"ATC (WEBGL_compressed_texture_atc)",codeSample:"load(url, CompressedTextureLoader)",images:[{format:"ATC (RGB)",src:"shannon-atc-rgb.dds"},{format:"ATC (RGBA, Explicit)",src:"shannon-atc-rgba-explicit.dds"},{format:"ATC (RGBA, Interpolated)",src:"shannon-atc-rgba-interpolated.dds"}]},{formatName:"ASTN (WEBGL_compressed_texture_astn)",images:[]},{formatName:"ETC1 (WEBGL_compressed_texture_etc1)",images:[{format:"ETC1",src:"shannon-etc1.pvr"}]},{formatName:"Crunch",description:"Advanced DXTn texture compression library.",link:"https://github.com/BinomialLLC/crunch",codeSample:"load(url, CrunchLoader)",images:[{format:"DXT1 (Crunch)",src:"shannon-dxt1.crn"},{format:"DXT5 (Crunch)",src:"shannon-dxt5.crn"}]},{formatName:"Basis Universal",description:"Supercompressed GPU Texture Codec",link:"https://github.com/BinomialLLC/basis_universal",codeSample:"load(url, BasisLoader)",images:[{format:"BASIS",src:"alpha3.basis"},{format:"BASIS",src:"kodim01.basis"},{format:"BASIS",src:"kodim18.basis"},{format:"BASIS",src:"kodim20_1024x1024.basis"},{format:"BASIS",src:"kodim20.basis"}]}],p=r("KQm4"),f=r("rePB"),m=r("o0o1"),d=r.n(m),h=(r("wcNg"),r("HaE+")),_=r("vOnD"),E=r("kD43"),b=r("VLYs");function x(e){return T.apply(this,arguments)}function T(){return(T=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.modules||{}).basis){e.next=3;break}return e.abrupt("return",r.basis);case 3:return n=n||g(t),e.next=6,n;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=Object(h.a)(d.a.mark((function e(t){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,n=null,e.t0=Promise,e.next=5,Object(E.a)("basis_transcoder.js","basis",t);case 5:return e.t1=e.sent,e.next=8,Object(E.a)("basis_transcoder.wasm","basis",t);case 8:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.next=12,e.t0.all.call(e.t0,e.t3);case 12:return a=e.sent,r=a[0],n=a[1],r=r||b.a.BASIS,e.next=18,y(r,n);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){var r={};return t&&(r.wasmBinary=t),new Promise((function(t){e(r).then((function(e){var r=e.BasisFile;(0,e.initializeBasis)(),t({BasisFile:r})}))}))}var w=33776,U=33778,R=33779,A=37488,D=37490,O=37492,P=37493,I=37496,S=35840,C=35842,F=35841,L=35843,B=36196,M=37808,N=37809,j=37810,G=37811,k=37812,X=37813,H=37814,V=37815,z=37816,W=37817,Z=37818,K=37819,Y=37820,J=37821,q={etc1:{basisFormat:0,compressed:!0},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:w},bc3:{basisFormat:3,compressed:!0,format:R},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0},"astc-4x4":{basisFormat:10,compressed:!0},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Q(){return(Q=Object(h.a)(d.a.mark((function e(t,r){var n,a,s,o,i,c,u,l,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(r);case 2:if(n=e.sent,a=n.BasisFile,s=new a(new Uint8Array(t)),e.prev=5,s.startTranscoding()){e.next=8;break}return e.abrupt("return",null);case 8:for(o=s.getNumImages(),i=[],c=0;c<o;c++){for(u=s.getNumLevels(c),l=[],p=0;p<u;p++)l.push($(s,c,p,r));i.push(l)}return e.abrupt("return",i);case 12:return e.prev=12,s.close(),s.delete(),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[5,,12,16]])})))).apply(this,arguments)}function $(e,t,r,n){var a=e.getImageWidth(t,r),s=e.getImageHeight(t,r),o=e.getHasAlpha(),i=function(e,t){var r=e&&e.basis&&e.basis.format;return"object"==typeof r&&(r=t?r.alpha:r.noAlpha),r=r.toLowerCase(),q[r]}(n,o),c=i.compressed,u=i.format,l=i.basisFormat,p=e.getImageTranscodedSizeInBytes(t,r,l),f=new Uint8Array(p);return e.transcodeImage(f,t,r,l,0,0)?{width:a,height:s,data:f,compressed:c,hasAlpha:o,format:u}:null}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var re="undefined"!=typeof __VERSION__?__VERSION__:"latest",ne=te(te({},{id:"basis",name:"Basis",version:re,extensions:["basis"],mimeTypes:["application/octet-stream"],tests:["sB"],binary:!0,options:{basis:{format:"rgb565",libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/textures@"+re+"/dist/basis-loader.worker.js"}}}),{},{parse:function(e,t){return Q.apply(this,arguments)}}),ae=r("pkf7"),se=[171,75,84,88,32,50,48,187,13,10,26,10];var oe=r("P+ME");function ie(e,t){for(var r=new Array(t.mipMapLevels),n=t.width,a=t.height,s=0,o=0;o<t.mipMapLevels;++o){var i=t.sizeFunction(n,a);r[o]={compressed:!0,format:t.internalFormat,data:new Uint8Array(e.buffer,e.byteOffset+s,i),width:n,height:a,levelSize:i},n=Math.max(1,n>>1),a=Math.max(1,a>>1),s+=i}return r}var ce={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4,PIXEL_FORMATS:{DXT1:w,DXT3:U,DXT5:R},SIZE_FUNCTIONS:{DXT1:le,DXT3:pe,DXT5:pe}};function ue(e){var t=new Int32Array(e,0,ce.HEADER_LENGTH),r=t[ce.HEADER_PF_FOURCC_INDEX];Object(oe.a)(Boolean(t[ce.HEADER_PF_FLAGS_INDEX]&ce.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");var n,a=(n=r,String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)),s=ce.PIXEL_FORMATS[a],o=ce.SIZE_FUNCTIONS[a];Object(oe.a)(s&&o,"DDS: Unknown pixel format "+r);var i=1;t[ce.HEADER_FLAGS_INDEX]&ce.DDSD_MIPMAPCOUNT&&(i=Math.max(1,t[ce.MIPMAPCOUNT_INDEX]));var c=t[ce.HEADER_HEIGHT_INDEX],u=t[ce.HEADER_HEIGHT_INDEX],l=t[ce.HEADER_SIZE_INDEX]+4;return ie(new Uint8Array(e,l),{mipMapLevels:i,width:c,height:u,sizeFunction:o,internalFormat:s})}function le(e,t){return(e+3>>2)*(t+3>>2)*8}function pe(e,t){return(e+3>>2)*(t+3>>2)*16}var fe=55727696,me=1347834371,de=13,he=52,_e=0,Ee=2,be=6,xe=7,Te=11,ge=12,ve={0:F,1:L,2:S,3:C,6:B,7:w,9:U,11:R,22:O,23:P,24:I,25:A,26:D,27:M,28:N,29:j,30:G,31:k,32:X,33:H,34:V,35:z,36:W,37:Z,38:K,39:Y,40:J},ye={0:we,1:we,2:Ue,3:Ue,6:Re,7:Re,9:Ae,11:Ae,22:Re,23:Ae,24:Re,25:Re,26:Ae,27:Ae,28:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16},29:function(e,t){return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16},30:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16},31:function(e,t){return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16},32:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16},33:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16},34:function(e,t){return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16},35:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16},36:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16},37:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16},38:function(e,t){return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16},39:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16},40:function(e,t){return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16}};function we(e,t){return(e=Math.max(e,16))*(t=Math.max(t,8))/4}function Ue(e,t){return(e=Math.max(e,8))*(t=Math.max(t,8))/2}function Re(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8}function Ae(e,t){return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16}function De(e){if(function(e){var t=new Uint8Array(e.buffer||e,e.byteOffset||0,se.length);return!(t[0]!==se[0]||t[1]!==se[1]||t[2]!==se[2]||t[3]!==se[3]||t[4]!==se[4]||t[5]!==se[5]||t[6]!==se[6]||t[7]!==se[7]||t[8]!==se[8]||t[9]!==se[9]||t[10]!==se[10]||t[11]!==se[11])}(e))return t=new Uint8Array(e),Object(ae.a)(t);var t;if(function(e){return new Uint32Array(e,0,ce.HEADER_LENGTH)[ce.MAGIC_NUMBER_INDEX]===ce.MAGIC_NUMBER}(e))return ue(e);if(function(e){var t=new Uint32Array(e,0,de)[_e];return t===fe||t===me}(e))return function(e){var t=new Uint32Array(e,0,de),r=t[Ee],n=ve[r],a=ye[r],s=t[Te],o=t[xe],i=t[be],c=he+t[ge];return ie(new Uint8Array(e,c),{mipMapLevels:s,width:o,height:i,sizeFunction:a,internalFormat:n})}(e);throw new Error("Texture container format not recognized")}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie,Se,Ce=Pe(Pe({},{id:"compressed-texture",name:"CompressedTexture",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["application/octet-stream"],binary:!0,options:{basis:{libraryPath:"libs/"}}}),{},{parse:(Ie=Object(h.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",De(t));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return Ie.apply(this,arguments)})});function Fe(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(h.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.modules||{}).crunch){e.next=3;break}return e.abrupt("return",r.crunch);case 3:return e.abrupt("return",Be(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(h.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Se){e.next=2;break}return e.abrupt("return",Se);case 2:return r=null,e.t0=Promise,e.next=6,Object(E.a)("crunch.js","basis",t);case 6:return e.t1=e.sent,e.t2=[e.t1],e.next=10,e.t0.all.call(e.t0,e.t2);case 10:return n=e.sent,r=(r=n[0])||b.a.LoadCrunchDecoder,Se=r(),e.abrupt("return",Se);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=1,je=2,Ge={};Ge[0]={pixelFormat:w,sizeFunction:le},Ge[Ne]={pixelFormat:U,sizeFunction:pe},Ge[je]={pixelFormat:R,sizeFunction:pe};var ke=0,Xe=null;function He(){return(He=Object(h.a)(d.a.mark((function e(t,r){var n,a,s,o,i,c,u,l,p,f,m,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),e.next=3,Fe(r);case 3:for(n=e.sent,a=t.byteLength,s=new Uint8Array(t),o=n._malloc(a),Ve(s,n.HEAPU8,o,a),i=n._crn_get_dxt_format(o,a),Object(oe.a)(Boolean(Ge[i]),"Unsupported format"),c=n._crn_get_levels(o,a),u=n._crn_get_width(o,a),l=n._crn_get_height(o,a),p=Ge[i].sizeFunction,f=0,m=0;m<c;++m)f+=p(u>>m,l>>m);return ke<f&&(Xe&&n._free(Xe),Xe=n._malloc(f),ke=f),n._crn_decompress(o,a,Xe,f,0,c),n._free(o),h=new Uint8Array(n.HEAPU8.buffer,Xe,f).slice(),e.abrupt("return",ie(h,{mipMapLevels:c,width:u,height:l,sizeFunction:p,internalFormat:Ge[i].pixelFormat}));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e,t,r,n){var a,s=r/4,o=n%4,i=new Uint32Array(e.buffer,0,(n-o)/4),c=new Uint32Array(t.buffer);for(a=0;a<i.length;a++)c[s+a]=i[a];for(a=n-o;a<n;a++)t[r+a]=e[a]}function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze=We(We({},{id:"crunch",name:"Crunch",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",extensions:["crn"],mimeTypes:["application/octet-stream"],binary:!0,options:{basis:{libraryPath:"libs/"}}}),{},{parse:function(e,t){return He.apply(this,arguments)}}),Ke=r("gQyj"),Ye=r("tXnp"),Je=r("xlp0"),qe=r("Ivtj"),Qe=r("24Wh"),$e=r("f5Sf");function et(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?et(Object(r),!0).forEach((function(t){Object(f.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):et(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var rt=_.c.button.withConfig({displayName:"compressed-texture__TextureButton",componentId:"sc-1g38zwr-0"})(["height:256px;width:256px;border:1px solid black;margin:1em;position:relative;"]),nt=_.c.h1.withConfig({displayName:"compressed-texture__ImageFormatHeader",componentId:"sc-1g38zwr-1"})(["position:absolute;top:0;left:0;margin:0;color:white;font-size:16px;"]),at=_.c.h1.withConfig({displayName:"compressed-texture__ErrorFormatHeader",componentId:"sc-1g38zwr-2"})(["color:red;font-size:16px;"]),st=_.c.ul.withConfig({displayName:"compressed-texture__TextureInfo",componentId:"sc-1g38zwr-3"})(["position:absolute;transition:opacity 0.2s;top:20px;display:flex;flex-flow:column nowrap;align-items:flex-start;padding:10px;opacity:0.8;background-color:black;color:white;border-radius:5px;min-width:200px;list-style:none;font-size:14px;"]);Object(Ye.b)([ne,Ce,Ke.a]);var ot=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={supportedFormats:r.getSupportedFormats(t.gl),loadOptions:{basis:{},worker:!1},textureError:null,showStats:!1,stats:[]},r}Object(a.a)(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setupBasisLoadOptionsIfNeeded();case 2:return e.next=4,this.getTextureDataUrl();case 4:t=e.sent,this.setState({dataUrl:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.getSupportedFormats=function(){var e=this.props.gl;return{DXT:Boolean(e.getExtension("WEBGL_compressed_texture_s3tc")),PVRTC:Boolean(e.getExtension("WEBGL_compressed_texture_pvrtc")),ATC:Boolean(e.getExtension("WEBGL_compressed_texture_atc")),ETC1:Boolean(e.getExtension("WEBGL_compressed_texture_etc1"))}},r.setupBasisLoadOptionsIfNeeded=function(){if(this.state.supportedFormats.DXT){var e=tt(tt({},this.state.loadOptions),{},{basis:{format:{alpha:"BC3",noAlpha:"BC1"}}});this.setState({loadOptions:e})}},r.getTextureDataUrl=function(){var e=Object(h.a)(d.a.mark((function e(){var t,r,n,a,s,o,i,c,u,l,p,f,m,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.loadOptions,r=this.props,n=r.canvas,a=r.gl,s=r.program,o=r.image,i=o.src,e.prev=3,c="https://raw.githubusercontent.com/visgl/loaders.gl/master/modules/textures/test/data/"+i,e.next=7,Object(Je.a)(c,[Ce,Ze,ne,Ke.a]);case 7:return u=e.sent,e.next=10,Object(qe.a)(c);case 10:return l=e.sent,e.next=13,l.arrayBuffer();case 13:if(p=e.sent,f=p.byteLength,e.t0=u,!e.t0){e.next=20;break}return e.next=19,Object(Qe.a)(p,u,t);case 19:e.t0=e.sent;case 20:m=e.t0,this.addStat("File Size",Math.floor(f/1024),"Kb"),e.t1=u&&u.name,e.next="Crunch"===e.t1||"CompressedTexture"===e.t1?25:"Images"===e.t1?28:"Basis"===e.t1?31:35;break;case 25:return this.renderEmptyTexture(a,s),this.renderCompressedTexture(a,s,m,u.name,i),e.abrupt("break",36);case 28:return this.renderEmptyTexture(a,s),this.renderImageTexture(a,s,m),e.abrupt("break",36);case 31:return h=m[0],this.renderEmptyTexture(a,s),this.renderCompressedTexture(a,s,h,u.name,i),e.abrupt("break",36);case 35:throw new Error("Unknown texture loader");case 36:e.next=43;break;case 38:e.prev=38,e.t2=e.catch(3),console.error(e.t2),this.renderEmptyTexture(a,s),this.setState({textureError:e.t2.message});case 43:return e.abrupt("return",n.toDataURL());case 44:case"end":return e.stop()}}),e,this,[[3,38]])})));return function(){return e.apply(this,arguments)}}(),r.createCompressedTexture2D=function(e,t){var r;return new $e.a(e,{data:t,compressed:!0,parameters:(r={},r[e.TEXTURE_MAG_FILTER]=e.LINEAR,r[e.TEXTURE_MIN_FILTER]=t.length>1?e.LINEAR_MIPMAP_NEAREST:e.LINEAR,r[e.TEXTURE_WRAP_S]=e.CLAMP_TO_EDGE,r[e.TEXTURE_WRAP_T]=e.CLAMP_TO_EDGE,r)}).handle},r.createCompressedTexture=function(e,t){var r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);for(var n=0;n<t.length;++n){var a=t[n],s=a.width,o=a.height,i=a.format,c=a.data;e.compressedTexImage2D(e.TEXTURE_2D,n,i,s,o,0,c)}return t.length>1?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)),r},r.renderEmptyTexture=function(e,t){var r,n=new Uint8Array([68,0,0,255]),a=new $e.a(e,{width:1,height:1,data:n,mipmaps:!0,parameters:(r={},r[e.TEXTURE_MAG_FILTER]=e.LINEAR,r[e.TEXTURE_MIN_FILTER]=e.LINEAR,r[e.TEXTURE_WRAP_S]=e.CLAMP_TO_EDGE,r[e.TEXTURE_WRAP_T]=e.CLAMP_TO_EDGE,r)}).handle;e.useProgram(t),e.bindTexture(e.TEXTURE_2D,a),e.drawArrays(e.TRIANGLE_STRIP,0,4)},r.renderImageTexture=function(e,t,r){e.useProgram(t);var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);var a=new Date;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLE_STRIP,0,4);var s=Date.now()-a;this.addStat("Upload time",Math.floor(s)+" ms"),this.addStat("Dimensions",r.width+" x "+r.height),this.addStat("Size in memory (Lvl 0)",Math.floor(r.width*r.height*4/1024),"Kb")},r.renderCompressedTexture=function(e,t,r,n,a){if(!r||!r.length)throw new Error(n+" loader doesn't support texture "+a+" format");var s=r[0],o=s.format,i=s.width,c=s.height,u=s.levelSize;if(!this.isFormatSupported(o))throw new Error("Texture format "+o+" not supported by this GPU");var l=new Date,p=this.createCompressedTexture(e,r);e.bindTexture(e.TEXTURE_2D,p),e.useProgram(t),e.drawArrays(e.TRIANGLE_STRIP,0,4);var f=Date.now()-l;this.addStat("Upload time",Math.floor(f)+" ms"),this.addStat("Dimensions",i+" x "+c),u&&this.addStat("Size in memory (Lvl 0)",Math.floor(u/1024),"Kb")},r.isFormatSupported=function(e){if("number"!=typeof e)throw new Error("Invalid internal format of compressed texture");var t=this.state.supportedFormats,r=t.DXT,n=t.PVRTC,a=t.ATC,s=t.ETC1;switch(e){case 33776:case 33778:case 33779:case 33777:return r;case 35840:case 35842:case 35841:case 35843:return n;case 35986:case 35987:case 34798:return a;case 36196:return s;default:return!1}},r.addStat=function(e,t,r){void 0===r&&(r="");var n=[].concat(Object(p.a)(this.state.stats),[{name:e,value:t,units:r}]);this.setState({stats:n})},r.renderStats=function(){var e=this.state.stats;if(!e.length)return null;for(var t=[],r=0;r<e.length;r++)t.push(o.a.createElement("li",{key:r},e[r].name+": "+e[r].value+e[r].units));return o.a.createElement(st,{style:{opacity:this.state.showStats?.8:0}},t)},r.render=function(){var e=this,t=this.state,r=t.dataUrl,n=t.textureError,a=this.props.image.format;return r?o.a.createElement(rt,{style:{backgroundImage:"url("+r+")"},onMouseEnter:function(){return e.setState({showStats:!0})},onMouseLeave:function(){return e.setState({showStats:!1})}},n?o.a.createElement(at,{style:{color:"red"}},n):o.a.createElement(nt,null,a),this.renderStats()):null},t}(s.PureComponent);ot.defaultProps={canvas:null,image:null,gl:null,program:null};var it=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={canvas:null,gl:null,program:null},r}Object(a.a)(t,e);var r=t.prototype;return r.componentDidMount=function(){var e=this.setupCanvas(),t=e.getContext("webgl");Object(c.d)(t),this.createAndFillBufferObject(t);var r=new u.a(t,{vs:"\nprecision highp float;\n\nattribute vec2 position;\nvarying vec2 uv;\n\nvoid main() {\n  gl_Position = vec4(position, 0.0, 1.0);\n  uv = vec2(position.x * .5, -position.y * .5) + vec2(.5, .5);\n}\n",fs:"\nprecision highp float;\n\nuniform sampler2D tex;\nvarying vec2 uv;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(tex, uv).rgb, 1.);\n}\n"});this.setState({canvas:e,gl:t,program:r.handle})},r.setupCanvas=function(){var e=document.createElement("canvas");return e.width=256,e.height=256,e},r.createAndFillBufferObject=function(e){var t=new Float32Array([-1,-1,-1,1,1,-1,1,1]),r=e.createBuffer();r||console.error("Failed to create the buffer object"),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(0),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0)},r.renderTexturesBlocks=function(){var e=this,t=this.state,r=t.canvas,n=t.gl,a=t.program;return l.map((function(t,s){return o.a.createElement("div",{key:s},e.renderTexturesHeader(t),e.renderTextures(n,r,a,t.images),e.renderTexturesDescription(t))}))},r.renderTexturesHeader=function(e){var t=e.formatName,r=e.link;return o.a.createElement("div",{style:{display:"flex",flexFlow:"column"}},o.a.createElement("h2",{style:{borderBottom:"1px solid black",marginBottom:0}},r?o.a.createElement("a",{style:{textDecoration:"none"},href:r},t):t))},r.renderTexturesDescription=function(e){var t=e.description,r=e.codeSample,n=e.availability;return o.a.createElement("div",null,t&&o.a.createElement("p",null,o.a.createElement("b",null,"Description: "),t),n&&o.a.createElement("p",null,o.a.createElement("b",null,"Availability: "),n),r&&o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("code",null,r))))},r.renderTextures=function(e,t,r,n){return n.map((function(n,a){return o.a.createElement(ot,{key:a,image:n,canvas:t,gl:e,program:r})}))},r.renderDescription=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Texture Loaders"),o.a.createElement("p",null,"This page loads every  ",o.a.createElement("a",{href:"https://loaders.gl/modules/textures/docs/using-compressed-textures"},"texture format")," ","  supported by loaders.gl and attempts to display them in WebGL using the"," ",o.a.createElement("a",{href:"https://luma.gl"},o.a.createElement("b",null,"luma.gl"))," ",o.a.createElement("code",null,"Texture2D")," class."),o.a.createElement("p",null,"The ",o.a.createElement("code",null,"@loaders.gl/textures"),"   module provides loaders for compressed textures stored in ",o.a.createElement("b",null,"KTX"),", ",o.a.createElement("b",null,"DDS")," and ",o.a.createElement("b",null,"PVR")," container files, plus ",o.a.createElement("b",null,"CRN")," ","(Crunch), and ",o.a.createElement("b",null,"Basis")," supercompressed textures."),o.a.createElement("p",null,"This page also shows which compressed texture types your device and browser supports."),o.a.createElement("p",null,o.a.createElement("i",null,"Note that multiple textures on this page will fail to display due to lack of GPU support (reported via WebGL extensions). For example: DXT formats are usually only supported on Desktops while PVRTC is typically only available on mobile devices with PowerVR chipsets.")),o.a.createElement("p",null,o.a.createElement("i",null,"Inspired by toji's awesome"," ",o.a.createElement("a",{href:"http://toji.github.io/texture-tester"},"texture-tester"))))},r.render=function(){return o.a.createElement("div",{style:{margin:30}},this.renderDescription(),this.state.gl&&this.renderTexturesBlocks())},t}(s.PureComponent);function ct(e){Object(i.render)(o.a.createElement(it,null),e)}},pkf7:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return E}));var n=r("vuIU"),a=r("1OyB");new Uint8Array([0]);var s,o,i,c,u,l,p,f,m=[171,75,84,88,32,50,48,187,13,10,26,10];!function(e){e[e.NONE=0]="NONE",e[e.BASISLZ=1]="BASISLZ",e[e.ZSTD=2]="ZSTD",e[e.ZLIB=3]="ZLIB"}(s||(s={})),function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(o||(o={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(i||(i={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(c||(c={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(u||(u={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(l||(l={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(p||(p={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(f||(f={}));var d=function e(){Object(a.a)(this,e),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=s.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:o.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:i.UNSPECIFIED,colorPrimaries:c.SRGB,transferFunction:c.SRGB,flags:l.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null},h=function(){function e(t,r,n,s){Object(a.a)(this,e),this._dataView=new DataView(t.buffer,t.byteOffset+r,n),this._littleEndian=s,this._offset=0}return Object(n.a)(e,[{key:"_nextUint8",value:function(){var e=this._dataView.getUint8(this._offset);return this._offset+=1,e}},{key:"_nextUint16",value:function(){var e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}},{key:"_nextUint32",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}},{key:"_nextUint64",value:function(){var e=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}},{key:"_skip",value:function(e){return this._offset+=e,this}},{key:"_scan",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this._offset,n=0;this._dataView.getUint8(this._offset)!==t&&n<e;)n++,this._offset++;return n<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}]),e}();function _(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):e.from(t).toString("utf8")}function E(e){var t=new Uint8Array(e.buffer,e.byteOffset,m.length);if(t[0]!==m[0]||t[1]!==m[1]||t[2]!==m[2]||t[3]!==m[3]||t[4]!==m[4]||t[5]!==m[5]||t[6]!==m[6]||t[7]!==m[7]||t[8]!==m[8]||t[9]!==m[9]||t[10]!==m[10]||t[11]!==m[11])throw new Error("Missing KTX 2.0 identifier.");var r=new d,n=17*Uint32Array.BYTES_PER_ELEMENT,a=new h(e,m.length,n,!0);r.vkFormat=a._nextUint32(),r.typeSize=a._nextUint32(),r.pixelWidth=a._nextUint32(),r.pixelHeight=a._nextUint32(),r.pixelDepth=a._nextUint32(),r.layerCount=a._nextUint32(),r.faceCount=a._nextUint32();var s=a._nextUint32();r.supercompressionScheme=a._nextUint32();for(var o=a._nextUint32(),i=a._nextUint32(),c=a._nextUint32(),u=a._nextUint32(),l=a._nextUint64(),p=a._nextUint64(),f=new h(e,m.length+n,3*s*8,!0),E=0;E<s;E++)r.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+f._nextUint64(),f._nextUint64()),uncompressedByteLength:f._nextUint64()});for(var b=new h(e,o,i,!0),x={vendorId:b._skip(4)._nextUint16(),descriptorType:b._nextUint16(),versionNumber:b._nextUint16(),descriptorBlockSize:b._nextUint16(),colorModel:b._nextUint8(),colorPrimaries:b._nextUint8(),transferFunction:b._nextUint8(),flags:b._nextUint8(),texelBlockDimension:{x:b._nextUint8()+1,y:b._nextUint8()+1,z:b._nextUint8()+1,w:b._nextUint8()+1},bytesPlane:[b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8()],samples:[]},T=(x.descriptorBlockSize/4-6)/4,g=0;g<T;g++)x.samples[g]={bitOffset:b._nextUint16(),bitLength:b._nextUint8(),channelID:b._nextUint8(),samplePosition:[b._nextUint8(),b._nextUint8(),b._nextUint8(),b._nextUint8()],sampleLower:b._nextUint32(),sampleUpper:b._nextUint32()};r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(x);for(var v=new h(e,c,u,!0);v._offset<u;){var y=v._nextUint32(),w=v._scan(y),U=_(w),R=v._scan(y-w.byteLength);r.keyValue[U]=U.match(/^ktx/i)?_(R):R,y%4&&v._skip(4-y%4)}if(p<=0)return r;for(var A=new h(e,l,p,!0),D=A._nextUint16(),O=A._nextUint16(),P=A._nextUint32(),I=A._nextUint32(),S=A._nextUint32(),C=A._nextUint32(),F=[],L=0;L<s;L++)F.push({imageFlags:A._nextUint32(),rgbSliceByteOffset:A._nextUint32(),rgbSliceByteLength:A._nextUint32(),alphaSliceByteOffset:A._nextUint32(),alphaSliceByteLength:A._nextUint32()});var B=l+A._offset,M=B+P,N=M+I,j=N+S,G=new Uint8Array(e.buffer,e.byteOffset+B,P),k=new Uint8Array(e.buffer,e.byteOffset+M,I),X=new Uint8Array(e.buffer,e.byteOffset+N,S),H=new Uint8Array(e.buffer,e.byteOffset+j,C);return r.globalData={endpointCount:D,selectorCount:O,imageDescs:F,endpointsData:G,selectorsData:k,tablesData:X,extendedData:H},r}}).call(this,r("HDXh").Buffer)}}]);