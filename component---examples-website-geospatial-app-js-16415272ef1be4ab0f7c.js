(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+7vx":function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var i=n("rePB"),r=n("1OyB"),a=n("vuIU"),s=n("ReuC"),o=n("Ji7U"),u=n("md7G"),l=n("foSv"),h=n("K4gp"),c=n("BQ9P"),f=n("K7jV"),d=n("ykdB"),p=n("0i8A");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(l.a)(t);if(e){var r=Object(l.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(u.a)(this,n)}}var g=[0,0,0,255],m={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,getPosition:{type:"accessor",value:function(t){return t.position}},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:g},getLineColor:{type:"accessor",value:g},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}},_=function(t){Object(o.a)(n,t);var e=b(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getShaders",value:function(){return Object(s.a)(Object(l.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceRadius;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radiusScale;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float lineWidthScale;\nuniform float lineWidthMinPixels;\nuniform float lineWidthMaxPixels;\nuniform float stroked;\nuniform bool filled;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  outerRadiusPixels = clamp(\n    project_size_to_pixel(radiusScale * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  float lineWidthPixels = clamp(\n    project_size_to_pixel(lineWidthScale * instanceLineWidths),\n    lineWidthMinPixels, lineWidthMaxPixels\n  );\n  outerRadiusPixels += stroked * lineWidthPixels / 2.0;\n  unitPosition = positions.xy;\n  geometry.uv = unitPosition;\n  geometry.pickingColor = instancePickingColors;\n\n  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;\n  \n  vec3 offset = positions * project_pixel_size(outerRadiusPixels);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME scatterplot-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool filled;\nuniform float stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying vec2 unitPosition;\nvarying float innerUnitRadius;\nvarying float outerRadiusPixels;\n\nvoid main(void) {\n  geometry.uv = unitPosition;\n\n  float distToCenter = length(unitPosition) * outerRadiusPixels;\n  float inCircle = smoothedge(distToCenter, outerRadiusPixels);\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  if (stroked > 0.5) {\n    float isLine = smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter);\n    if (filled) {\n      gl_FragColor = mix(vFillColor, vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n    }\n  } else if (filled) {\n    gl_FragColor = vFillColor;\n  } else {\n    discard;\n  }\n\n  gl_FragColor.a *= inCircle;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[h.a,c.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,i=t.oldProps,r=t.changeFlags;if(Object(s.a)(Object(l.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:i,changeFlags:r}),r.extensionsChanged){var a,o=this.context.gl;null===(a=this.state.model)||void 0===a||a.delete(),this.state.model=this._getModel(o),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,i=this.props,r=i.radiusUnits,a=i.radiusScale,s=i.radiusMinPixels,o=i.radiusMaxPixels,u=i.stroked,l=i.filled,h=i.lineWidthUnits,c=i.lineWidthScale,f=i.lineWidthMinPixels,d=i.lineWidthMaxPixels,p="pixels"===r?n.metersPerPixel:1,v="pixels"===h?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({stroked:u?1:0,filled:l,radiusScale:a*p,radiusMinPixels:s,radiusMaxPixels:o,lineWidthScale:c*v,lineWidthMinPixels:f,lineWidthMaxPixels:d}).draw()}},{key:"_getModel",value:function(t){return new d.a(t,y(y({},this.getShaders()),{},{id:this.props.id,geometry:new p.a({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}}}),isInstanced:!0}))}}]),n}(f.a);_.layerName="ScatterplotLayer",_.defaultProps=m},"/qmn":function(t,e,n){var i=n("2oRo");t.exports=i.Promise},"8GlL":function(t,e,n){"use strict";var i=n("HAuM"),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},AbCW:function(t,e,n){var i=n("sP1I");t.exports=function(t){return function(){return new i(t.apply(this,arguments))}}},BHs3:function(t,e,n){(function(t,e,i,r){var a=void 0,s=function(s){return a||(a=new Promise((function(a,o){var u,l=void 0!==s?s:{},h=l.onAbort;l.onAbort=function(t){o(new Error(t)),h&&h(t)},l.postRun=l.postRun||[],l.postRun.push((function(){a(l)})),t=void 0,u||(u=void 0!==l?l:{}),u.onRuntimeInitialized=function(){function t(t,e){this.Ra=t,this.db=e,this.Qa=1,this.lb=[]}function e(t,e){if(this.db=e,e=K(t)+1,this.eb=Ue(e),null===this.eb)throw Error("Unable to allocate memory for the SQL string");X(t,U,this.eb,e),this.jb=this.eb,this.$a=this.pb=null}function n(t){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),null!=t){var e=this.filename,n=e?mt("//"+e):"/";if(n=ne(n,4095&(void 0!==(e=me(!0,!0))?e:438)|32768,0),t){if("string"==typeof t){for(var r=Array(t.length),s=0,o=t.length;s<o;++s)r[s]=t.charCodeAt(s);t=r}he(n,146|e),be(r=de(n,"w"),t,0,t.length,0,void 0),pe(r),he(n,e)}}this.handleError(a(this.filename,i)),this.db=j(i,"i32"),rt(this.db),this.fb={},this.Xa={}}var i=Xe(4),r=u.cwrap,a=r("sqlite3_open","number",["string","number"]),s=r("sqlite3_close_v2","number",["number"]),o=r("sqlite3_exec","number",["number","string","number","number","number"]),l=r("sqlite3_changes","number",["number"]),h=r("sqlite3_prepare_v2","number",["number","string","number","number","number"]),c=r("sqlite3_sql","string",["number"]),f=r("sqlite3_normalized_sql","string",["number"]),d=r("sqlite3_prepare_v2","number",["number","number","number","number","number"]),p=r("sqlite3_bind_text","number",["number","number","number","number","number"]),v=r("sqlite3_bind_blob","number",["number","number","number","number","number"]),y=r("sqlite3_bind_double","number",["number","number","number"]),b=r("sqlite3_bind_int","number",["number","number","number"]),g=r("sqlite3_bind_parameter_index","number",["number","string"]),m=r("sqlite3_step","number",["number"]),_=r("sqlite3_errmsg","string",["number"]),x=r("sqlite3_column_count","number",["number"]),w=r("sqlite3_data_count","number",["number"]),M=r("sqlite3_column_double","number",["number","number"]),P=r("sqlite3_column_text","string",["number","number"]),k=r("sqlite3_column_blob","number",["number","number"]),E=r("sqlite3_column_bytes","number",["number","number"]),F=r("sqlite3_column_type","number",["number","number"]),z=r("sqlite3_column_name","string",["number","number"]),T=r("sqlite3_reset","number",["number"]),R=r("sqlite3_clear_bindings","number",["number"]),D=r("sqlite3_finalize","number",["number"]),B=r("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),G=r("sqlite3_value_type","number",["number"]),W=r("sqlite3_value_bytes","number",["number"]),V=r("sqlite3_value_text","string",["number"]),H=r("sqlite3_value_blob","number",["number"]),J=r("sqlite3_value_double","number",["number"]),Y=r("sqlite3_result_double","",["number","number"]),$=r("sqlite3_result_null","",["number"]),tt=r("sqlite3_result_text","",["number","string","number","number"]),et=r("sqlite3_result_blob","",["number","number","number","number"]),nt=r("sqlite3_result_int","",["number","number"]),it=r("sqlite3_result_error","",["number","string","number"]),rt=r("RegisterExtensionFunctions","number",["number"]);t.prototype.bind=function(t){if(!this.Ra)throw"Statement closed";return this.reset(),Array.isArray(t)?this.Bb(t):null==t||"object"!=typeof t||this.Cb(t)},t.prototype.step=function(){if(!this.Ra)throw"Statement closed";this.Qa=1;var t=m(this.Ra);switch(t){case 100:return!0;case 101:return!1;default:throw this.db.handleError(t)}},t.prototype.Ib=function(t){return null==t&&(t=this.Qa,this.Qa+=1),M(this.Ra,t)},t.prototype.Jb=function(t){return null==t&&(t=this.Qa,this.Qa+=1),P(this.Ra,t)},t.prototype.getBlob=function(t){null==t&&(t=this.Qa,this.Qa+=1);var e=E(this.Ra,t);t=k(this.Ra,t);for(var n=new Uint8Array(e),i=0;i<e;i+=1)n[i]=q[t+i];return n},t.prototype.get=function(t){null!=t&&this.bind(t)&&this.step(),t=[];for(var e=w(this.Ra),n=0;n<e;n+=1)switch(F(this.Ra,n)){case 1:case 2:t.push(this.Ib(n));break;case 3:t.push(this.Jb(n));break;case 4:t.push(this.getBlob(n));break;default:t.push(null)}return t},t.prototype.getColumnNames=function(){for(var t=[],e=x(this.Ra),n=0;n<e;n+=1)t.push(z(this.Ra,n));return t},t.prototype.getAsObject=function(t){t=this.get(t);for(var e=this.getColumnNames(),n={},i=0;i<e.length;i+=1)n[e[i]]=t[i];return n},t.prototype.getSQL=function(){return c(this.Ra)},t.prototype.getNormalizedSQL=function(){return f(this.Ra)},t.prototype.run=function(t){return null!=t&&this.bind(t),this.step(),this.reset()},t.prototype.Fb=function(t,e){null==e&&(e=this.Qa,this.Qa+=1);var n=N(t=Te(t));this.lb.push(n),this.db.handleError(p(this.Ra,e,n,t.length-1,0))},t.prototype.Ab=function(t,e){null==e&&(e=this.Qa,this.Qa+=1);var n=N(t);this.lb.push(n),this.db.handleError(v(this.Ra,e,n,t.length,0))},t.prototype.Eb=function(t,e){null==e&&(e=this.Qa,this.Qa+=1),this.db.handleError((t===(0|t)?b:y)(this.Ra,e,t))},t.prototype.Db=function(t){null==t&&(t=this.Qa,this.Qa+=1),v(this.Ra,t,0,0,0)},t.prototype.tb=function(t,e){switch(null==e&&(e=this.Qa,this.Qa+=1),typeof t){case"string":return void this.Fb(t,e);case"number":case"boolean":return void this.Eb(t+0,e);case"object":if(null===t)return void this.Db(e);if(null!=t.length)return void this.Ab(t,e)}throw"Wrong API use : tried to bind a value of an unknown type ("+t+")."},t.prototype.Cb=function(t){var e=this;return Object.keys(t).forEach((function(n){var i=g(e.Ra,n);0!==i&&e.tb(t[n],i)})),!0},t.prototype.Bb=function(t){for(var e=0;e<t.length;e+=1)this.tb(t[e],e+1);return!0},t.prototype.reset=function(){return 0===R(this.Ra)&&0===T(this.Ra)},t.prototype.freemem=function(){for(var t;void 0!==(t=this.lb.pop());)Be(t)},t.prototype.free=function(){var t=0===D(this.Ra);return delete this.db.fb[this.Ra],this.Ra=0,t},e.prototype.next=function(){if(null===this.eb)return{done:!0};if(null!==this.$a&&(this.$a.free(),this.$a=null),!this.db.db)throw this.nb(),Error("Database closed");var e=Ze(),n=Xe(4);I(i),I(n);try{this.db.handleError(d(this.db.db,this.jb,-1,i,n)),this.jb=j(n,"i32");var r=j(i,"i32");return 0===r?(this.nb(),{done:!0}):(this.$a=new t(r,this.db),this.db.fb[r]=this.$a,{value:this.$a,done:!1})}catch(a){throw this.pb=Q(this.jb),this.nb(),a}finally{Qe(e)}},e.prototype.nb=function(){Be(this.eb),this.eb=null},e.prototype.getRemainingSQL=function(){return null!==this.pb?this.pb:Q(this.jb)},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(e.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(t,e){if(!this.db)throw"Database closed";if(e){t=this.prepare(t,e);try{t.step()}finally{t.free()}}else this.handleError(o(this.db,t,0,0,i));return this},n.prototype.exec=function(e,n){if(!this.db)throw"Database closed";var r=Ze(),a=null;try{var s=K(e)+1,o=Xe(s);X(e,q,o,s);var u=o,l=Xe(4);for(e=[];0!==j(u,"i8");){I(i),I(l),this.handleError(d(this.db,u,-1,i,l));var h=j(i,"i32");if(u=j(l,"i32"),0!==h){for(s=null,a=new t(h,this),null!=n&&a.bind(n);a.step();)null===s&&(s={columns:a.getColumnNames(),values:[]},e.push(s)),s.values.push(a.get());a.free()}}return e}catch(c){throw a&&a.free(),c}finally{Qe(r)}},n.prototype.each=function(t,e,n,i){"function"==typeof e&&(i=n,n=e,e=void 0),t=this.prepare(t,e);try{for(;t.step();)n(t.getAsObject())}finally{t.free()}if("function"==typeof i)return i()},n.prototype.prepare=function(e,n){if(I(i),this.handleError(h(this.db,e,-1,i,0)),0===(e=j(i,"i32")))throw"Nothing to prepare";var r=new t(e,this);return null!=n&&r.bind(n),this.fb[e]=r},n.prototype.iterateStatements=function(t){return new e(t,this)},n.prototype.export=function(){Object.values(this.fb).forEach((function(t){t.free()})),Object.values(this.Xa).forEach(A),this.Xa={},this.handleError(s(this.db));var t=function(t){var e={encoding:"binary"};if((e=e||{}).flags=e.flags||"r",e.encoding=e.encoding||"binary","utf8"!==e.encoding&&"binary"!==e.encoding)throw Error('Invalid encoding type "'+e.encoding+'"');var n,i=de(t,e.flags);t=ue(t).size;var r=new Uint8Array(t);return ye(i,r,0,t,0),"utf8"===e.encoding?n=Z(r,0):"binary"===e.encoding&&(n=r),pe(i),n}(this.filename);return this.handleError(a(this.filename,i)),this.db=j(i,"i32"),t},n.prototype.close=function(){null!==this.db&&(Object.values(this.fb).forEach((function(t){t.free()})),Object.values(this.Xa).forEach(A),this.Xa={},this.handleError(s(this.db)),se("/"+this.filename),this.db=null)},n.prototype.handleError=function(t){if(0===t)return null;throw t=_(this.db),Error(t)},n.prototype.getRowsModified=function(){return l(this.db)},n.prototype.create_function=function(t,e){Object.prototype.hasOwnProperty.call(this.Xa,t)&&(C(this.Xa[t]),delete this.Xa[t]);var n=function(t){var e=L;if(!O){O=new WeakMap;for(var n=0;n<e.length;n++){var i=e.get(n);i&&O.set(i,n)}}if(O.has(t))t=O.get(t);else{if(S.length)n=S.pop();else{n=e.length;try{e.grow(1)}catch(s){if(!(s instanceof RangeError))throw s;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{e.set(n,t)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){var r={i:"i32",j:"i64",f:"f32",d:"f64"},a={parameters:[],results:[]};for(i=1;4>i;++i)a.parameters.push(r["viii"[i]]);i=new WebAssembly.Function(a,t)}else{for(a={i:127,j:126,f:125,d:124},(r=[1,0,1,96]).push(3),i=0;3>i;++i)r.push(a["iii"[i]]);r.push(0),r[1]=r.length-2,i=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),i=new WebAssembly.Module(i),i=new WebAssembly.Instance(i,{e:{f:t}}).exports.f}e.set(n,i)}O.set(t,n),t=n}return t}((function(t,n,i){for(var r,a=[],s=0;s<n;s+=1){var o=j(i+4*s,"i32"),u=G(o);if(1===u||2===u)o=J(o);else if(3===u)o=V(o);else if(4===u){o=W(u=o),u=H(u);for(var l=new Uint8Array(o),h=0;h<o;h+=1)l[h]=q[u+h];o=l}else o=null;a.push(o)}try{r=e.apply(null,a)}catch(c){return void it(t,c,-1)}switch(typeof r){case"boolean":nt(t,r?1:0);break;case"number":Y(t,r);break;case"string":tt(t,r,-1,-1);break;case"object":null===r?$(t):null!=r.length?(n=N(r),et(t,n,r.length,-1),Be(n)):it(t,"Wrong API use : tried to return a value of an unknown type ("+r+").",-1);break;default:$(t)}}));return this.Xa[t]=n,this.handleError(B(this.db,t,e.length,1,0,n,0,0,0)),this},u.Database=n};var c,f={};for(c in u)u.hasOwnProperty(c)&&(f[c]=u[c]);var d,p,v,y,b="./this.program";d="object"==typeof window,p="function"==typeof importScripts,v="object"==typeof e&&"object"==typeof e.versions&&"string"==typeof e.versions.node,y=!d&&!v&&!p;var g,m,_,x,w="";v?(w=p?n("33yf").dirname(w)+"/":i+"/",g=function(t,e){return _||(_=n("Po9p")),x||(x=n("33yf")),t=x.normalize(t),_.readFileSync(t,e?null:"utf8")},m=function(t){return(t=g(t,!0)).buffer||(t=new Uint8Array(t)),z(t.buffer),t},1<e.argv.length&&(b=e.argv[1].replace(/\\/g,"/")),e.argv.slice(2),t.exports=u,u.inspect=function(){return"[Emscripten Module object]"}):y?("undefined"!=typeof read&&(g=function(t){return read(t)}),m=function(t){return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(z("object"==typeof(t=read(t,"binary"))),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(d||p)&&(p?w=self.location.href:document.currentScript&&(w=document.currentScript.src),w=0!==w.indexOf("blob:")?w.substr(0,w.lastIndexOf("/")+1):"",g=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},p&&(m=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var M=u.print||console.log.bind(console),P=u.printErr||console.warn.bind(console);for(c in f)f.hasOwnProperty(c)&&(u[c]=f[c]);f=null,u.thisProgram&&(b=u.thisProgram);var O,k,S=[];function C(t){O.delete(L.get(t)),S.push(t)}function A(t){C(t)}function I(t){var e="i32";switch("*"===e.charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":q[t>>0]=0;break;case"i16":B[t>>1]=0;break;case"i32":G[t>>2]=0;break;case"i64":ft=[0,(ct=0,1<=+Math.abs(ct)?0<ct?(0|Math.min(+Math.floor(ct/4294967296),4294967295))>>>0:~~+Math.ceil((ct-+(~~ct>>>0))/4294967296)>>>0:0)],G[t>>2]=ft[0],G[t+4>>2]=ft[1];break;case"float":W[t>>2]=0;break;case"double":V[t>>3]=0;break;default:ut("invalid type for setValue: "+e)}}function j(t,e){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":return q[t>>0];case"i16":return B[t>>1];case"i32":case"i64":return G[t>>2];case"float":return W[t>>2];case"double":return V[t>>3];default:ut("invalid type for getValue: "+e)}return null}u.wasmBinary&&(k=u.wasmBinary),u.noExitRuntime&&u.noExitRuntime,"object"!=typeof WebAssembly&&ut("no native wasm support detected");var E,L,F=!1;function z(t,e){t||ut("Assertion failed: "+e)}function T(t){var e=u["_"+t];return z(e,"Cannot call unknown function "+t+", make sure it is exported"),e}function R(t,e,n,i){var r,a={string:function(t){var e=0;if(null!=t&&0!==t){var n=1+(t.length<<2);e=Xe(n),X(t,U,e,n)}return e},array:function(t){var e=Xe(t.length);return q.set(t,e),e}},s=T(t),o=[];if(t=0,i)for(var u=0;u<i.length;u++){var l=a[n[u]];l?(0===t&&(t=Ze()),o[u]=l(i[u])):o[u]=i[u]}return n=s.apply(null,o),r=n,n="string"===e?Q(r):"boolean"===e?!!r:r,0!==t&&Qe(t),n}function N(t){var e=Ue(t.length);return t.subarray||t.slice?U.set(t,e):U.set(new Uint8Array(t),e),e}var D,q,U,B,G,W,V,H="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function Z(t,e,n){var i=e+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.subarray&&H)return H.decode(t.subarray(e,n));for(i="";e<n;){var r=t[e++];if(128&r){var a=63&t[e++];if(192==(224&r))i+=String.fromCharCode((31&r)<<6|a);else{var s=63&t[e++];65536>(r=224==(240&r)?(15&r)<<12|a<<6|s:(7&r)<<18|a<<12|s<<6|63&t[e++])?i+=String.fromCharCode(r):(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else i+=String.fromCharCode(r)}return i}function Q(t,e){return t?Z(U,t,e):""}function X(t,e,n,i){if(!(0<i))return 0;var r=n;i=n+i-1;for(var a=0;a<t.length;++a){var s=t.charCodeAt(a);if(55296<=s&&57343>=s)s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a);if(127>=s){if(n>=i)break;e[n++]=s}else{if(2047>=s){if(n+1>=i)break;e[n++]=192|s>>6}else{if(65535>=s){if(n+2>=i)break;e[n++]=224|s>>12}else{if(n+3>=i)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63}e[n++]=128|s>>6&63}e[n++]=128|63&s}}return e[n]=0,n-r}function K(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),127>=i?++e:e=2047>=i?e+2:65535>=i?e+3:e+4}return e}function J(t){var e=K(t)+1,n=Ue(e);return n&&X(t,q,n,e),n}function Y(t){D=t,u.HEAP8=q=new Int8Array(t),u.HEAP16=B=new Int16Array(t),u.HEAP32=G=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=new Uint32Array(t),u.HEAPF32=W=new Float32Array(t),u.HEAPF64=V=new Float64Array(t)}var $=u.INITIAL_MEMORY||16777216;(E=u.wasmMemory?u.wasmMemory:new WebAssembly.Memory({initial:$/65536,maximum:32768}))&&(D=E.buffer),$=D.byteLength,Y(D);var tt=[],et=[],nt=[],it=[];function rt(){var t=u.preRun.shift();tt.unshift(t)}var at=0,st=null,ot=null;function ut(t){throw u.onAbort&&u.onAbort(t),P(t),F=!0,new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}function lt(t){var e=pt;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function ht(){return lt("data:application/octet-stream;base64,")}u.preloadedImages={},u.preloadedAudios={};var ct,ft,dt,pt="sql-wasm.wasm";if(!ht()){var vt=pt;pt=u.locateFile?u.locateFile(vt,w):w+vt}function yt(){try{if(k)return new Uint8Array(k);if(m)return m(pt);throw"both async and sync fetching of the wasm failed"}catch(t){ut(t)}}function bt(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e(u);else{var n=e.Hb;"number"==typeof n?void 0===e.mb?L.get(n)():L.get(n)(e.mb):n(void 0===e.mb?null:e.mb)}}}function gt(t,e){for(var n=0,i=t.length-1;0<=i;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n;n--)t.unshift("..");return t}function mt(t){var e="/"===t.charAt(0),n="/"===t.substr(-1);return(t=gt(t.split("/").filter((function(t){return!!t})),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function _t(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."}function xt(t){if("/"===t)return"/";var e=(t=(t=mt(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)}function wt(t){G[qe()>>2]=t}function Mt(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if("string"!=typeof(e=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=gt(t.split("/").filter((function(t){return!!t})),!e).join("/"))||"."}var Pt=[];function Ot(t,e){Pt[t]={input:[],output:[],cb:e},te(t,kt)}var kt={open:function(t){var e=Pt[t.node.rdev];if(!e)throw new Rt(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.cb.flush(t.tty)},flush:function(t){t.tty.cb.flush(t.tty)},read:function(t,e,n,i){if(!t.tty||!t.tty.cb.xb)throw new Rt(60);for(var r=0,a=0;a<i;a++){try{var s=t.tty.cb.xb(t.tty)}catch(o){throw new Rt(29)}if(void 0===s&&0===r)throw new Rt(6);if(null==s)break;r++,e[n+a]=s}return r&&(t.node.timestamp=Date.now()),r},write:function(t,e,n,i){if(!t.tty||!t.tty.cb.qb)throw new Rt(60);try{for(var r=0;r<i;r++)t.tty.cb.qb(t.tty,e[n+r])}catch(a){throw new Rt(29)}return i&&(t.node.timestamp=Date.now()),r}},St={xb:function(t){if(!t.input.length){var n=null;if(v){var i=r.zb?r.zb(256):new r(256),a=0;try{a=_.readSync(e.stdin.fd,i,0,256,null)}catch(s){if(-1==s.toString().indexOf("EOF"))throw s;a=0}n=0<a?i.slice(0,a).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(n=window.prompt("Input: "))&&(n+="\n"):"function"==typeof readline&&(null!==(n=readline())&&(n+="\n"));if(!n)return null;t.input=Te(n,!0)}return t.input.shift()},qb:function(t,e){null===e||10===e?(M(Z(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(M(Z(t.output,0)),t.output=[])}},Ct={qb:function(t,e){null===e||10===e?(P(Z(t.output,0)),t.output=[]):0!=e&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(P(Z(t.output,0)),t.output=[])}},At={Va:null,Wa:function(){return At.createNode(null,"/",16895,0)},createNode:function(t,e,n,i){if(24576==(61440&n)||4096==(61440&n))throw new Rt(63);return At.Va||(At.Va={dir:{node:{Ua:At.Na.Ua,Ta:At.Na.Ta,lookup:At.Na.lookup,gb:At.Na.gb,rename:At.Na.rename,unlink:At.Na.unlink,rmdir:At.Na.rmdir,readdir:At.Na.readdir,symlink:At.Na.symlink},stream:{Za:At.Oa.Za}},file:{node:{Ua:At.Na.Ua,Ta:At.Na.Ta},stream:{Za:At.Oa.Za,read:At.Oa.read,write:At.Oa.write,sb:At.Oa.sb,hb:At.Oa.hb,ib:At.Oa.ib}},link:{node:{Ua:At.Na.Ua,Ta:At.Na.Ta,readlink:At.Na.readlink},stream:{}},ub:{node:{Ua:At.Na.Ua,Ta:At.Na.Ta},stream:$t}}),Vt((n=Wt(t,e,n,i)).mode)?(n.Na=At.Va.dir.node,n.Oa=At.Va.dir.stream,n.Ma={}):32768==(61440&n.mode)?(n.Na=At.Va.file.node,n.Oa=At.Va.file.stream,n.Sa=0,n.Ma=null):40960==(61440&n.mode)?(n.Na=At.Va.link.node,n.Oa=At.Va.link.stream):8192==(61440&n.mode)&&(n.Na=At.Va.ub.node,n.Oa=At.Va.ub.stream),n.timestamp=Date.now(),t&&(t.Ma[e]=n),n},Sb:function(t){if(t.Ma&&t.Ma.subarray){for(var e=[],n=0;n<t.Sa;++n)e.push(t.Ma[n]);return e}return t.Ma},Tb:function(t){return t.Ma?t.Ma.subarray?t.Ma.subarray(0,t.Sa):new Uint8Array(t.Ma):new Uint8Array(0)},vb:function(t,e){var n=t.Ma?t.Ma.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),0!=n&&(e=Math.max(e,256)),n=t.Ma,t.Ma=new Uint8Array(e),0<t.Sa&&t.Ma.set(n.subarray(0,t.Sa),0))},Pb:function(t,e){if(t.Sa!=e)if(0==e)t.Ma=null,t.Sa=0;else{if(!t.Ma||t.Ma.subarray){var n=t.Ma;t.Ma=new Uint8Array(e),n&&t.Ma.set(n.subarray(0,Math.min(e,t.Sa)))}else if(t.Ma||(t.Ma=[]),t.Ma.length>e)t.Ma.length=e;else for(;t.Ma.length<e;)t.Ma.push(0);t.Sa=e}},Na:{Ua:function(t){var e={};return e.dev=8192==(61440&t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Vt(t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Sa:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.Gb=4096,e.blocks=Math.ceil(e.size/e.Gb),e},Ta:function(t,e){void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&At.Pb(t,e.size)},lookup:function(){throw Nt[44]},gb:function(t,e,n,i){return At.createNode(t,e,n,i)},rename:function(t,e,n){if(Vt(t.mode)){try{var i=Gt(e,n)}catch(a){}if(i)for(var r in i.Ma)throw new Rt(55)}delete t.parent.Ma[t.name],t.name=n,e.Ma[n]=t,t.parent=e},unlink:function(t,e){delete t.Ma[e]},rmdir:function(t,e){var n,i=Gt(t,e);for(n in i.Ma)throw new Rt(55);delete t.Ma[e]},readdir:function(t){var e,n=[".",".."];for(e in t.Ma)t.Ma.hasOwnProperty(e)&&n.push(e);return n},symlink:function(t,e,n){return(t=At.createNode(t,e,41471,0)).link=n,t},readlink:function(t){if(40960!=(61440&t.mode))throw new Rt(28);return t.link}},Oa:{read:function(t,e,n,i,r){var a=t.node.Ma;if(r>=t.node.Sa)return 0;if(8<(t=Math.min(t.node.Sa-r,i))&&a.subarray)e.set(a.subarray(r,r+t),n);else for(i=0;i<t;i++)e[n+i]=a[r+i];return t},write:function(t,e,n,i,r,a){if(e.buffer===q.buffer&&(a=!1),!i)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.Ma||t.Ma.subarray)){if(a)return t.Ma=e.subarray(n,n+i),t.Sa=i;if(0===t.Sa&&0===r)return t.Ma=e.slice(n,n+i),t.Sa=i;if(r+i<=t.Sa)return t.Ma.set(e.subarray(n,n+i),r),i}if(At.vb(t,r+i),t.Ma.subarray&&e.subarray)t.Ma.set(e.subarray(n,n+i),r);else for(a=0;a<i;a++)t.Ma[r+a]=e[n+a];return t.Sa=Math.max(t.Sa,r+i),i},Za:function(t,e,n){if(1===n?e+=t.position:2===n&&32768==(61440&t.node.mode)&&(e+=t.node.Sa),0>e)throw new Rt(28);return e},sb:function(t,e,n){At.vb(t.node,e+n),t.node.Sa=Math.max(t.node.Sa,e+n)},hb:function(t,e,n,i,r,a){if(z(0===e),32768!=(61440&t.node.mode))throw new Rt(43);if(t=t.node.Ma,2&a||t.buffer!==D){for((0<i||i+n<t.length)&&(t=t.subarray?t.subarray(i,i+n):Array.prototype.slice.call(t,i,i+n)),i=!0,a=16384*Math.ceil(n/16384),e=Ue(a);n<a;)q[e+n++]=0;if(!(n=e))throw new Rt(48);q.set(t,n)}else i=!1,n=t.byteOffset;return{Ob:n,kb:i}},ib:function(t,e,n,i,r){if(32768!=(61440&t.node.mode))throw new Rt(43);return 2&r||At.Oa.write(t,e,0,i,n,!1),0}}},It=null,jt={},Et=[],Lt=1,Ft=null,zt=!0,Tt={},Rt=null,Nt={};function Dt(t,e){if(e=e||{},!(t=Mt("/",t)))return{path:"",node:null};var n,i={wb:!0,rb:0};for(n in i)void 0===e[n]&&(e[n]=i[n]);if(8<e.rb)throw new Rt(32);t=gt(t.split("/").filter((function(t){return!!t})),!1);var r=It;for(i="/",n=0;n<t.length;n++){var a=n===t.length-1;if(a&&e.parent)break;if(r=Gt(r,t[n]),i=mt(i+"/"+t[n]),r.ab&&(!a||a&&e.wb)&&(r=r.ab.root),!a||e.Ya)for(a=0;40960==(61440&r.mode);)if(r=oe(i),r=Dt(i=Mt(_t(i),r),{rb:e.rb}).node,40<a++)throw new Rt(32)}return{path:i,node:r}}function qt(t){for(var e;;){if(t===t.parent)return t=t.Wa.yb,e?"/"!==t[t.length-1]?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function Ut(t,e){for(var n=0,i=0;i<e.length;i++)n=(n<<5)-n+e.charCodeAt(i)|0;return(t+n>>>0)%Ft.length}function Bt(t){var e=Ut(t.parent.id,t.name);if(Ft[e]===t)Ft[e]=t.bb;else for(e=Ft[e];e;){if(e.bb===t){e.bb=t.bb;break}e=e.bb}}function Gt(t,e){var n;if(n=(n=Qt(t,"x"))?n:t.Na.lookup?0:2)throw new Rt(n,t);for(n=Ft[Ut(t.id,e)];n;n=n.bb){var i=n.name;if(n.parent.id===t.id&&i===e)return n}return t.Na.lookup(t,e)}function Wt(t,e,n,i){return e=Ut((t=new ze(t,e,n,i)).parent.id,t.name),t.bb=Ft[e],Ft[e]=t}function Vt(t){return 16384==(61440&t)}var Ht={r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218};function Zt(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function Qt(t,e){return zt||(-1===e.indexOf("r")||292&t.mode)&&(-1===e.indexOf("w")||146&t.mode)&&(-1===e.indexOf("x")||73&t.mode)?0:2}function Xt(t,e){try{return Gt(t,e),20}catch(n){}return Qt(t,"wx")}function Kt(t,e,n){try{var i=Gt(t,e)}catch(r){return r.Pa}if(t=Qt(t,"wx"))return t;if(n){if(!Vt(i.mode))return 54;if(i===i.parent||"/"===qt(i))return 10}else if(Vt(i.mode))return 31;return 0}function Jt(t,e){we||((we=function(){}).prototype={});var n,i=new we;for(n in t)i[n]=t[n];return t=i,e=function(t){for(t=t||0;t<=4096;t++)if(!Et[t])return t;throw new Rt(33)}(e),t.fd=e,Et[e]=t}var Yt,$t={open:function(t){t.Oa=jt[t.node.rdev].Oa,t.Oa.open&&t.Oa.open(t)},Za:function(){throw new Rt(70)}};function te(t,e){jt[t]={Oa:e}}function ee(t,e){var n="/"===e,i=!e;if(n&&It)throw new Rt(10);if(!n&&!i){var r=Dt(e,{wb:!1});if(e=r.path,(r=r.node).ab)throw new Rt(10);if(!Vt(r.mode))throw new Rt(54)}e={type:t,Ub:{},yb:e,Mb:[]},(t=t.Wa(e)).Wa=e,e.root=t,n?It=t:r&&(r.ab=e,r.Wa&&r.Wa.Mb.push(e))}function ne(t,e,n){var i=Dt(t,{parent:!0}).node;if(!(t=xt(t))||"."===t||".."===t)throw new Rt(28);var r=Xt(i,t);if(r)throw new Rt(r);if(!i.Na.gb)throw new Rt(63);return i.Na.gb(i,t,e,n)}function ie(t,e){ne(t,1023&(void 0!==e?e:511)|16384,0)}function re(t,e,n){void 0===n&&(n=e,e=438),ne(t,8192|e,n)}function ae(t,e){if(!Mt(t))throw new Rt(44);var n=Dt(e,{parent:!0}).node;if(!n)throw new Rt(44);var i=Xt(n,e=xt(e));if(i)throw new Rt(i);if(!n.Na.symlink)throw new Rt(63);n.Na.symlink(n,e,t)}function se(t){var e=Dt(t,{parent:!0}).node,n=xt(t),i=Gt(e,n),r=Kt(e,n,!1);if(r)throw new Rt(r);if(!e.Na.unlink)throw new Rt(63);if(i.ab)throw new Rt(10);try{Tt.willDeletePath&&Tt.willDeletePath(t)}catch(a){P("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+a.message)}e.Na.unlink(e,n),Bt(i);try{Tt.onDeletePath&&Tt.onDeletePath(t)}catch(a){P("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+a.message)}}function oe(t){if(!(t=Dt(t).node))throw new Rt(44);if(!t.Na.readlink)throw new Rt(28);return Mt(qt(t.parent),t.Na.readlink(t))}function ue(t,e){if(!(t=Dt(t,{Ya:!e}).node))throw new Rt(44);if(!t.Na.Ua)throw new Rt(63);return t.Na.Ua(t)}function le(t){return ue(t,!0)}function he(t,e){var n;if(!(n="string"==typeof t?Dt(t,{Ya:!0}).node:t).Na.Ta)throw new Rt(63);n.Na.Ta(n,{mode:4095&e|-4096&n.mode,timestamp:Date.now()})}function ce(t){var e;if(!(e="string"==typeof t?Dt(t,{Ya:!0}).node:t).Na.Ta)throw new Rt(63);e.Na.Ta(e,{timestamp:Date.now()})}function fe(t,e){if(0>e)throw new Rt(28);var n;if(!(n="string"==typeof t?Dt(t,{Ya:!0}).node:t).Na.Ta)throw new Rt(63);if(Vt(n.mode))throw new Rt(31);if(32768!=(61440&n.mode))throw new Rt(28);if(t=Qt(n,"w"))throw new Rt(t);n.Na.Ta(n,{size:e,timestamp:Date.now()})}function de(t,e,n,i){if(""===t)throw new Rt(44);if("string"==typeof e){var r=Ht[e];if(void 0===r)throw Error("Unknown file open mode: "+e);e=r}if(n=64&e?4095&(void 0===n?438:n)|32768:0,"object"==typeof t)var a=t;else{t=mt(t);try{a=Dt(t,{Ya:!(131072&e)}).node}catch(s){}}if(r=!1,64&e)if(a){if(128&e)throw new Rt(20)}else a=ne(t,n,0),r=!0;if(!a)throw new Rt(44);if(8192==(61440&a.mode)&&(e&=-513),65536&e&&!Vt(a.mode))throw new Rt(54);if(!r&&(n=a?40960==(61440&a.mode)?32:Vt(a.mode)&&("r"!==Zt(e)||512&e)?31:Qt(a,Zt(e)):44))throw new Rt(n);512&e&&fe(a,0),e&=-131713,(i=Jt({node:a,path:qt(a),flags:e,seekable:!0,position:0,Oa:a.Oa,Rb:[],error:!1},i)).Oa.open&&i.Oa.open(i),!u.logReadFiles||1&e||(Me||(Me={}),t in Me||(Me[t]=1,P("FS.trackingDelegate error on read file: "+t)));try{Tt.onOpenFile&&(a=0,1!=(2097155&e)&&(a|=1),0!=(2097155&e)&&(a|=2),Tt.onOpenFile(t,a))}catch(s){P("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+s.message)}return i}function pe(t){if(null===t.fd)throw new Rt(8);t.ob&&(t.ob=null);try{t.Oa.close&&t.Oa.close(t)}catch(e){throw e}finally{Et[t.fd]=null}t.fd=null}function ve(t,e,n){if(null===t.fd)throw new Rt(8);if(!t.seekable||!t.Oa.Za)throw new Rt(70);if(0!=n&&1!=n&&2!=n)throw new Rt(28);t.position=t.Oa.Za(t,e,n),t.Rb=[]}function ye(t,e,n,i,r){if(0>i||0>r)throw new Rt(28);if(null===t.fd)throw new Rt(8);if(1==(2097155&t.flags))throw new Rt(8);if(Vt(t.node.mode))throw new Rt(31);if(!t.Oa.read)throw new Rt(28);var a=void 0!==r;if(a){if(!t.seekable)throw new Rt(70)}else r=t.position;return e=t.Oa.read(t,e,n,i,r),a||(t.position+=e),e}function be(t,e,n,i,r,a){if(0>i||0>r)throw new Rt(28);if(null===t.fd)throw new Rt(8);if(0==(2097155&t.flags))throw new Rt(8);if(Vt(t.node.mode))throw new Rt(31);if(!t.Oa.write)throw new Rt(28);t.seekable&&1024&t.flags&&ve(t,0,2);var s=void 0!==r;if(s){if(!t.seekable)throw new Rt(70)}else r=t.position;e=t.Oa.write(t,e,n,i,r,a),s||(t.position+=e);try{t.path&&Tt.onWriteToFile&&Tt.onWriteToFile(t.path)}catch(o){P("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+o.message)}return e}function ge(){Rt||((Rt=function(t,e){this.node=e,this.Qb=function(t){this.Pa=t},this.Qb(t),this.message="FS error"}).prototype=Error(),Rt.prototype.constructor=Rt,[44].forEach((function(t){Nt[t]=new Rt(t),Nt[t].stack="<generic error, no stack>"})))}function me(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n}function _e(t,e,n){t=mt("/dev/"+t);var i=me(!!e,!!n);xe||(xe=64);var r=xe++<<8|0;te(r,{open:function(t){t.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(t,n,i,r){for(var a=0,s=0;s<r;s++){try{var o=e()}catch(u){throw new Rt(29)}if(void 0===o&&0===a)throw new Rt(6);if(null==o)break;a++,n[i+s]=o}return a&&(t.node.timestamp=Date.now()),a},write:function(t,e,i,r){for(var a=0;a<r;a++)try{n(e[i+a])}catch(s){throw new Rt(29)}return r&&(t.node.timestamp=Date.now()),a}}),re(t,i,r)}var xe,we,Me,Pe={},Oe={};function ke(t,e,n){try{var i=t(e)}catch(r){if(r&&r.node&&mt(e)!==mt(qt(r.node)))return-54;throw r}return G[n>>2]=i.dev,G[n+4>>2]=0,G[n+8>>2]=i.ino,G[n+12>>2]=i.mode,G[n+16>>2]=i.nlink,G[n+20>>2]=i.uid,G[n+24>>2]=i.gid,G[n+28>>2]=i.rdev,G[n+32>>2]=0,ft=[i.size>>>0,(ct=i.size,1<=+Math.abs(ct)?0<ct?(0|Math.min(+Math.floor(ct/4294967296),4294967295))>>>0:~~+Math.ceil((ct-+(~~ct>>>0))/4294967296)>>>0:0)],G[n+40>>2]=ft[0],G[n+44>>2]=ft[1],G[n+48>>2]=4096,G[n+52>>2]=i.blocks,G[n+56>>2]=i.atime.getTime()/1e3|0,G[n+60>>2]=0,G[n+64>>2]=i.mtime.getTime()/1e3|0,G[n+68>>2]=0,G[n+72>>2]=i.ctime.getTime()/1e3|0,G[n+76>>2]=0,ft=[i.ino>>>0,(ct=i.ino,1<=+Math.abs(ct)?0<ct?(0|Math.min(+Math.floor(ct/4294967296),4294967295))>>>0:~~+Math.ceil((ct-+(~~ct>>>0))/4294967296)>>>0:0)],G[n+80>>2]=ft[0],G[n+84>>2]=ft[1],0}var Se=void 0;function Ce(){return G[(Se+=4)-4>>2]}function Ae(t){if(!(t=Et[t]))throw new Rt(8);return t}var Ie,je,Ee={};function Le(){if(!Ie){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"};for(t in Ee)e[t]=Ee[t];var n=[];for(t in e)n.push(t+"="+e[t]);Ie=n}return Ie}function Fe(t){for(var e=je();je()-e<t/1e3;);}function ze(t,e,n,i){t||(t=this),this.parent=t,this.Wa=t.Wa,this.ab=null,this.id=Lt++,this.name=e,this.mode=n,this.Na={},this.Oa={},this.rdev=i}function Te(t,e){var n=Array(K(t)+1);return t=X(t,n,0,n.length),e&&(n.length=t),n}je=v?function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()},u._usleep=Fe,Object.defineProperties(ze.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),ge(),Ft=Array(4096),ee(At,"/"),ie("/tmp"),ie("/home"),ie("/home/web_user"),function(){ie("/dev"),te(259,{read:function(){return 0},write:function(t,e,n,i){return i}}),re("/dev/null",259),Ot(1280,St),Ot(1536,Ct),re("/dev/tty",1280),re("/dev/tty1",1536);var t=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(v)try{var e=n("HEbw");return function(){return e.randomBytes(1)[0]}}catch(i){}return function(){ut("randomDevice")}}();_e("random",t),_e("urandom",t),ie("/dev/shm"),ie("/dev/shm/tmp")}(),ie("/proc"),ie("/proc/self"),ie("/proc/self/fd"),ee({Wa:function(){var t=Wt("/proc/self","fd",16895,73);return t.Na={lookup:function(t,e){var n=Et[+e];if(!n)throw new Rt(8);return(t={parent:null,Wa:{yb:"fake"},Na:{readlink:function(){return n.path}}}).parent=t}},t}},"/proc/self/fd"),et.push({Hb:function(){Ne()}});var Re={b:function(t,e,n,i){ut("Assertion failed: "+Q(t)+", at: "+[e?Q(e):"unknown filename",n,i?Q(i):"unknown function"])},q:function(t,e){!function(){function t(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}if(!dt){dt=!0,G[He()>>2]=60*(new Date).getTimezoneOffset();var e=(new Date).getFullYear(),n=new Date(e,0,1);e=new Date(e,6,1),G[Ve()>>2]=Number(n.getTimezoneOffset()!=e.getTimezoneOffset());var i=t(n),r=t(e);i=J(i),r=J(r),e.getTimezoneOffset()<n.getTimezoneOffset()?(G[We()>>2]=i,G[We()+4>>2]=r):(G[We()>>2]=r,G[We()+4>>2]=i)}}(),t=new Date(1e3*G[t>>2]),G[e>>2]=t.getSeconds(),G[e+4>>2]=t.getMinutes(),G[e+8>>2]=t.getHours(),G[e+12>>2]=t.getDate(),G[e+16>>2]=t.getMonth(),G[e+20>>2]=t.getFullYear()-1900,G[e+24>>2]=t.getDay();var n=new Date(t.getFullYear(),0,1);G[e+28>>2]=(t.getTime()-n.getTime())/864e5|0,G[e+36>>2]=-60*t.getTimezoneOffset();var i=new Date(t.getFullYear(),6,1).getTimezoneOffset();return t=0|(i!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,i)),G[e+32>>2]=t,t=G[We()+(t?4:0)>>2],G[e+40>>2]=t,e},z:function(t,e){try{var n;if(t=Q(t),-8&e)var i=-28;else(n=Dt(t,{Ya:!0}).node)?(t="",4&e&&(t+="r"),2&e&&(t+="w"),1&e&&(t+="x"),i=t&&Qt(n,t)?-2:0):i=-44;return i}catch(r){return void 0!==Pe&&r instanceof Rt||ut(r),-r.Pa}},i:function(t,e){try{return he(t=Q(t),e),0}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},t:function(t){try{return ce(t=Q(t)),0}catch(e){return void 0!==Pe&&e instanceof Rt||ut(e),-e.Pa}},j:function(t,e){try{var n=Et[t];if(!n)throw new Rt(8);return he(n.node,e),0}catch(i){return void 0!==Pe&&i instanceof Rt||ut(i),-i.Pa}},u:function(t){try{var e=Et[t];if(!e)throw new Rt(8);return ce(e.node),0}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},c:function(t,e,n){Se=n;try{var i=Ae(t);switch(e){case 0:var r=Ce();return 0>r?-28:de(i.path,i.flags,0,r).fd;case 1:case 2:return 0;case 3:return i.flags;case 4:return r=Ce(),i.flags|=r,0;case 12:return r=Ce(),B[r+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return wt(28),-1;default:return-28}}catch(a){return void 0!==Pe&&a instanceof Rt||ut(a),-a.Pa}},K:function(t,e){try{return ke(ue,Ae(t).path,e)}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},v:function(t,e,n){try{var i=Et[t];if(!i)throw new Rt(8);if(0==(2097155&i.flags))throw new Rt(28);return fe(i.node,n),0}catch(r){return void 0!==Pe&&r instanceof Rt||ut(r),-r.Pa}},w:function(t,e){try{return 0===e?-28:e<K("/")+1?-68:(X("/",U,t,e),t)}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},s:function(){return 0},e:function(){return 42},J:function(t,e){try{return ke(le,t=Q(t),e)}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},I:function(t,e){try{return"/"===(t=mt(t=Q(t)))[t.length-1]&&(t=t.substr(0,t.length-1)),ie(t,e),0}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},G:function(t,e,n,i,r,a){try{t:{a<<=12;var s=!1;if(0!=(16&i)&&0!=t%16384)var o=-28;else{if(0!=(32&i)){var u=Ke(16384,e);if(!u){o=-48;break t}De(u,0,e),s=!0}else{var l=Et[r];if(!l){o=-8;break t}var h=a;if(0!=(2&n)&&0==(2&i)&&2!=(2097155&l.flags))throw new Rt(2);if(1==(2097155&l.flags))throw new Rt(2);if(!l.Oa.hb)throw new Rt(43);var c=l.Oa.hb(l,t,e,h,n,i);u=c.Ob,s=c.kb}Oe[u]={Lb:u,Kb:e,kb:s,fd:r,Nb:n,flags:i,offset:a},o=u}}return o}catch(f){return void 0!==Pe&&f instanceof Rt||ut(f),-f.Pa}},H:function(t,e){try{if(-1==(0|t)||0===e)var n=-28;else{var i=Oe[t];if(i&&e===i.Kb){var r=Et[i.fd];if(2&i.Nb){var a=i.flags,s=i.offset,o=U.slice(t,t+e);r&&r.Oa.ib&&r.Oa.ib(r,o,s,e,a)}Oe[t]=null,i.kb&&Be(i.Lb)}n=0}return n}catch(u){return void 0!==Pe&&u instanceof Rt||ut(u),-u.Pa}},k:function(t,e,n){Se=n;try{return de(Q(t),e,Ce()).fd}catch(i){return void 0!==Pe&&i instanceof Rt||ut(i),-i.Pa}},D:function(t,e,n){try{return ye(Ae(t),q,e,n)}catch(i){return void 0!==Pe&&i instanceof Rt||ut(i),-i.Pa}},C:function(t,e,n){try{if(t=Q(t),0>=n)var i=-28;else{var r=oe(t),a=Math.min(n,K(r)),s=q[e+a];X(r,U,e,n+1),q[e+a]=s,i=a}return i}catch(o){return void 0!==Pe&&o instanceof Rt||ut(o),-o.Pa}},E:function(t){try{var e=Dt(t=Q(t),{parent:!0}).node,n=xt(t),i=Gt(e,n),r=Kt(e,n,!0);if(r)throw new Rt(r);if(!e.Na.rmdir)throw new Rt(63);if(i.ab)throw new Rt(10);try{Tt.willDeletePath&&Tt.willDeletePath(t)}catch(a){P("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+a.message)}e.Na.rmdir(e,n),Bt(i);try{Tt.onDeletePath&&Tt.onDeletePath(t)}catch(a){P("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+a.message)}return 0}catch(a){return void 0!==Pe&&a instanceof Rt||ut(a),-a.Pa}},g:function(t,e){try{return ke(ue,t=Q(t),e)}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),-n.Pa}},y:function(t){try{return se(t=Q(t)),0}catch(e){return void 0!==Pe&&e instanceof Rt||ut(e),-e.Pa}},m:function(t,e,n){U.copyWithin(t,e,e+n)},d:function(t){t>>>=0;var e=U.length;if(2147483648<t)return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296),i=Math.max(16777216,t,i),0<i%65536&&(i+=65536-i%65536);t:{try{E.grow(Math.min(2147483648,i)-D.byteLength+65535>>>16),Y(E.buffer);var r=1;break t}catch(a){}r=void 0}if(r)return!0}return!1},o:function(t,e){var n=0;return Le().forEach((function(i,r){var a=e+n;for(r=G[t+4*r>>2]=a,a=0;a<i.length;++a)q[r++>>0]=i.charCodeAt(a);q[r>>0]=0,n+=i.length+1})),0},p:function(t,e){var n=Le();G[t>>2]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),G[e>>2]=i,0},f:function(t){try{return pe(Ae(t)),0}catch(e){return void 0!==Pe&&e instanceof Rt||ut(e),e.Pa}},n:function(t,e){try{var n=Ae(t);return q[e>>0]=n.tty?2:Vt(n.mode)?3:40960==(61440&n.mode)?7:4,0}catch(i){return void 0!==Pe&&i instanceof Rt||ut(i),i.Pa}},l:function(t,e,n,i,r){try{var a=Ae(t);return-9007199254740992>=(t=4294967296*n+(e>>>0))||9007199254740992<=t?-61:(ve(a,t,i),ft=[a.position>>>0,(ct=a.position,1<=+Math.abs(ct)?0<ct?(0|Math.min(+Math.floor(ct/4294967296),4294967295))>>>0:~~+Math.ceil((ct-+(~~ct>>>0))/4294967296)>>>0:0)],G[r>>2]=ft[0],G[r+4>>2]=ft[1],a.ob&&0===t&&0===i&&(a.ob=null),0)}catch(s){return void 0!==Pe&&s instanceof Rt||ut(s),s.Pa}},x:function(t){try{var e=Ae(t);return e.Oa&&e.Oa.fsync?-e.Oa.fsync(e):0}catch(n){return void 0!==Pe&&n instanceof Rt||ut(n),n.Pa}},F:function(t,e,n,i){try{t:{for(var r=Ae(t),a=t=0;a<n;a++){var s=be(r,q,G[e+8*a>>2],G[e+(8*a+4)>>2],void 0);if(0>s){var o=-1;break t}t+=s}o=t}return G[i>>2]=o,0}catch(u){return void 0!==Pe&&u instanceof Rt||ut(u),u.Pa}},h:function(t){var e=Date.now();return G[t>>2]=e/1e3|0,G[t+4>>2]=e%1e3*1e3|0,0},a:E,A:function(t,e){if(0===t)return wt(28),-1;var n=G[t>>2];return 0>(t=G[t+4>>2])||999999999<t||0>n?(wt(28),-1):(0!==e&&(G[e>>2]=0,G[e+4>>2]=0),Fe(1e6*n+t/1e3))},B:function(t){switch(t){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:case 79:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return wt(28),-1},L:function(t){var e=Date.now()/1e3|0;return t&&(G[t>>2]=e),e},r:function(t,e){if(e){var n=1e3*G[e+8>>2];n+=G[e+12>>2]/1e3}else n=Date.now();t=Q(t);try{e=n;var i=Dt(t,{Ya:!0}).node;return i.Na.Ta(i,{timestamp:Math.max(e,n)}),0}catch(r){if(!((t=r)instanceof Rt)){t+=" : ";t:{if(!(i=Error()).stack){try{throw Error()}catch(a){i=a}if(!i.stack){i="(no stack trace available)";break t}}i=i.stack.toString()}throw u.extraStackTrace&&(i+="\n"+u.extraStackTrace()),i=function(t){return t.replace(/\b_Z[\w\d_]+/g,(function(t){return t==t?t:t+" ["+t+"]"}))}(i),t+i}return wt(t.Pa),-1}}};!function(){function t(t){u.asm=t.exports,L=u.asm.M,at--,u.monitorRunDependencies&&u.monitorRunDependencies(at),0==at&&(null!==st&&(clearInterval(st),st=null),ot&&(t=ot,ot=null,t()))}function e(e){t(e.instance)}function n(t){return(k||!d&&!p||"function"!=typeof fetch||lt("file://")?Promise.resolve().then(yt):fetch(pt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+pt+"'";return t.arrayBuffer()})).catch((function(){return yt()}))).then((function(t){return WebAssembly.instantiate(t,i)})).then(t,(function(t){P("failed to asynchronously prepare wasm: "+t),ut(t)}))}var i={a:Re};if(at++,u.monitorRunDependencies&&u.monitorRunDependencies(at),u.instantiateWasm)try{return u.instantiateWasm(i,t)}catch(r){return P("Module.instantiateWasm callback failed with error: "+r),!1}(function(){if(k||"function"!=typeof WebAssembly.instantiateStreaming||ht()||lt("file://")||"function"!=typeof fetch)return n(e);fetch(pt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(e,(function(t){return P("wasm streaming compile failed: "+t),P("falling back to ArrayBuffer instantiation"),n(e)}))}))})()}();var Ne=u.___wasm_call_ctors=function(){return(Ne=u.___wasm_call_ctors=u.asm.N).apply(null,arguments)},De=u._memset=function(){return(De=u._memset=u.asm.O).apply(null,arguments)};u._sqlite3_free=function(){return(u._sqlite3_free=u.asm.P).apply(null,arguments)};var qe=u.___errno_location=function(){return(qe=u.___errno_location=u.asm.Q).apply(null,arguments)};u._sqlite3_finalize=function(){return(u._sqlite3_finalize=u.asm.R).apply(null,arguments)},u._sqlite3_reset=function(){return(u._sqlite3_reset=u.asm.S).apply(null,arguments)},u._sqlite3_clear_bindings=function(){return(u._sqlite3_clear_bindings=u.asm.T).apply(null,arguments)},u._sqlite3_value_blob=function(){return(u._sqlite3_value_blob=u.asm.U).apply(null,arguments)},u._sqlite3_value_text=function(){return(u._sqlite3_value_text=u.asm.V).apply(null,arguments)},u._sqlite3_value_bytes=function(){return(u._sqlite3_value_bytes=u.asm.W).apply(null,arguments)},u._sqlite3_value_double=function(){return(u._sqlite3_value_double=u.asm.X).apply(null,arguments)},u._sqlite3_value_int=function(){return(u._sqlite3_value_int=u.asm.Y).apply(null,arguments)},u._sqlite3_value_type=function(){return(u._sqlite3_value_type=u.asm.Z).apply(null,arguments)},u._sqlite3_result_blob=function(){return(u._sqlite3_result_blob=u.asm._).apply(null,arguments)},u._sqlite3_result_double=function(){return(u._sqlite3_result_double=u.asm.$).apply(null,arguments)},u._sqlite3_result_error=function(){return(u._sqlite3_result_error=u.asm.aa).apply(null,arguments)},u._sqlite3_result_int=function(){return(u._sqlite3_result_int=u.asm.ba).apply(null,arguments)},u._sqlite3_result_int64=function(){return(u._sqlite3_result_int64=u.asm.ca).apply(null,arguments)},u._sqlite3_result_null=function(){return(u._sqlite3_result_null=u.asm.da).apply(null,arguments)},u._sqlite3_result_text=function(){return(u._sqlite3_result_text=u.asm.ea).apply(null,arguments)},u._sqlite3_step=function(){return(u._sqlite3_step=u.asm.fa).apply(null,arguments)},u._sqlite3_column_count=function(){return(u._sqlite3_column_count=u.asm.ga).apply(null,arguments)},u._sqlite3_data_count=function(){return(u._sqlite3_data_count=u.asm.ha).apply(null,arguments)},u._sqlite3_column_blob=function(){return(u._sqlite3_column_blob=u.asm.ia).apply(null,arguments)},u._sqlite3_column_bytes=function(){return(u._sqlite3_column_bytes=u.asm.ja).apply(null,arguments)},u._sqlite3_column_double=function(){return(u._sqlite3_column_double=u.asm.ka).apply(null,arguments)},u._sqlite3_column_text=function(){return(u._sqlite3_column_text=u.asm.la).apply(null,arguments)},u._sqlite3_column_type=function(){return(u._sqlite3_column_type=u.asm.ma).apply(null,arguments)},u._sqlite3_column_name=function(){return(u._sqlite3_column_name=u.asm.na).apply(null,arguments)},u._sqlite3_bind_blob=function(){return(u._sqlite3_bind_blob=u.asm.oa).apply(null,arguments)},u._sqlite3_bind_double=function(){return(u._sqlite3_bind_double=u.asm.pa).apply(null,arguments)},u._sqlite3_bind_int=function(){return(u._sqlite3_bind_int=u.asm.qa).apply(null,arguments)},u._sqlite3_bind_text=function(){return(u._sqlite3_bind_text=u.asm.ra).apply(null,arguments)},u._sqlite3_bind_parameter_index=function(){return(u._sqlite3_bind_parameter_index=u.asm.sa).apply(null,arguments)},u._sqlite3_sql=function(){return(u._sqlite3_sql=u.asm.ta).apply(null,arguments)},u._sqlite3_normalized_sql=function(){return(u._sqlite3_normalized_sql=u.asm.ua).apply(null,arguments)},u._sqlite3_errmsg=function(){return(u._sqlite3_errmsg=u.asm.va).apply(null,arguments)},u._sqlite3_exec=function(){return(u._sqlite3_exec=u.asm.wa).apply(null,arguments)},u._sqlite3_prepare_v2=function(){return(u._sqlite3_prepare_v2=u.asm.xa).apply(null,arguments)},u._sqlite3_changes=function(){return(u._sqlite3_changes=u.asm.ya).apply(null,arguments)},u._sqlite3_close_v2=function(){return(u._sqlite3_close_v2=u.asm.za).apply(null,arguments)},u._sqlite3_create_function_v2=function(){return(u._sqlite3_create_function_v2=u.asm.Aa).apply(null,arguments)},u._sqlite3_open=function(){return(u._sqlite3_open=u.asm.Ba).apply(null,arguments)};var Ue=u._malloc=function(){return(Ue=u._malloc=u.asm.Ca).apply(null,arguments)},Be=u._free=function(){return(Be=u._free=u.asm.Da).apply(null,arguments)};u._RegisterExtensionFunctions=function(){return(u._RegisterExtensionFunctions=u.asm.Ea).apply(null,arguments)};var Ge,We=u.__get_tzname=function(){return(We=u.__get_tzname=u.asm.Fa).apply(null,arguments)},Ve=u.__get_daylight=function(){return(Ve=u.__get_daylight=u.asm.Ga).apply(null,arguments)},He=u.__get_timezone=function(){return(He=u.__get_timezone=u.asm.Ha).apply(null,arguments)},Ze=u.stackSave=function(){return(Ze=u.stackSave=u.asm.Ia).apply(null,arguments)},Qe=u.stackRestore=function(){return(Qe=u.stackRestore=u.asm.Ja).apply(null,arguments)},Xe=u.stackAlloc=function(){return(Xe=u.stackAlloc=u.asm.Ka).apply(null,arguments)},Ke=u._memalign=function(){return(Ke=u._memalign=u.asm.La).apply(null,arguments)};function Je(){function t(){if(!Ge&&(Ge=!0,u.calledRun=!0,!F)){if(u.noFSInit||Yt||(Yt=!0,ge(),u.stdin=u.stdin,u.stdout=u.stdout,u.stderr=u.stderr,u.stdin?_e("stdin",u.stdin):ae("/dev/tty","/dev/stdin"),u.stdout?_e("stdout",null,u.stdout):ae("/dev/tty","/dev/stdout"),u.stderr?_e("stderr",null,u.stderr):ae("/dev/tty1","/dev/stderr"),de("/dev/stdin","r"),de("/dev/stdout","w"),de("/dev/stderr","w")),bt(et),zt=!1,bt(nt),u.onRuntimeInitialized&&u.onRuntimeInitialized(),u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();it.unshift(t)}bt(it)}}if(!(0<at)){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)rt();bt(tt),0<at||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.cwrap=function(t,e,n,i){var r=(n=n||[]).every((function(t){return"number"===t}));return"string"!==e&&r&&!i?T(t):function(){return R(t,e,n,arguments)}},u.UTF8ToString=Q,u.stackSave=Ze,u.stackRestore=Qe,u.stackAlloc=Xe,ot=function t(){Ge||Je(),Ge||(ot=t)},u.run=Je,u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return!0,Je(),l})))};t.exports=s,t.exports.default=s}).call(this,n("YuTi")(t),n("8oxB"),"/",n("HDXh").Buffer)},Bnag:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},Ijbi:function(t,e,n){var i=n("WkPL");t.exports=function(t){if(Array.isArray(t))return i(t)}},J4zp:function(t,e,n){var i=n("wTVA"),r=n("m0LI"),a=n("ZhPi"),s=n("wkBT");t.exports=function(t,e){return i(t)||r(t,e)||a(t,e)||s()}},Po9p:function(t,e){},RIqP:function(t,e,n){var i=n("Ijbi"),r=n("EbDI"),a=n("ZhPi"),s=n("Bnag");t.exports=function(t){return i(t)||r(t)||a(t)||s()}},SEBh:function(t,e,n){var i=n("glrk"),r=n("HAuM"),a=n("tiKp")("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||null==(n=i(s)[a])?e:r(n)}},URgk:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new a(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n("YBdB"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("yLpj"))},VmRL:function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,o,u,l,h,d,p,y=e&&e.length,b=y?e[0]*n:t.length,g=r(t,0,b,n,!0),m=[];if(!g||g.next===g.prev)return m;if(y&&(g=function(t,e,n,i){var s,o,u,l,h,d=[];for(s=0,o=e.length;s<o;s++)u=e[s]*i,l=s<o-1?e[s+1]*i:t.length,(h=r(t,u,l,i,!1))===h.next&&(h.steiner=!0),d.push(v(h));for(d.sort(c),s=0;s<d.length;s++)f(d[s],n),n=a(n,n.next);return n}(t,e,g,n)),t.length>80*n){i=u=t[0],o=l=t[1];for(var _=n;_<b;_+=n)(h=t[_])<i&&(i=h),(d=t[_+1])<o&&(o=d),h>u&&(u=h),d>l&&(l=d);p=0!==(p=Math.max(u-i,l-o))?1/p:0}return s(g,m,n,i,o,p),m}function r(t,e,n,i,r){var a,s;if(r===C(t,e,n,i)>0)for(a=e;a<n;a+=i)s=O(a,t[a],t[a+1],s);else for(a=n-i;a>=e;a-=i)s=O(a,t[a],t[a+1],s);return s&&m(s,s.next)&&(k(s),s=s.next),s}function a(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!m(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(k(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function s(t,e,n,i,r,c,f){if(t){!f&&c&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,s,o,u,l=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,i=n,o=0,e=0;e<l&&(o++,i=i.nextZ);e++);for(u=l;o>0||u>0&&i;)0!==o&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(s>1)}(r)}(t,i,r,c);for(var d,v,y=t;t.prev!==t.next;)if(d=t.prev,v=t.next,c?u(t,i,r,c):o(t))e.push(d.i/n),e.push(t.i/n),e.push(v.i/n),k(t),t=v.next,y=v.next;else if((t=v)===y){f?1===f?s(t=l(a(t),e,n),e,n,i,r,c,2):2===f&&h(t,e,n,i,r,c):s(a(t),e,n,i,r,c,1);break}}}function o(t){var e=t.prev,n=t,i=t.next;if(g(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&g(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,a=t,s=t.next;if(g(r,a,s)>=0)return!1;for(var o=r.x<a.x?r.x<s.x?r.x:s.x:a.x<s.x?a.x:s.x,u=r.y<a.y?r.y<s.y?r.y:s.y:a.y<s.y?a.y:s.y,l=r.x>a.x?r.x>s.x?r.x:s.x:a.x>s.x?a.x:s.x,h=r.y>a.y?r.y>s.y?r.y:s.y:a.y>s.y?a.y:s.y,c=p(o,u,e,n,i),f=p(l,h,e,n,i),d=t.prevZ,v=t.nextZ;d&&d.z>=c&&v&&v.z<=f;){if(d!==t.prev&&d!==t.next&&y(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==t.prev&&v!==t.next&&y(r.x,r.y,a.x,a.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&y(r.x,r.y,a.x,a.y,s.x,s.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=f;){if(v!==t.prev&&v!==t.next&&y(r.x,r.y,a.x,a.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!m(r,s)&&_(r,i,i.next,s)&&M(r,s)&&M(s,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(s.i/n),k(i),k(i.next),i=t=s),i=i.next}while(i!==t);return a(i)}function h(t,e,n,i,r,o){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&b(u,l)){var h=P(u,l);return u=a(u,u.next),h=a(h,h.next),s(u,e,n,i,r,o),void s(h,e,n,i,r,o)}l=l.next}u=u.next}while(u!==t)}function c(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>s){if(s=o,o===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n;var u,l=n,h=n.x,c=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=h&&r!==i.x&&y(a<c?r:s,a,h,c,a<c?s:r,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(r-i.x),M(i,t)&&(u<f||u===f&&(i.x>n.x||i.x===n.x&&d(n,i)))&&(n=i,f=u)),i=i.next}while(i!==l);return n}(t,e)){var n=P(e,t);a(e,e.next),a(n,n.next)}}function d(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function p(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,i,r,a,s,o){return(r-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(i-o)-(n-s)*(e-o)>=0&&(n-s)*(a-o)-(r-s)*(i-o)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(M(t,e)&&M(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||m(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,i){var r=w(g(t,e,n)),a=w(g(t,e,i)),s=w(g(n,i,t)),o=w(g(n,i,e));return r!==a&&s!==o||(!(0!==r||!x(t,n,e))||(!(0!==a||!x(t,i,e))||(!(0!==s||!x(n,t,i))||!(0!==o||!x(n,e,i)))))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function M(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function P(t,e){var n=new S(t.i,t.x,t.y),i=new S(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function O(t,e,n,i){var r=new S(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(t,e,n,i){for(var r=0,a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,s=Math.abs(C(t,0,a,n));if(r)for(var o=0,u=e.length;o<u;o++){var l=e[o]*n,h=o<u-1?e[o+1]*n:t.length;s-=Math.abs(C(t,l,h,n))}var c=0;for(o=0;o<i.length;o+=3){var f=i[o]*n,d=i[o+1]*n,p=i[o+2]*n;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var s=0;s<e;s++)n.vertices.push(t[r][a][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},W8MJ:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},WkPL:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}},WxCf:function(t,e,n){var i=n("gxEx");t.exports=function(t){return new i(t)}},YBdB:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,a,s,o,u=1,l={},h=!1,c=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((a=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){a.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,i=function(t){var e=c.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),i=function(e){t.postMessage(s+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[u]=r,i(u),u++},f.clearImmediate=d}function d(t){delete l[t]}function p(t){if(h)setTimeout(p,0,t);else{var e=l[t];if(e){h=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{d(t),h=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("yLpj"),n("8oxB"))},ZhPi:function(t,e,n){var i=n("WkPL");t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},aAyt:function(t,e){t.exports=function(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}},gxEx:function(t,e){t.exports=function(t){this.wrapped=t}},lwsE:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},m0LI:function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){r=!0,a=u}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}}},mOBM:function(t,e,n){"use strict";n.r(e),n.d(e,"INITIAL_VIEW_STATE",(function(){return ps})),n.d(e,"default",(function(){return vs})),n.d(e,"renderToDOM",(function(){return ys}));var i=n("JX7q"),r=n("dI71"),a=n("q1tI"),s=n.n(a),o=n("i8i4"),u=n("UP1k"),l=n("yYqN"),h=n("BENj"),c=n("1OyB"),f=n("vuIU"),d=n("ReuC"),p=n("Ji7U"),v=n("md7G"),y=n("foSv"),b=n("rePB"),g=n("Jh/b"),m=n("5lV4");function _(t){for(var e=t.data,n=t.getIndex,i=t.dataRange,r=t.replace,a=i.startRow,s=void 0===a?0:a,o=i.endRow,u=void 0===o?1/0:o,l=e.length,h=l,c=l,f=0;f<l;f++){var d=n(e[f]);if(h>f&&d>=s&&(h=f),d>=u){c=f;break}}for(var p=h,v=c-h!==r.length,y=v&&e.slice(c),b=0;b<r.length;b++)e[p++]=r[b];if(v){for(var g=0;g<y.length;g++)e[p++]=y[g];e.length=p}return{startRow:h,endRow:h+r.length}}function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function M(t,e,n){var i={properties:w({},t.properties[e])};for(var r in t.numericProps)i.properties[r]=t.numericProps[r].value[n];return i}var P,O=n("K4gp"),k=n("BQ9P"),S=n("K7jV"),C=n("ykdB"),A=n("0i8A"),I=(n("p532"),n("MdWm")),j=n("p7wt"),E=n("f5Sf"),L=n("j7CB"),F=n("xszv"),z=n("rpwb");function T(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q=function(){},U=(P={},Object(b.a)(P,10241,9987),Object(b.a)(P,10240,9729),Object(b.a)(P,10242,33071),Object(b.a)(P,10243,33071),P);function B(t){return t&&(t.id||t.url)}function G(t,e,n){for(var i=0;i<e.length;i++){var r=e[i],a=r.icon,s=r.xOffset;t[B(a)]=D(D({},a),{},{x:s,y:n})}}var W=function(){function t(e,n){var i=n.onUpdate,r=void 0===i?q:i,a=n.onError,s=void 0===a?q:a;Object(c.a)(this,t),this.gl=e,this.onUpdate=r,this.onError=s,this._loadOptions=null,this._getIcon=null,this._texture=null,this._externalTexture=null,this._mapping={},this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=4,this._canvasWidth=1024,this._canvasHeight=0,this._canvas=null}return Object(f.a)(t,[{key:"finalize",value:function(){var t;null===(t=this._texture)||void 0===t||t.delete()}},{key:"getTexture",value:function(){return this._texture||this._externalTexture}},{key:"getIconMapping",value:function(t){var e=this._autoPacking?B(t):t;return this._mapping[e]||{}}},{key:"setProps",value:function(t){var e=t.loadOptions,n=t.autoPacking,i=t.iconAtlas,r=t.iconMapping,a=t.data,s=t.getIcon;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),s&&(this._getIcon=s),r&&(this._mapping=r),i&&this._updateIconAtlas(i),this._autoPacking&&(a||s)&&"undefined"!=typeof document&&(this._canvas=this._canvas||document.createElement("canvas"),this._updateAutoPacking(a))}},{key:"isLoaded",get:function(){return 0===this._pendingCount}},{key:"_updateIconAtlas",value:function(t){var e;null===(e=this._texture)||void 0===e||e.delete(),this._texture=null,this._externalTexture=t,this.onUpdate()}},{key:"_updateAutoPacking",value:function(t){var e,n,i,r,a,s,o=Object.values(function(t,e,n){if(!t||!e)return null;n=n||{};var i,r={},a=Object(z.a)(t),s=a.iterable,o=a.objectInfo,u=T(s);try{for(u.s();!(i=u.n()).done;){var l=i.value;o.index++;var h=e(l,o),c=B(h);if(!h)throw new Error("Icon is missing.");if(!h.url)throw new Error("Icon url is missing.");r[c]||n[c]&&h.url===n[c].url||(r[c]=D(D({},h),{},{source:l,sourceIndex:o.index}))}}catch(f){u.e(f)}finally{u.f()}return r}(t,this._getIcon,this._mapping)||{});if(o.length>0){var u=function(t){for(var e,n=t.icons,i=t.buffer,r=t.mapping,a=void 0===r?{}:r,s=t.xOffset,o=void 0===s?0:s,u=t.yOffset,l=void 0===u?0:u,h=t.rowHeight,c=void 0===h?0:h,f=t.canvasWidth,d=[],p=0;p<n.length;p++){var v=n[p];if(!a[B(v)]){var y=v.height,b=v.width;o+b+i>f&&(G(a,d,l),o=0,l=c+l+i,c=0,d=[]),d.push({icon:v,xOffset:o}),o=o+b+i,c=Math.max(c,y)}}return d.length>0&&G(a,d,l),{mapping:a,rowHeight:c,xOffset:o,yOffset:l,canvasWidth:f,canvasHeight:(e=c+l+i,Math.pow(2,Math.ceil(Math.log2(e))))}}({icons:o,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset}),l=u.mapping,h=u.xOffset,c=u.yOffset,f=u.rowHeight,d=u.canvasHeight;this._rowHeight=f,this._mapping=l,this._xOffset=h,this._yOffset=c,this._canvasHeight=d,this._texture||(this._texture=new E.a(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:U})),this._texture.height!==this._canvasHeight&&(this._texture=(this.gl,e=this._texture,n=this._canvasWidth,i=this._canvasHeight,r=e.width,a=e.height,s=Object(I.a)(e,{width:n,height:i}),Object(j.b)(e,s,{targetY:0,width:r,height:a}),e.delete(),s)),this.onUpdate(),this._loadIcons(o)}}},{key:"_loadIcons",value:function(t){var e,n=this,i=this._canvas.getContext("2d"),r=T(t);try{var a=function(){var t=e.value;n._pendingCount++,Object(F.a)(t.url,L.a,n._loadOptions).then((function(e){var r=B(t),a=n._mapping[r],s=a.x,o=a.y,u=a.width,l=a.height,h=function(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}(i,e,u,l);n._texture.setSubImageData({data:h,x:s,y:o,width:u,height:l}),n._texture.generateMipmap(),n.onUpdate()})).catch((function(e){n.onError({url:t.url,source:t.source,sourceIndex:t.sourceIndex,loadOptions:n._loadOptions,error:e})})).finally((function(){n._pendingCount--}))};for(r.s();!(e=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}}}]),t}();function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var Q=[0,0,0,255],X={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:function(t){return t.position}},getIcon:{type:"accessor",value:function(t){return t.icon}},getColor:{type:"accessor",value:Q},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},K=function(t){Object(p.a)(n,t);var e=Z(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"getShaders",value:function(){return Object(d.a)(Object(y.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale), \n    sizeMinPixels, sizeMaxPixels\n  );\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n",fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[O.a,k.a]})}},{key:"initializeState",value:function(){this.state={iconManager:new W(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Q},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}},{key:"updateState",value:function(t){var e=t.oldProps,i=t.props,r=t.changeFlags;Object(d.a)(Object(y.a)(n.prototype),"updateState",this).call(this,{props:i,oldProps:e,changeFlags:r});var a=this.getAttributeManager(),s=i.iconAtlas,o=i.iconMapping,u=i.data,l=i.getIcon,h=this.state.iconManager;h.setProps({loadOptions:i.loadOptions});var c=!1;if(s||this.internalState.isAsyncPropLoading("iconAtlas")?(e.iconAtlas!==i.iconAtlas&&h.setProps({iconAtlas:s,autoPacking:!1}),e.iconMapping!==i.iconMapping&&(h.setProps({iconMapping:o}),c=!0)):h.setProps({autoPacking:!0}),(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.setProps({data:u,getIcon:l}),c&&(a.invalidate("instanceOffsets"),a.invalidate("instanceIconFrames"),a.invalidate("instanceColorModes")),r.extensionsChanged){var f,p=this.context.gl;null===(f=this.state.model)||void 0===f||f.delete(),this.state.model=this._getModel(p),a.invalidateAll()}}},{key:"isLoaded",get:function(){return Object(d.a)(Object(y.a)(n.prototype),"isLoaded",this)&&this.state.iconManager.isLoaded}},{key:"finalizeState",value:function(){Object(d.a)(Object(y.a)(n.prototype),"finalizeState",this).call(this),this.state.iconManager.finalize()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,i=n.sizeScale,r=n.sizeMinPixels,a=n.sizeMaxPixels,s=n.sizeUnits,o=n.billboard,u=n.alphaCutoff,l=this.state.iconManager,h=this.context.viewport,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeScale:i*("pixels"===s?h.metersPerPixel:1),sizeMinPixels:r,sizeMaxPixels:a,billboard:o,alphaCutoff:u}).draw()}},{key:"_getModel",value:function(t){return new C.a(t,H(H({},this.getShaders()),{},{id:this.props.id,geometry:new A.a({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0}))}},{key:"_onUpdate",value:function(){this.setNeedsRedraw()}},{key:"_onError",value:function(t){var e=this.getCurrentLayer().props.onIconError;e?e(t):g.a.error(t.error)()}},{key:"getInstanceOffset",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.width/2-e.anchorX||0,e.height/2-e.anchorY||0]}},{key:"getInstanceColorMode",value:function(t){return this.state.iconManager.getIconMapping(t).mask?1:0}},{key:"getInstanceIconFrame",value:function(t){var e=this.state.iconManager.getIconMapping(t);return[e.x||0,e.y||0,e.width||0,e.height||0]}}]),n}(S.a);K.layerName="IconLayer",K.defaultProps=X;var J=n("+7vx"),Y=n("ODXe");function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var nt=[],it=function(t){Object(p.a)(n,t);var e=et(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"getShaders",value:function(){return tt(tt({},Object(d.a)(Object(y.a)(n.prototype),"getShaders",this).call(this)),{},{fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"})}},{key:"initializeState",value:function(){var t=this;Object(d.a)(Object(y.a)(n.prototype),"initializeState",this).call(this),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:function(e,n){var i=n.index,r=n.target;return t.encodePickingColor(i,r)}}})}},{key:"updateState",value:function(t){Object(d.a)(Object(y.a)(n.prototype),"updateState",this).call(this,t);var e=t.props,i=t.oldProps,r=e.outlineColor;r!==i.outlineColor&&((r=r.map((function(t){return t/255})))[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!e.sdf&&e.outlineWidth&&g.a.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}},{key:"draw",value:function(t){var e=this.props,i=e.sdf,r=e.smoothing,a=e.outlineWidth,s=this.state.outlineColor;t.uniforms=tt(tt({},t.uniforms),{},{buffer:.75,outlineBuffer:a?Math.max(r,.75*(1-a)):-1,gamma:r,sdf:Boolean(i),outlineColor:s}),Object(d.a)(Object(y.a)(n.prototype),"draw",this).call(this,t)}},{key:"getInstanceOffset",value:function(t){var e=this;return t?Array.from(t).map((function(t){return Object(d.a)(Object(y.a)(n.prototype),"getInstanceOffset",e).call(e,t)})):nt}},{key:"getInstanceColorMode",value:function(t){return 1}},{key:"getInstanceIconFrame",value:function(t){var e=this;return t?Array.from(t).map((function(t){return Object(d.a)(Object(y.a)(n.prototype),"getInstanceIconFrame",e).call(e,t)})):nt}}]),n}(K);it.layerName="MultiIconLayer",it.defaultProps={getIconOffsets:{type:"accessor",value:function(t){return t.offsets}},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};var rt=n("rxlC"),at=n.n(rt);function st(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ut=[];function lt(t,e,n,i){for(var r=0,a=e;a<n;a++){var s=t[a],o=null,u=i&&i[s];u&&(o=u.width),r+=o}return r}function ht(t,e,n,i,r,a){for(var s=e,o=0,u=e;u<n;u++){var l=lt(t,u,u+1,r);o+l>i&&(s<u&&a.push(u),s=u,o=0),o+=l}return o}function ct(t,e,n,i,r,a){for(var s=e,o=e,u=e,l=0,h=e;h<n;h++)if(" "===t[h]?u=h+1:" "!==t[h+1]&&h+1!==n||(u=h+1),u>o){var c=lt(t,o,u,r);l+c>i&&(s<o&&(a.push(o),s=o,l=0),c>i&&(c=ht(t,o,u,i,r,a),s=a[a.length-1])),o=u,l+=c}return l}function ft(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0;void 0===a&&(a=t.length);var s=[];return"break-all"===e?ht(t,r,a,n,i,s):ct(t,r,a,n,i,s),s}function dt(t,e,n,i,r,a){for(var s=0,o=0,u=e;u<n;u++){var l=t[u],h=i[l];h?(o||(o=h.height),r[u]=s+h.width/2,s+=h.width):(g.a.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[u]=s,s+=32)}a[0]=s,a[1]=o}function pt(t,e,n,i,r){for(var a=(t=Array.from(t)).length,s=new Array(a),o=new Array(a),u=new Array(a),l=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],c=[],f=0,d=0,p=0,v=0;v<=a;v++){var y=t[v];if("\n"!==y&&v!==a||(p=v),p>d){for(var b=l?ft(t,n,i,r,d,p):ut,g=0;g<=b.length;g++){var m=0===g?d:b[g-1],_=g<b.length?b[g]:p;dt(t,m,_,r,s,c);for(var x=m;x<_;x++)o[x]=f+c[1]/2,u[x]=c[0];f+=c[1]*e,h[0]=Math.max(h[0],c[0])}d=p}"\n"===y&&(s[d]=0,o[d]=0,u[d]=0,d++)}return h[1]=f,{x:s,y:o,rowWidth:u,size:h}}var vt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;Object(c.a)(this,t),this.limit=e,this.clear()}return Object(f.a)(t,[{key:"clear",value:function(){this._cache={},this._order=[]}},{key:"get",value:function(t){var e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}},{key:"set",value:function(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}},{key:"delete",value:function(t){this._cache[t]&&(this._deleteCache(t),this._deleteOrder(t))}},{key:"_deleteCache",value:function(t){delete this._cache[t]}},{key:"_deleteOrder",value:function(t){var e=this._order.findIndex((function(e){return e===t}));e>=0&&this._order.splice(e,1)}},{key:"_appendOrder",value:function(t){this._order.push(t)}}]),t}();function yt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var mt=function(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),_t=new vt(3),xt=["fontFamily","fontWeight","characterSet","fontSize","sdf","buffer","cutoff","radius"];function wt(t,e){var n=_t.get(t);if(!n)return e;var i=[],r=n.mapping,a=Object.keys(r);a=new Set(a);var s=e;return s instanceof Array&&(s=new Set(s)),s.forEach((function(t){a.has(t)||i.push(t)})),i}function Mt(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function Pt(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="baseline",t.textAlign="left"}var Ot=function(){function t(){Object(c.a)(this,t),this.props={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:mt,fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12},this._key=null,this._atlas=null}return Object(f.a)(t,[{key:"texture",get:function(){return this._atlas}},{key:"mapping",get:function(){return this._atlas&&this._atlas.mapping}},{key:"scale",get:function(){return 1.2}},{key:"setProps",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xt.forEach((function(n){n in e&&(t.props[n]=e[n])}));var n=this._key;this._key=this._getKey();var i=wt(this._key,this.props.characterSet),r=_t.get(this._key);if(r&&0===i.length)this._key!==n&&(this._atlas=r);else{var a=this._generateFontAtlas(this._key,i,r);this._atlas=a,_t.set(this._key,a)}}},{key:"_generateFontAtlas",value:function(t,e,n){var i=this.props,r=i.fontFamily,a=i.fontWeight,s=i.fontSize,o=i.buffer,u=i.sdf,l=i.radius,h=i.cutoff,c=n&&n.data;c||((c=document.createElement("canvas")).width=1024);var f=c.getContext("2d");Pt(f,r,s,a);var d=function(t){var e,n=t.characterSet,i=t.getFontWidth,r=t.fontHeight,a=t.buffer,s=t.maxCanvasWidth,o=t.mapping,u=void 0===o?{}:o,l=t.xOffset,h=void 0===l?0:l,c=t.yOffset,f=void 0===c?0:c,d=0,p=h,v=0,y=st(n);try{for(y.s();!(e=y.n()).done;){var b=e.value;if(!u[b]){var g=i(b,v++);p+g+2*a>s&&(p=0,d++),u[b]={x:p+a,y:f+d*(r+2*a)+a,width:g,height:r},p+=g+2*a}}}catch(x){y.e(x)}finally{y.f()}var m,_=r+2*a;return{mapping:u,xOffset:p,yOffset:f+d*_,canvasHeight:(m=f+(d+1)*_,Math.pow(2,Math.ceil(Math.log2(m))))}}(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({getFontWidth:function(t){return f.measureText(t).width},fontHeight:1.2*s,buffer:o,characterSet:e,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),p=d.mapping,v=d.canvasHeight,y=d.xOffset,g=d.yOffset;if(c.height!==v){var m=f.getImageData(0,0,c.width,c.height);c.height=v,f.putImageData(m,0,0)}if(Pt(f,r,s,a),u){var _,x=new at.a(s,o,l,h,r,a),w=f.getImageData(0,0,x.size,x.size),M=yt(e);try{for(M.s();!(_=M.n()).done;){var P=_.value;Mt(x.draw(P),w),f.putImageData(w,p[P].x-o,p[P].y+o)}}catch(C){M.e(C)}finally{M.f()}}else{var O,k=yt(e);try{for(k.s();!(O=k.n()).done;){var S=O.value;f.fillText(S,p[S].x,p[S].y+.9*s)}}catch(C){k.e(C)}finally{k.f()}}return{xOffset:y,yOffset:g,mapping:p,data:c,width:c.width,height:c.height}}},{key:"_getKey",value:function(){var t=this.props,e=t.fontFamily,n=t.fontWeight,i=t.fontSize,r=t.buffer,a=t.sdf,s=t.radius,o=t.cutoff;return a?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(s," ").concat(o):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}]),t}();function kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var At={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0]},getPosition:{type:"accessor",value:function(t){return t.position}},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},It=function(t){Object(p.a)(n,t);var e=Ct(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"getShaders",value:function(){return Object(d.a)(Object(y.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec2 padding;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + padding * (positions * 2.0 - 1.0);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[O.a,k.a]})}},{key:"initializeState",value:function(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}},{key:"updateState",value:function(t){var e=t.props,i=t.oldProps,r=t.changeFlags;if(Object(d.a)(Object(y.a)(n.prototype),"updateState",this).call(this,{props:e,oldProps:i,changeFlags:r}),r.extensionsChanged){var a,s=this.context.gl;null===(a=this.state.model)||void 0===a||a.delete(),this.state.model=this._getModel(s),this.getAttributeManager().invalidateAll()}}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,i=this.props,r=i.billboard,a=i.sizeScale,s=i.sizeUnits,o=i.sizeMinPixels,u=i.sizeMaxPixels,l=i.padding,h=i.getLineWidth,c="pixels"===s?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({billboard:r,stroked:Boolean(h),padding:l,sizeScale:a*c,sizeMinPixels:o,sizeMaxPixels:u}).draw()}},{key:"_getModel",value:function(t){return new C.a(t,St(St({},this.getShaders()),{},{id:this.props.id,geometry:new A.a({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0}))}}]),n}(S.a);function jt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}It.layerName="TextBackgroundLayer",It.defaultProps=At;var Tt={fontSize:64,buffer:4,sdf:!1,radius:12,cutoff:.25,smoothing:.1},Rt={start:1,middle:0,end:-1},Nt={top:1,center:0,bottom:-1},Dt=[0,0,0,255],qt=["fontSize","buffer","sdf","radius","cutoff"],Ut={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Dt},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0]},characterSet:{type:"object",value:mt},fontFamily:"Monaco, monospace",fontWeight:"normal",lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Dt},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:function(t){return t.text}},getPosition:{type:"accessor",value:function(t){return t.position}},getColor:{type:"accessor",value:Dt},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},Bt=function(t){Object(p.a)(n,t);var e=zt(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"initializeState",value:function(){this.state={styleVersion:0,fontAtlasManager:new Ot}}},{key:"updateState",value:function(t){var e=t.props,n=t.oldProps,i=t.changeFlags,r=i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText),a=this.state.characterSet;r&&this._updateText();var s=a!==this.state.characterSet||this._fontChanged(n,e);s&&this._updateFontAtlas(n,e),(s||e.lineHeight!==n.lineHeight||e.wordBreak!==n.wordBreak||e.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}},{key:"getPickingInfo",value:function(t){var e=t.info;return e.object=e.index>=0?this.props.data[e.index]:null,e}},{key:"_updateFontAtlas",value:function(t,e){var n=e.fontSettings,i=e.fontFamily,r=e.fontWeight,a=this.state,s=a.fontAtlasManager,o=a.characterSet;s.setProps(Ft(Ft(Ft({},Tt),n),{},{characterSet:o,fontFamily:i,fontWeight:r}))}},{key:"_fontChanged",value:function(t,e){if(t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight)return!0;if(t.fontSettings===e.fontSettings)return!1;var n=t.fontSettings||{},i=e.fontSettings||{};return qt.some((function(t){return n[t]!==i[t]}))}},{key:"_updateText",value:function(){var t,e=this.props,n=e.data,i=e.characterSet,r=n.attributes&&n.attributes.getText,a=this.props.getText,s=n.startIndices,o="auto"===i&&new Set;if(r&&s){var u=function(t){var e=t.value,n=t.length,i=t.stride,r=t.offset,a=t.startIndices,s=t.characterSet,o=e.BYTES_PER_ELEMENT,u=i?i/o:1,l=r?r/o:0,h=a[n]||Math.ceil((e.length-l)/u),c=s&&new Set,f=new Array(n),d=e;if(u>1||l>0){d=new e.constructor(h);for(var p=0;p<h;p++)d[p]=e[p*u+l]}for(var v=0;v<n;v++){var y=a[v],b=a[v+1]||h,g=d.subarray(y,b);f[v]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c){var m,_=st(c);try{for(_.s();!(m=_.n()).done;){var x=m.value;s.add(String.fromCodePoint(x))}}catch(w){_.e(w)}finally{_.f()}}return{texts:f,characterCount:h}}(Ft(Ft({},ArrayBuffer.isView(r)?{value:r}:r),{},{length:n.length,startIndices:s,characterSet:o})),l=u.texts;t=u.characterCount,a=function(t,e){var n=e.index;return l[n]}}else{var h=Object(z.a)(n),c=h.iterable,f=h.objectInfo;s=[0],t=0;var d,p=jt(c);try{for(p.s();!(d=p.n()).done;){var v=d.value;f.index++;var y=Array.from(a(v,f)||"");o&&y.forEach(o.add,o),t+=y.length,s.push(t)}}catch(b){p.e(b)}finally{p.f()}}this.setState({getText:a,startIndices:s,numInstances:t,characterSet:o||i})}},{key:"getBoundingRect",value:function(t,e){var n=this.state.fontAtlasManager.mapping,i=this.state.getText,r=this.props,a=r.wordBreak,s=r.maxWidth,o=r.lineHeight,u=r.getTextAnchor,l=r.getAlignmentBaseline,h=pt(i(t,e)||"",o,a,s,n),c=Object(Y.a)(h.size,2),f=c[0],d=c[1];return[(Rt["function"==typeof u?u(t,e):u]-1)*f/2,(Nt["function"==typeof l?l(t,e):l]-1)*d/2,f,d]}},{key:"getIconOffsets",value:function(t,e){for(var n=this.state.fontAtlasManager.mapping,i=this.state.getText,r=this.props,a=r.wordBreak,s=r.maxWidth,o=r.lineHeight,u=r.getTextAnchor,l=r.getAlignmentBaseline,h=pt(i(t,e)||"",o,a,s,n),c=h.x,f=h.y,d=h.rowWidth,p=Object(Y.a)(h.size,2),v=p[0],y=p[1],b=Rt["function"==typeof u?u(t,e):u],g=Nt["function"==typeof l?l(t,e):l],m=c.length,_=new Array(2*m),x=0,w=0;w<m;w++){var M=(1-b)*(v-d[w])/2;_[x++]=(b-1)*v/2+M+c[w],_[x++]=(g-1)*y/2+f[w]}return _}},{key:"renderLayers",value:function(){var t=this.state,e=t.startIndices,n=t.numInstances,i=t.getText,r=t.fontAtlasManager,a=r.scale,s=r.texture,o=r.mapping,u=t.styleVersion,l=this.props,h=l.data,c=l._dataDiff,f=l.getPosition,d=l.getColor,p=l.getSize,v=l.getAngle,y=l.getPixelOffset,b=l.getBackgroundColor,g=l.getBorderColor,m=l.getBorderWidth,_=l.backgroundPadding,x=l.background,w=l.billboard,M=l.fontSettings,P=l.outlineWidth,O=l.outlineColor,k=l.sizeScale,S=l.sizeUnits,C=l.sizeMinPixels,A=l.sizeMaxPixels,I=l.transitions,j=l.updateTriggers,E=this.getSubLayerClass("characters",it),L=this.getSubLayerClass("background",It);return[x&&new L({getFillColor:b,getLineColor:g,getLineWidth:m,padding:_,getPosition:f,getSize:p,getAngle:v,getPixelOffset:y,billboard:w,sizeScale:k/this.state.fontAtlasManager.props.fontSize,sizeUnits:S,sizeMinPixels:C,sizeMaxPixels:A,transitions:I&&{getPosition:I.getPosition,getAngle:I.getAngle,getSize:I.getSize,getFillColor:I.getBackgroundColor,getLineColor:I.getBorderColor,getLineWidth:I.getBorderWidth,getPixelOffset:I.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:j.getPosition,getAngle:j.getAngle,getSize:j.getSize,getFillColor:j.getBackgroundColor,getLineColor:j.getBorderColor,getLineWidth:j.getBorderWidth,getPixelOffset:j.getPixelOffset,getBoundingRect:{getText:j.getText,getTextAnchor:j.getTextAnchor,getAlignmentBaseline:j.getAlignmentBaseline,styleVersion:u}}}),{data:h.attributes?{length:h.length,attributes:h.attributes.background||{}}:h,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect.bind(this)}),new E({sdf:M.sdf,smoothing:Number.isFinite(M.smoothing)?M.smoothing:Tt.smoothing,outlineWidth:P,outlineColor:O,iconAtlas:s,iconMapping:o,getPosition:f,getColor:d,getSize:p,getAngle:v,getPixelOffset:y,billboard:w,sizeScale:k*a,sizeUnits:S,sizeMinPixels:C*a,sizeMaxPixels:A*a,transitions:I&&{getPosition:I.getPosition,getAngle:I.getAngle,getColor:I.getColor,getSize:I.getSize,getPixelOffset:I.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:j.getText,getPosition:j.getPosition,getAngle:j.getAngle,getColor:j.getColor,getSize:j.getSize,getPixelOffset:j.getPixelOffset,getIconOffsets:{getText:j.getText,getTextAnchor:j.getTextAnchor,getAlignmentBaseline:j.getAlignmentBaseline,styleVersion:u}}}),{data:h,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets.bind(this),getIcon:i})]}}]),n}(m.a);Bt.layerName="TextLayer",Bt.defaultProps=Ut;var Gt=n("b0ih"),Wt=n("VMBB"),Vt=n("sc/6");function Ht(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t);var n=e.attributes,i=void 0===n?{}:n;this.typedArrayManager=Gt.a,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=i,this.opts=e,this.updateGeometry(e),Object.seal(this)}return Object(f.a)(t,[{key:"updateGeometry",value:function(t){Object.assign(this.opts,t);var e=this.opts,n=e.data,i=e.buffers,r=void 0===i?{}:i,a=e.getGeometry,s=e.geometryBuffer,o=e.positionFormat,u=e.dataChanged,l=e.normalize,h=void 0===l||l;if(this.data=n,this.getGeometry=a,this.positionSize=s&&s.size||("XY"===o?2:3),this.buffers=r,this.normalize=h,s&&(Object(Wt.a)(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),h||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(u)){var c,f=Ht(u);try{for(f.s();!(c=f.n()).done;){var d=c.value;this._rebuildGeometry(d)}}catch(p){f.e(p)}finally{f.f()}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(t){var e=t.startRow,n=t.endRow;this._rebuildGeometry({startRow:e,endRow:n})}},{key:"normalizeGeometry",value:function(t){return t}},{key:"updateGeometryAttributes",value:function(t,e,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(t){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(t){var e=t.value||t;return Object(Wt.a)(ArrayBuffer.isView(e)),Object(z.b)(e,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(t,e){var n=this.attributes,i=this.buffers,r=this._attributeDefs,a=this.typedArrayManager;for(var s in r)if(s in i)a.release(n[s]),n[s]=null;else{var o=r[s];o.copy=e,n[s]=a.allocate(n[s],t,o)}}},{key:"_forEachGeometry",value:function(t,e,n){var i,r=this.data,a=this.getGeometry,s=Object(z.a)(r,e,n),o=s.iterable,u=s.objectInfo,l=Ht(o);try{for(l.s();!(i=l.n()).done;){var h=i.value;u.index++,t(a(h,u),u.index)}}catch(c){l.e(c)}finally{l.f()}}},{key:"_rebuildGeometry",value:function(t){var e=this;if(this.data&&this.getGeometry){var n=this.indexStarts,i=this.vertexStarts,r=this.instanceCount,a=this.data,s=this.geometryBuffer,o=t||{},u=o.startRow,l=void 0===u?0:u,h=o.endRow,c=void 0===h?1/0:h,f={};if(t||(n=[0],i=[0]),this.normalize||!s)this._forEachGeometry((function(t,n){t=e.normalizeGeometry(t),f[n]=t,i[n+1]=i[n]+e.getGeometrySize(t)}),l,c),r=i[i.length-1];else if(s.buffer instanceof Vt.a){var d=s.stride||4*this.positionSize;i=a.startIndices,r=i[a.length]||s.buffer.byteLength/d}else{var p=s.value||s,v=s.stride/p.BYTES_PER_ELEMENT||this.positionSize;i=a.startIndices,r=i[a.length]||p.length/v}this._allocate(r,Boolean(t)),this.indexStarts=n,this.vertexStarts=i,this.instanceCount=r;var y={};this._forEachGeometry((function(t,a){t=f[a]||t,y.vertexStart=i[a],y.indexStart=n[a];var s=a<i.length-1?i[a+1]:r;y.geometrySize=s-i[a],y.geometryIndex=a,e.updateGeometryAttributes(t,y)}),l,c),this.vertexCount=n[n.length-1]}}}]),t}(),Xt=(n("a3TU"),1),Kt=-1;function Jt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Yt(t,n);return i!==e&&(te(t,n),!0)}function Yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Math.sign($t(t,e))}function $t(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.start,i=void 0===n?0:n,r=e.end,a=void 0===r?t.length:r,s=e.size||2,o=0,u=i,l=a-s;u<a;u+=s)o+=(t[u]-t[l])*(t[u+1]+t[l+1]),l=u;return o/2}function te(t,e){for(var n=e.start,i=void 0===n?0:n,r=e.end,a=void 0===r?t.length:r,s=e.size,o=void 0===s?2:s,u=(a-i)/o,l=Math.floor(u/2),h=0;h<l;++h)for(var c=i+h*o,f=i+(u-1-h)*o,d=0;d<o;++d){var p=t[c+d];t[c+d]=t[f+d],t[f+d]=p}}function ee(t,e){var n=e.length,i=t.length;if(i>0){for(var r=!0,a=0;a<n;a++)if(t[i-n+a]!==e[a]){r=!1;break}if(r)return!1}for(var s=0;s<n;s++)t[i+s]=e[s];return!0}function ne(t,e){for(var n=e.length,i=0;i<n;i++)t[i]=e[i]}function ie(t,e,n,i){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=i+e*n,s=0;s<n;s++)r[s]=t[a+s];return r}function re(t,e,n,i){var r,a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(8&n)r=(i[3]-t[1])/(e[1]-t[1]),a=3;else if(4&n)r=(i[1]-t[1])/(e[1]-t[1]),a=1;else if(2&n)r=(i[2]-t[0])/(e[0]-t[0]),a=2;else{if(!(1&n))return null;r=(i[0]-t[0])/(e[0]-t[0]),a=0}for(var o=0;o<t.length;o++)s[o]=(1&a)===o?i[a]:r*(e[o]-t[o])+t[o];return s}function ae(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function se(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.size,a=void 0===r?2:r,s=i.broken,o=void 0!==s&&s,u=i.gridResolution,l=void 0===u?10:u,h=i.gridOffset,c=void 0===h?[0,0]:h,f=i.startIndex,d=void 0===f?0:f,p=i.endIndex,v=void 0===p?t.length:p,y=(v-d)/a,b=[],g=[b],m=ie(t,0,a,d),_=he(m,l,c,[]),x=[];ee(b,m);for(var w=1;w<y;w++){for(n=ae(e=ie(t,w,a,d,e),_);n;){re(m,e,n,_,x);var M=ae(x,_);M&&(re(m,x,M,_,x),n=M),ee(b,x),ne(m,x),ce(_,l,n),o&&b.length>a&&(b=[],g.push(b),ee(b,m)),n=ae(e,_)}ee(b,e),ne(m,e)}return o?g:g[0]}function oe(t,e){for(var n=0;n<e.length;n++)t.push(e[n]);return t}function ue(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return[];for(var i=n.size,r=void 0===i?2:i,a=n.gridResolution,s=void 0===a?10:a,o=n.gridOffset,u=void 0===o?[0,0]:o,l=n.edgeTypes,h=void 0!==l&&l,c=[],f=[{pos:t,types:h&&new Array(t.length/r).fill(1),holes:e||[]}],d=[[],[]],p=[];f.length;){var v=f.shift(),y=v.pos,b=v.types,g=v.holes;fe(y,r,g[0]||y.length,d),p=he(d[0],s,u,p);var m=ae(d[1],p);if(m){var _=le(y,b,r,0,g[0]||y.length,p,m),x={pos:_[0].pos,types:_[0].types,holes:[]},w={pos:_[1].pos,types:_[1].types,holes:[]};f.push(x,w);for(var M=0;M<g.length;M++)(_=le(y,b,r,g[M],g[M+1]||y.length,p,m))[0]&&(x.holes.push(x.pos.length),x.pos=oe(x.pos,_[0].pos),h&&(x.types=oe(x.types,_[0].types))),_[1]&&(w.holes.push(w.pos.length),w.pos=oe(w.pos,_[1].pos),h&&(w.types=oe(w.types,_[1].types)))}else{var P={positions:y};h&&(P.edgeTypes=b),g.length&&(P.holeIndices=g),c.push(P)}}return c}function le(t,e,n,i,r,a,s){for(var o,u,l,h=(r-i)/n,c=[],f=[],d=[],p=[],v=[],y=ie(t,h-1,n,i),b=Math.sign(8&s?y[1]-a[3]:y[0]-a[2]),g=e&&e[h-1],m=0,_=0,x=0;x<h;x++)o=ie(t,x,n,i,o),u=Math.sign(8&s?o[1]-a[3]:o[0]-a[2]),l=e&&e[i/n+x],u&&b&&b!==u&&(re(y,o,s,a,v),ee(c,v)&&d.push(g),ee(f,v)&&p.push(g)),u<=0?(ee(c,o)&&d.push(l),m-=u):d.length&&(d[d.length-1]=0),u>=0?(ee(f,o)&&p.push(l),_+=u):p.length&&(p[p.length-1]=0),ne(y,o),b=u,g=l;return[m?{pos:c,types:e&&d}:null,_?{pos:f,types:e&&p}:null]}function he(t,e,n,i){var r=Math.floor((t[0]-n[0])/e)*e+n[0],a=Math.floor((t[1]-n[1])/e)*e+n[1];return i[0]=r,i[1]=a,i[2]=r+e,i[3]=a+e,i}function ce(t,e,n){8&n?(t[1]+=e,t[3]+=e):4&n?(t[1]-=e,t[3]-=e):2&n?(t[0]+=e,t[2]+=e):1&n&&(t[0]-=e,t[2]-=e)}function fe(t,e,n,i){for(var r=1/0,a=-1/0,s=1/0,o=-1/0,u=0;u<n;u+=e){var l=t[u],h=t[u+1];r=l<r?l:r,a=l>a?l:a,s=h<s?h:s,o=h>o?h:o}return i[0][0]=r,i[0][1]=s,i[1][0]=a,i[1][1]=o,i}function de(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ve(t,e,n,i){for(var r=-1,a=-1,s=n+1;s<i;s+=e){var o=Math.abs(t[s]);o>r&&(r=o,a=s-1)}return a}function ye(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:85.051129,a=t[n],s=t[i-e];if(Math.abs(a-s)>180){var o=ie(t,0,e,n);o[0]+=360*Math.round((s-a)/360),ee(t,o),o[1]=Math.sign(o[1])*r,ee(t,o),o[0]=a,ee(t,o)}}function be(t,e,n,i){for(var r,a=t[0],s=n;s<i;s+=e){var o=(r=t[s])-a;(o>180||o<-180)&&(r-=360*Math.round(o/360)),t[s]=a=r}}function ge(t,e){for(var n,i=t.length/e,r=0;r<i&&((n=t[r*e])+180)%360==0;r++);var a=360*-Math.round(n/360);if(0!==a)for(var s=0;s<i;s++)t[s*e]+=a}function me(t,e,n,i){var r=t;if(Array.isArray(t[0])){var a=t.length*e;r=new Array(a);for(var s=0;s<t.length;s++)for(var o=0;o<e;o++)r[s*e+o]=t[s][o]||0}return n?se(r,{size:e,gridResolution:n}):i?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.size,i=void 0===n?2:n,r=e.startIndex,a=void 0===r?0:r,s=e.endIndex,o=void 0===s?t.length:s,u=e.normalize,l=void 0===u||u,h=t.slice(a,o);be(h,i,0,o-a);var c=se(h,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(l){var f,d=de(c);try{for(d.s();!(f=d.n()).done;){var p=f.value;ge(p,i)}}catch(v){d.e(v)}finally{d.f()}}return c}(r,{size:e}):r}function _e(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return xe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function we(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?we(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var Oe=function(t){Object(p.a)(n,t);var e=Pe(n);function n(t){return Object(c.a)(this,n),e.call(this,Me(Me({},t),{},{attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}}))}return Object(f.a)(n,[{key:"getGeometryFromBuffer",value:function(t){return this.normalize?Object(d.a)(Object(y.a)(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"normalizeGeometry",value:function(t){return this.normalize?me(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}},{key:"get",value:function(t){return this.attributes[t]}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t[0])){var e,n=0,i=_e(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n+=this.getGeometrySize(r)}}catch(s){i.e(s)}finally{i.f()}return n}var a=this.getPathLength(t);return a<2?0:this.isClosed(t)?a<3?0:a+2:a}},{key:"updateGeometryAttributes",value:function(t,e){if(0!==e.geometrySize)if(t&&Array.isArray(t[0])){var n,i=_e(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.getGeometrySize(r);e.geometrySize=a,this.updateGeometryAttributes(r,e),e.vertexStart+=a}}catch(s){i.e(s)}finally{i.f()}}else this._updateSegmentTypes(t,e),this._updatePositions(t,e)}},{key:"_updateSegmentTypes",value:function(t,e){var n=this.attributes.segmentTypes,i=this.isClosed(t),r=e.vertexStart,a=e.geometrySize;n.fill(0,r,r+a),i?(n[r]=4,n[r+a-2]=4):(n[r]+=1,n[r+a-2]+=2),n[r+a-1]=4}},{key:"_updatePositions",value:function(t,e){var n=this.attributes.positions;if(n)for(var i=e.vertexStart,r=e.geometrySize,a=new Array(3),s=i,o=0;o<r;s++,o++)this.getPointOnPath(t,o,a),n[3*s]=a[0],n[3*s+1]=a[1],n[3*s+2]=a[2]}},{key:"getPathLength",value:function(t){return t.length/this.positionSize}},{key:"getPointOnPath",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=this.positionSize;e*i>=t.length&&(e+=1-t.length/i);var r=e*i;return n[0]=t[r],n[1]=t[r+1],n[2]=3===i&&t[r+2]||0,n}},{key:"isClosed",value:function(t){if(!this.normalize)return this.opts.loop;var e=this.positionSize,n=t.length-e;return t[0]===t[n]&&t[1]===t[n+1]&&(2===e||t[2]===t[n+2])}}]),n}(Qt);function ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var Ae=[0,0,0,255],Ie={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(t){return t.path}},getColor:{type:"accessor",value:Ae},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},je={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},Ee=function(t){Object(p.a)(n,t);var e=Ce(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"getShaders",value:function(){return Object(d.a)(Object(y.a)(n.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float capType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  vec2 width\n) {\n  bool isEnd = positions.x > 0.0;\n  float sideOfPath = positions.y;\n  float isJoint = float(sideOfPath == 0.0);\n\n  vec3 deltaA3 = (currPoint - prevPoint);\n  vec3 deltaB3 = (nextPoint - currPoint);\n\n  mat3 rotationMatrix;\n  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);\n  if (needsRotation) {\n    deltaA3 = deltaA3 * rotationMatrix;\n    deltaB3 = deltaB3 * rotationMatrix;\n  }\n  vec2 deltaA = deltaA3.xy / width;\n  vec2 deltaB = deltaB3.xy / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = dirA + dirB;\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 dir = isEnd ? dirA : dirB;\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\n  float cornerPosition = sideOfPath * turnDirection;\n\n  float miterSize = 1.0 / max(sinHalfA, EPSILON);\n  miterSize = mix(\n    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\n    miterSize,\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n    * (sideOfPath + isJoint * turnDirection);\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  if (isCap) {\n    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);\n    vJointType = capType;\n  } else {\n    vJointType = jointType;\n  }\n  vPathLength = L;\n  vCornerOffset = offsetVec;\n  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);\n  vMiterLength = isCap ? isJoint : vMiterLength;\n\n  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\n  vPathPosition = vec2(\n    dot(offsetFromStartOfPath, perp),\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(offsetVec * width * isValid, 0.0);\n\n  if (needsRotation) {\n    offset = rotationMatrix * offset;\n  }\n  return currPoint + offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n  vec3 width;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    width = vec3(widthPixels, 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w,\n      project_pixel_size_to_clipspace(width.xy)\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    width = vec3(project_pixel_size(widthPixels), 0.0);\n    DECKGL_FILTER_SIZE(width, geometry);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition, width.xy),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\nvarying float vJointType;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n\n  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\n    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\n      discard;\n    }\n    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {\n      discard;\n    }\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[O.a,k.a]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var t=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:je,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:je,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:je,defaultValue:Ae},instancePickingColors:{size:3,type:5121,accessor:function(e,n){var i=n.index,r=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:i,r)}}}),this.setState({pathTesselator:new Oe({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&g.a.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.oldProps,i=t.props,r=t.changeFlags;Object(d.a)(Object(y.a)(n.prototype),"updateState",this).call(this,{props:i,oldProps:e,changeFlags:r});var a=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){var s=this.state.pathTesselator,o=i.data.attributes||{};s.updateGeometry({data:i.data,geometryBuffer:o.getPath,buffers:o,normalize:!i._pathType,loop:"loop"===i._pathType,getGeometry:i.getPath,positionFormat:i.positionFormat,wrapLongitude:i.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||a.invalidateAll()}if(r.extensionsChanged){var u,l=this.context.gl;null===(u=this.state.model)||void 0===u||u.delete(),this.state.model=this._getModel(l),a.invalidateAll()}}},{key:"getPickingInfo",value:function(t){var e=Object(d.a)(Object(y.a)(n.prototype),"getPickingInfo",this).call(this,t),i=e.index,r=this.props.data;return r[0]&&r[0].__source&&(e.object=r.find((function(t){return t.__source.index===i}))),e}},{key:"disablePickingIndex",value:function(t){var e=this.props.data;if(e[0]&&e[0].__source)for(var n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.viewport,i=this.props,r=i.jointRounded,a=i.capRounded,s=i.billboard,o=i.miterLimit,u=i.widthUnits,l=i.widthScale,h=i.widthMinPixels,c=i.widthMaxPixels,f="pixels"===u?n.metersPerPixel:1;this.state.model.setUniforms(e).setUniforms({jointType:Number(r),capType:Number(a),billboard:s,widthScale:l*f,miterLimit:o,widthMinPixels:h,widthMaxPixels:c}).draw()}},{key:"_getModel",value:function(t){return new C.a(t,Se(Se({},this.getShaders()),{},{id:this.props.id,geometry:new A.a({drawMode:4,attributes:{indices:new Uint16Array([0,1,2,1,4,2,1,3,4,3,5,4]),positions:{value:new Float32Array([0,0,0,-1,0,1,1,-1,1,1,1,0]),size:2}}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateSegmentTypes",value:function(t){var e=this.state.pathTesselator;t.startIndices=e.vertexStarts,t.value=e.get("segmentTypes")}}]),n}(S.a);Ee.layerName="PathLayer",Ee.defaultProps=Ie;var Le=n("DAeo"),Fe=n("V3d6"),ze=n("d3kR"),Te=n("tMmZ"),Re=n("VmRL"),Ne=n.n(Re);function De(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Ue=Xt,Be=Kt,Ge={isClosed:!0};function We(t,e,n,i){for(var r=0;r<e;r++)if(t[n+r]!==t[i-e+r])return!1;return!0}function Ve(t,e,n,i,r){for(var a=e,s=n.length,o=0;o<s;o++)for(var u=0;u<i;u++)t[a++]=n[o][u]||0;if(!function(t){var e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}(n))for(var l=0;l<i;l++)t[a++]=n[0][l]||0;return Ge.start=e,Ge.end=a,Ge.size=i,Jt(t,r,Ge),a}function He(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,o=(a=a||n.length)-r;if(o<=0)return e;for(var u=e,l=0;l<o;l++)t[u++]=n[r+l];if(!We(n,i,r,a))for(var h=0;h<i;h++)t[u++]=n[r+h];return Ge.start=e,Ge.end=u,Ge.size=i,Jt(t,s,Ge),u}function Ze(t,e){!function(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}(t);var n=[],i=[];if(t.positions){var r=t,a=r.positions,s=r.holeIndices;if(s){for(var o=0,u=0;u<=s.length;u++)o=He(n,o,a,e,s[u-1],s[u],0===u?Ue:Be),i.push(o);return i.pop(),{positions:n,holeIndices:i}}t=a}if(Number.isFinite(t[0]))return He(n,0,t,e,0,n.length,Ue),n;if(!function(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}(t)){var l,h=0,c=De(t.entries());try{for(c.s();!(l=c.n()).done;){var f=Object(Y.a)(l.value,2),d=f[0];h=Ve(n,h,f[1],e,0===d?Ue:Be),i.push(h)}}catch(p){c.e(p)}finally{c.f()}return i.pop(),{positions:n,holeIndices:i}}return Ve(n,0,t,e,Ue),n}function Qe(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Ke(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ke(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ye(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var $e=function(t){Object(p.a)(n,t);var e=Ye(n);function n(t){Object(c.a)(this,n);var i=t.fp64,r=t.IndexType,a=void 0===r?Uint32Array:r;return e.call(this,Je(Je({},t),{},{attributes:{positions:{size:3,type:i?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:a,size:1}}}))}return Object(f.a)(n,[{key:"get",value:function(t){var e=this.attributes;return"indices"===t?e.indices&&e.indices.subarray(0,this.vertexCount):e[t]}},{key:"updateGeometry",value:function(t){Object(d.a)(Object(y.a)(n.prototype),"updateGeometry",this).call(this,t);var e=this.buffers.indices;e&&(this.vertexCount=(e.value||e).length)}},{key:"normalizeGeometry",value:function(t){if(this.normalize){if(t=Ze(t,this.positionSize),this.opts.resolution)return ue(t.positions||t,t.holeIndices,{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0});if(this.opts.wrapLongitude)return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.size,r=void 0===i?2:i,a=n.normalize,s=void 0===a||a,o=n.edgeTypes,u=void 0!==o&&o;e=e||[];for(var l=[],h=[],c=0,f=0,d=0;d<=e.length;d++){for(var p=e[d]||t.length,v=f,y=ve(t,r,c,p),b=y;b<p;b++)l[f++]=t[b];for(var g=c;g<y;g++)l[f++]=t[g];be(l,r,v,f),ye(l,r,v,f,n.maxLatitude),c=p,h[d]=f}h.pop();var m=ue(l,h,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:u});if(s){var _,x=de(m);try{for(x.s();!(_=x.n()).done;){var w=_.value;ge(w.positions,r)}}catch(M){x.e(M)}finally{x.f()}}return m}(t.positions||t,t.holeIndices,{size:this.positionSize,maxLatitude:86,edgeTypes:!0})}return t}},{key:"getGeometrySize",value:function(t){if(Array.isArray(t)&&!Number.isFinite(t[0])){var e,n=0,i=Qe(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n+=this.getGeometrySize(r)}}catch(a){i.e(a)}finally{i.f()}return n}return(t.positions||t).length/this.positionSize}},{key:"getGeometryFromBuffer",value:function(t){return this.normalize||!this.buffers.indices?Object(d.a)(Object(y.a)(n.prototype),"getGeometryFromBuffer",this).call(this,t):function(){return null}}},{key:"updateGeometryAttributes",value:function(t,e){if(Array.isArray(t)&&!Number.isFinite(t[0])){var n,i=Qe(t);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=this.getGeometrySize(r);e.geometrySize=a,this.updateGeometryAttributes(r,e),e.vertexStart+=a,e.indexStart=this.indexStarts[e.geometryIndex+1]}}catch(s){i.e(s)}finally{i.f()}}else this._updateIndices(t,e),this._updatePositions(t,e),this._updateVertexValid(t,e)}},{key:"_updateIndices",value:function(t,e){var n=e.geometryIndex,i=e.vertexStart,r=e.indexStart,a=this.attributes,s=this.indexStarts,o=this.typedArrayManager,u=a.indices;if(u){var l=r,h=function(t,e,n){var i=null;t.holeIndices&&(i=t.holeIndices.map((function(t){return t/e})));var r=t.positions||t;if(n){var a=r.length;r=r.slice();for(var s=[],o=0;o<a;o+=e){s[0]=r[o],s[1]=r[o+1];var u=n(s);r[o]=u[0],r[o+1]=u[1]}}return Ne()(r,i,e)}(t,this.positionSize,this.opts.preproject);u=o.allocate(u,r+h.length,{copy:!0});for(var c=0;c<h.length;c++)u[l++]=h[c]+i;s[n+1]=r+h.length,a.indices=u}}},{key:"_updatePositions",value:function(t,e){var n=e.vertexStart,i=e.geometrySize,r=this.attributes.positions,a=this.positionSize;if(r)for(var s=t.positions||t,o=n,u=0;u<i;o++,u++){var l=s[u*a],h=s[u*a+1],c=a>2?s[u*a+2]:0;r[3*o]=l,r[3*o+1]=h,r[3*o+2]=c}}},{key:"_updateVertexValid",value:function(t,e){var n=e.vertexStart,i=e.geometrySize,r=this.attributes.vertexValid,a=this.positionSize,s=t&&t.holeIndices;if(t&&t.edgeTypes?r.set(t.edgeTypes,n):r.fill(1,n,n+i),s)for(var o=0;o<s.length;o++)r[n+s[o]/a-1]=0;r[n+i-1]=0}}]),n}(Qt),tn="\nattribute vec2 vertexPositions;\nattribute float vertexValid;\n\nuniform bool extruded;\nuniform bool isWireframe;\nuniform float elevationScale;\nuniform float opacity;\n\nvarying vec4 vColor;\n\nstruct PolygonProps {\n  vec4 fillColors;\n  vec4 lineColors;\n  vec3 positions;\n  vec3 nextPositions;\n  vec3 pickingColors;\n  vec3 positions64Low;\n  vec3 nextPositions64Low;\n  float elevations;\n};\n\nvec3 project_offset_normal(vec3 vector) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    return normalize(vector * project_uCommonUnitsPerWorldUnit);\n  }\n  return project_normal(vector);\n}\n\nvoid calculatePosition(PolygonProps props) {\n#ifdef IS_SIDE_VERTEX\n  if(vertexValid < 0.5){\n    gl_Position = vec4(0.);\n    return;\n  }\n#endif\n\n  vec3 pos;\n  vec3 pos64Low;\n  vec3 normal;\n  vec4 colors = isWireframe ? props.lineColors : props.fillColors;\n\n  geometry.worldPosition = props.positions;\n  geometry.worldPositionAlt = props.nextPositions;\n  geometry.pickingColor = props.pickingColors;\n\n#ifdef IS_SIDE_VERTEX\n  pos = mix(props.positions, props.nextPositions, vertexPositions.x);\n  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);\n#else\n  pos = props.positions;\n  pos64Low = props.positions64Low;\n#endif\n\n  if (extruded) {\n    pos.z += props.elevations * vertexPositions.y * elevationScale;\n\n#ifdef IS_SIDE_VERTEX\n    normal = vec3(\n      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),\n      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),\n      0.0);\n    normal = project_offset_normal(normal);\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n    geometry.normal = normal;\n  }\n\n  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  if (extruded) {\n    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);\n    vColor = vec4(lightColor, colors.a * opacity);\n  } else {\n    vColor = vec4(colors.rgb, colors.a * opacity);\n  }\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",en="#define SHADER_NAME solid-polygon-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute float elevations;\nattribute vec4 fillColors;\nattribute vec4 lineColors;\nattribute vec3 pickingColors;\n\n".concat(tn,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  props.positions = positions;\n  props.positions64Low = positions64Low;\n  props.elevations = elevations;\n  props.fillColors = fillColors;\n  props.lineColors = lineColors;\n  props.pickingColors = pickingColors;\n\n  calculatePosition(props);\n}\n"),nn="#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\n\n\nattribute vec3 instancePositions;\nattribute vec3 nextPositions;\nattribute vec3 instancePositions64Low;\nattribute vec3 nextPositions64Low;\nattribute float instanceElevations;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\n".concat(tn,"\n\nvoid main(void) {\n  PolygonProps props;\n\n  #if RING_WINDING_ORDER_CW == 1\n    props.positions = instancePositions;\n    props.positions64Low = instancePositions64Low;\n    props.nextPositions = nextPositions;\n    props.nextPositions64Low = nextPositions64Low;\n  #else\n    props.positions = nextPositions;\n    props.positions64Low = nextPositions64Low;\n    props.nextPositions = instancePositions;\n    props.nextPositions64Low = instancePositions64Low;\n  #endif\n  props.elevations = instanceElevations;\n  props.fillColors = instanceFillColors;\n  props.lineColors = instanceLineColors;\n  props.pickingColors = instancePickingColors;\n\n  calculatePosition(props);\n}\n");function rn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function an(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rn(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}var on=[0,0,0,255],un={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:function(t){return t.polygon}},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:on},getLineColor:{type:"accessor",value:on},material:!0},ln={enter:function(t,e){return e.length?e.subarray(e.length-t.length):t}},hn=function(t){Object(p.a)(n,t);var e=sn(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"getShaders",value:function(t){return Object(d.a)(Object(y.a)(n.prototype),"getShaders",this).call(this,{vs:"top"===t?en:nn,fs:"#define SHADER_NAME solid-polygon-layer-fragment-shader\n\nprecision highp float;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",defines:{RING_WINDING_ORDER_CW:this.props._normalize||"CCW"!==this.props._windingOrder?1:0},modules:[O.a,Le.a,k.a]})}},{key:"wrapLongitude",get:function(){return!1}},{key:"initializeState",value:function(){var t=this,e=this.context,n=e.gl,i=e.viewport,r=this.props.coordinateSystem;i.isGeospatial&&r===Fe.a.DEFAULT&&(r=Fe.a.LNGLAT),this.setState({numInstances:0,polygonTesselator:new $e({preproject:r===Fe.a.LNGLAT&&i.projectFlat,fp64:this.use64bitPositions(),IndexType:!n||Object(ze.c)(n,Te.a.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});var a=this.getAttributeManager();a.remove(["instancePickingColors"]),a.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:!0},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:ln,accessor:"getPolygon",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:!0},elevations:{size:1,transition:ln,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:ln,accessor:"getFillColor",defaultValue:on,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{alias:"colors",size:this.props.colorFormat.length,type:5121,normalized:!0,transition:ln,accessor:"getLineColor",defaultValue:on,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:function(e,n){var i=n.index,r=n.target;return t.encodePickingColor(e&&e.__source?e.__source.index:i,r)},shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}},{key:"getPickingInfo",value:function(t){var e=Object(d.a)(Object(y.a)(n.prototype),"getPickingInfo",this).call(this,t),i=e.index,r=this.props.data;return r[0]&&r[0].__source&&(e.object=r.find((function(t){return t.__source.index===i}))),e}},{key:"disablePickingIndex",value:function(t){var e=this.props.data;if(e[0]&&e[0].__source)for(var n=0;n<e.length;n++)e[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,i=n.extruded,r=n.filled,a=n.wireframe,s=n.elevationScale,o=this.state,u=o.topModel,l=o.sideModel,h=o.polygonTesselator,c=an(an({},e),{},{extruded:Boolean(i),elevationScale:s});l&&(l.setInstanceCount(h.instanceCount-1),l.setUniforms(c),a&&(l.setDrawMode(3),l.setUniforms({isWireframe:!0}).draw()),r&&(l.setDrawMode(6),l.setUniforms({isWireframe:!1}).draw())),u&&(u.setVertexCount(h.vertexCount),u.setUniforms(c).draw())}},{key:"updateState",value:function(t){Object(d.a)(Object(y.a)(n.prototype),"updateState",this).call(this,t),this.updateGeometry(t);var e,i=t.props,r=t.oldProps,a=t.changeFlags,s=this.getAttributeManager();(a.extensionsChanged||i.filled!==r.filled||i.extruded!==r.extruded)&&(null===(e=this.state.models)||void 0===e||e.forEach((function(t){return t.delete()})),this.setState(this._getModels(this.context.gl)),s.invalidateAll())}},{key:"updateGeometry",value:function(t){var e=t.props,n=(t.oldProps,t.changeFlags);if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){var i=this.state.polygonTesselator,r=e.data.attributes||{};i.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:r.getPolygon,buffers:r,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:i.instanceCount,startIndices:i.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}},{key:"_getModels",value:function(t){var e,n,i=this.props,r=i.id,a=i.filled,s=i.extruded;if(a){var o=this.getShaders("top");o.defines.NON_INSTANCED_MODEL=1,e=new C.a(t,an(an({},o),{},{id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0}))}return s&&((n=new C.a(t,an(an({},this.getShaders("side")),{},{id:"".concat(r,"-side"),geometry:new A.a({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}))).userData.excludeAttributes={indices:!0}),{models:[n,e].filter(Boolean),topModel:e,sideModel:n}}},{key:"calculateIndices",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.indexStarts,t.value=e.get("indices")}},{key:"calculatePositions",value:function(t){var e=this.state.polygonTesselator;t.startIndices=e.vertexStarts,t.value=e.get("positions")}},{key:"calculateVertexValid",value:function(t){t.value=this.state.polygonTesselator.get("vertexValid")}}]),n}(S.a);hn.layerName="SolidPolygonLayer",hn.defaultProps=un;var cn={circle:{type:J.a,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:K,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Bt,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},fn={type:Ee,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",getLineColor:"getColor",getLineWidth:"getWidth"}},dn={type:hn,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function pn(t){var e=t.type,n=t.props,i={};for(var r in n)i[r]=e.defaultProps[n[r]];return i}function vn(t,e){var n=t.props,i=n.transitions,r=n.updateTriggers,a={updateTriggers:{},transitions:i&&{getPosition:i.geometry}};for(var s in e){var o=e[s],u=t.props[s];s.startsWith("get")&&(u=t.getSubLayerAccessor(u),a.updateTriggers[o]=r[s],i&&(a.transitions[o]=i[s])),a[o]=u}return a}function yn(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},r=n.startRow,a=void 0===r?0:r,s=n.endRow,o=void 0===s?t.length:s,u=a;u<o;u++){var l=t[u];g.a.assert(l&&l.geometry,"GeoJSON does not have geometry");var h=l.geometry;if("GeometryCollection"===h.type){g.a.assert(Array.isArray(h.geometries),"GeoJSON does not have geometries array");for(var c=h.geometries,f=0;f<c.length;f++){var d=c[f];bn(d,i,e,l,u)}}else bn(h,i,e,l,u)}return i}function bn(t,e,n,i,r){var a=t.type,s=t.coordinates,o=e.pointFeatures,u=e.lineFeatures,l=e.polygonFeatures,h=e.polygonOutlineFeatures;if(function(t,e){var n=gn[t];g.a.assert(n,"Unknown GeoJSON type ".concat(t));for(;e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}(a,s))switch(a){case"Point":o.push(n({geometry:t},i,r));break;case"MultiPoint":s.forEach((function(t){o.push(n({geometry:{type:"Point",coordinates:t}},i,r))}));break;case"LineString":u.push(n({geometry:t},i,r));break;case"MultiLineString":s.forEach((function(t){u.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"Polygon":l.push(n({geometry:t},i,r)),s.forEach((function(t){h.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}));break;case"MultiPolygon":s.forEach((function(t){l.push(n({geometry:{type:"Polygon",coordinates:t}},i,r)),t.forEach((function(t){h.push(n({geometry:{type:"LineString",coordinates:t}},i,r))}))}))}else g.a.warn("".concat(a," coordinates are malformed"))()}var gn={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function mn(t){return t.geometry.coordinates}function _n(t,e,n){var i={points:{},lines:{},polygons:{},polygonsOutline:{}},r=t.points,a=t.lines,s=t.polygons,o=function(t,e){var n={points:null,lines:null,polygons:null};for(var i in n){var r=t[i].featureIds.value;n[i]=new Uint8ClampedArray(3*r.length);for(var a=[],s=0;s<r.length;s++)e(r[s],a),n[i][3*s+0]=a[0],n[i][3*s+1]=a[1],n[i][3*s+2]=a[2]}return n}(t,e);return i.points.data={length:r.positions.value.length/r.positions.size,attributes:{getPosition:r.positions,pickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},i.lines.data={length:a.pathIndices.value.length-1,startIndices:a.pathIndices.value,attributes:{getPath:a.positions,pickingColors:{size:3,value:o.lines}},properties:a.properties,numericProps:a.numericProps,featureIds:a.featureIds},i.lines._pathType="open",i.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},i.polygons._normalize=!1,s.triangles&&(i.polygons.data.attributes.indices=s.triangles.value),i.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},i.polygonsOutline._pathType="open",i}function xn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Mn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(y.a)(t);if(e){var r=Object(y.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(v.a)(this,n)}}function Pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pn(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kn=On(On(On(On(On(On({},pn(cn.circle)),pn(cn.icon)),pn(cn.text)),pn(fn)),pn(dn)),{},{stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:function(t){return t.properties.icon}},getText:{type:"accessor",value:function(t){return t.properties.text}},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}}),Sn=function(t){Object(p.a)(n,t);var e=Mn(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(f.a)(n,[{key:"initializeState",value:function(){this.state={layerProps:{},features:{}},this.props.getLineDashArray&&g.a.removed("getLineDashArray","PathStyleExtension")()}},{key:"updateState",value:function(t){var e=t.props,n=t.changeFlags;if(n.dataChanged){var i=this.props.data,r=i&&"points"in i&&"polygons"in i&&"lines"in i;this.setState({binary:r}),r?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}}},{key:"_updateStateBinary",value:function(t){var e=t.props,n=(t.changeFlags,_n(e.data,this.encodePickingColor));this.setState({layerProps:n})}},{key:"_updateStateJSON",value:function(t){var e=t.props,n=t.changeFlags,i=function(t){if(Array.isArray(t))return t;switch(g.a.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return g.a.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}(e.data),r=this.getSubLayerRow.bind(this),a={},s={};if(Array.isArray(n.dataChanged)){var o=this.state.features;for(var u in o)a[u]=o[u].slice(),s[u]=[];var l,h=xn(n.dataChanged);try{for(h.s();!(l=h.n()).done;){var c=l.value,f=yn(i,r,c);for(var d in o)s[d].push(_({data:a[d],getIndex:function(t){return t.__source.index},dataRange:c,replace:f[d]}))}}catch(v){h.e(v)}finally{h.f()}}else a=yn(i,r);var p=function(t,e){var n={points:{},lines:{},polygons:{},polygonsOutline:{}},i=t.pointFeatures,r=t.lineFeatures,a=t.polygonFeatures,s=t.polygonOutlineFeatures;return n.points.data=i,n.points._dataDiff=e.pointFeatures&&function(){return e.pointFeatures},n.points.getPosition=mn,n.lines.data=r,n.lines._dataDiff=e.lineFeatures&&function(){return e.lineFeatures},n.lines.getPath=mn,n.polygons.data=a,n.polygons._dataDiff=e.polygonFeatures&&function(){return e.polygonFeatures},n.polygons.getPolygon=mn,n.polygonsOutline.data=s,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&function(){return e.polygonOutlineFeatures},n.polygonsOutline.getPath=mn,n}(a,s);this.setState({features:a,featuresDiff:s,layerProps:p})}},{key:"_updateAutoHighlight",value:function(t){var e,n=t.sourceLayer.id.includes("-points-"),i=xn(this.getSubLayers());try{for(i.s();!(e=i.n()).done;){var r=e.value;r.id.includes("-points-")===n&&r.updateAutoHighlight(t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"_renderPolygonLayer",value:function(){var t=this.props,e=t.extruded,n=t.wireframe,i=this.state.layerProps,r="polygons-fill",a=this.shouldRenderSubLayer(r,i.polygons.data)&&this.getSubLayerClass(r,dn.type);if(a){var s=vn(this,dn.props),o=e&&n;return o||delete s.getLineColor,s.updateTriggers.lineColors=o,new a(s,this.getSubLayerProps({id:r,updateTriggers:s.updateTriggers}),i.polygons)}return null}},{key:"_renderLineLayers",value:function(){var t=this.props,e=t.extruded,n=t.stroked,i=this.state.layerProps,r=!e&&n&&this.shouldRenderSubLayer("polygons-stroke",i.polygonsOutline.data)&&this.getSubLayerClass("polygons-stroke",fn.type),a=this.shouldRenderSubLayer("linestrings",i.lines.data)&&this.getSubLayerClass("linestrings",fn.type);if(r||a){var s=vn(this,fn.props);return[r&&new r(s,this.getSubLayerProps({id:"polygons-stroke",updateTriggers:s.updateTriggers}),i.polygonsOutline),a&&new a(s,this.getSubLayerProps({id:"linestrings",updateTriggers:s.updateTriggers}),i.lines)]}return null}},{key:"_renderPointLayers",value:function(){var t=this.props.pointType,e=this.state,n=e.layerProps,i=e.binary,r=this.props.highlightedObjectIndex;!i&&Number.isFinite(r)&&(r=n.points.data.findIndex((function(t){return t.__source.index===r})));var a,s=[],o=xn(new Set(t.split("+")));try{for(o.s();!(a=o.n()).done;){var u=a.value,l="points-".concat(u),h=cn[u],c=h&&this.shouldRenderSubLayer(l,n.points.data)&&this.getSubLayerClass(l,h.type);if(c){var f=vn(this,h.props);s.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:r}),n.points))}}}catch(d){o.e(d)}finally{o.f()}return s}},{key:"renderLayers",value:function(){var t=this.props.extruded,e=this._renderPolygonLayer();return[!t&&e,this._renderLineLayers(),this._renderPointLayers(),t&&e]}},{key:"getSubLayerAccessor",value:function(t){return this.state.binary&&"function"==typeof t?function(e,n){var i=function(t,e){if(!t)return null;var n="startIndices"in t?t.startIndices[e]:e,i=t.featureIds.value[n];return-1!==n?M(t,i,n):null}(n.data,n.index);return t(i,n)}:Object(d.a)(Object(y.a)(n.prototype),"getSubLayerAccessor",this).call(this,t)}}]),n}(m.a);Sn.layerName="GeoJsonLayer",Sn.defaultProps=kn;var Cn=n("vOnD");function An(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function In(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?An(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jn={height:600,width:800,pitch:45,maxPitch:60,bearing:0,minZoom:1,maxZoom:30,zoom:11},En={GeoPackage:{Vancouver:{data:"https://raw.githubusercontent.com/visgl/deck.gl-data/master/examples/geojson/vancouver-blocks.json",viewState:In(In({},jn),{},{latitude:49.254,longitude:-123.13})}},FlatGeobuf:{Countries:{data:"https://raw.githubusercontent.com/uber-web/loaders.gl/master/modules/flatgeobuf/test/data/countries.fgb",viewState:In(In({},jn),{},{longitude:-4.65,latitude:-29.76,zoom:1.76})}}},Ln=Cn.c.div.withConfig({displayName:"control-panel__Container",componentId:"sc-14q5t5u-0"})(["display:flex;flex-direction:column;position:absolute;top:0;right:0;max-width:320px;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,0.3);padding:12px 24px;margin:20px;font-size:13px;line-height:2;outline:none;z-index:100;"]),Fn=Cn.c.select.withConfig({displayName:"control-panel__DropDown",componentId:"sc-14q5t5u-1"})(["margin-bottom:6px;"]),zn=function(t){function e(e){var n;return(n=t.call(this,e)||this)._autoSelected=!1,n}Object(r.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.examples,n=void 0===e?{}:e,i=t.onExampleChange,r=this.props.selectedLoader,a=this.props.selectedExample;(r&&a||this._autoSelected||(a=n[r="GeoPackage"].Vancouver,this._autoSelected=!0),r&&a)&&i({selectedLoader:r,selectedExample:a,example:n[r][a]})},n._renderDropDown=function(){var t=this.props,e=t.examples,n=void 0===e?{}:e,i=t.selectedLoader,r=t.selectedExample,a=t.onExampleChange;if(!i||!r)return!1;var o=i+"."+r;return s.a.createElement(Fn,{value:o,onChange:function(t){var e=t.target.value.split("."),i=e[0],r=e[1],s=n[i][r];a({selectedLoader:i,selectedExample:r,example:s})}},Object.keys(n).map((function(t,e){var i=n[t];return s.a.createElement("optgroup",{key:e,label:t},Object.keys(i).map((function(e,n){var i=t+"."+e;return s.a.createElement("option",{key:n,value:i},e+" ("+t+")")})))})))},n._renderHeader=function(){var t=this.props,e=t.selectedLoader,n=t.selectedExample;return e&&n?s.a.createElement("div",null,s.a.createElement("h3",null,n," ",s.a.createElement("b",null,e)," ")):null},n.render=function(){return s.a.createElement(Ln,null,this._renderHeader(),this._renderDropDown(),this.props.children)},e}(a.PureComponent);zn.defaultProps={examples:{},droppedFile:null,selectedExample:null,selectedLoader:null,onChange:function(){}};var Tn=n("o0o1"),Rn=n.n(Tn),Nn=(n("wcNg"),n("HaE+")),Dn=n("BHs3"),qn=n.n(Dn),Un="undefined"!=typeof __VERSION__?__VERSION__:"latest",Bn=n("KQm4");function Gn(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Wn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function Wn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Vn={0:2,1:3,2:3,3:4};function Hn(t){var e=new DataView(t),n=0,i=1===e.getUint8(n);n++;var r=e.getUint32(n,i);n+=4;var a=r%1e3,s=Vn[(r-a)/1e3];switch(a){case 1:return Zn(e,n,s,i).geometry;case 2:return Qn(e,n,s,i).geometry;case 3:return Kn(e,n,s,i).geometry;case 4:var o=function(t,e,n,i){var r=t.getUint32(e,i);e+=4;for(var a=[],s=0;s<r;s++){var o=1===t.getUint8(e);if(e++,t.getUint32(e,o)%1e3!=1)throw new Error("WKB: Inner geometries of MultiPoint not of type Point");var u=Zn(t,e+=4,n,o);e=u.offset,a.push(u.geometry)}return function(t,e){var n=t.map((function(t){return t.positions.value}));return{type:"Point",positions:{value:new Float64Array(Jn(n).buffer),size:e}}}(a,n)}(e,n,s,i);return o.type="Point",o;case 5:var u=function(t,e,n,i){var r=t.getUint32(e,i);e+=4;for(var a=[],s=0;s<r;s++){var o=1===t.getUint8(e);if(e++,t.getUint32(e,o)%1e3!=2)throw new Error("WKB: Inner geometries of MultiLineString not of type LineString");var u=Qn(t,e+=4,n,o);e=u.offset,a.push(u.geometry)}return function(t,e){var n=t.map((function(t){return t.positions.value})),i=new Float64Array(Jn(n).buffer),r=n.map((function(t){return t.length/e})).map(Xn(0));return r.unshift(0),{type:"LineString",positions:{value:i,size:e},pathIndices:{value:new Uint16Array(r),size:1}}}(a,n)}(e,n,s,i);return u.type="LineString",u;case 6:var l=function(t,e,n,i){var r=t.getUint32(e,i);e+=4;for(var a=[],s=0;s<r;s++){var o=1===t.getUint8(e);if(e++,t.getUint32(e,o)%1e3!=3)throw new Error("WKB: Inner geometries of MultiPolygon not of type Polygon");var u=Kn(t,e+=4,n,o);e=u.offset,a.push(u.geometry)}return function(t,e){for(var n,i=[],r=[],a=Gn(t);!(n=a()).done;){var s=n.value,o=s.positions,u=s.primitivePolygonIndices;i.push(o.value),r.push(u.value)}var l=new Float64Array(Jn(i).buffer),h=i.map((function(t){return t.length/e})).map(Xn(0));h.unshift(0);for(var c=[0],f=0,d=r;f<d.length;f++){var p=d[f];c.push.apply(c,Object(Bn.a)(p.filter((function(t){return t>0})).map((function(t){return t+c[c.length-1]}))))}return{type:"Polygon",positions:{value:l,size:e},polygonIndices:{value:new Uint16Array(h),size:1},primitivePolygonIndices:{value:new Uint16Array(c),size:1}}}(a,n)}(e,n,s,i);return l.type="Polygon",l;default:throw new Error("WKB: Unsupported geometry type: "+a)}}function Zn(t,e,n,i){for(var r=new Float64Array(n),a=0;a<n;a++)r[a]=t.getFloat64(e,i),e+=8;return{geometry:{type:"Point",positions:{value:r,size:n}},offset:e}}function Qn(t,e,n,i){var r=t.getUint32(e,i);e+=4;for(var a=new Float64Array(r*n),s=0;s<r*n;s++)a[s]=t.getFloat64(e,i),e+=8;var o=[0];return r>0&&o.push(r),{geometry:{type:"LineString",positions:{value:a,size:n},pathIndices:{value:new Uint16Array(o),size:1}},offset:e}}var Xn=function(t){return function(e){return t+=e}};function Kn(t,e,n,i){var r=t.getUint32(e,i);e+=4;for(var a=[],s=0;s<r;s++){var o=Qn(t,e,n,i),u=o.geometry.positions;e=o.offset,a.push(u.value)}var l=new Float64Array(Jn(a).buffer),h=[0];l.length>0&&h.push(l.length/n);var c=a.map((function(t){return t.length/n})).map(Xn(0));return c.unshift(0),{geometry:{type:"Polygon",positions:{value:l,size:n},polygonIndices:{value:new Uint16Array(h),size:1},primitivePolygonIndices:{value:new Uint16Array(c),size:1}},offset:e}}function Jn(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].byteLength;for(var i=new Uint8Array(e),r=0,a=0;a<t.length;++a){var s=new Uint8Array(t[a].buffer);e=s.length;for(var o=0;o<e;++o)i[r++]=s[o]}return i}function Yn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yn(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ti,ei={name:"WKB",id:"wkb",module:"wkt",version:Un,worker:!0,category:"geometry",extensions:["wkb"],mimeTypes:[],options:{wkb:{}}},ni=$n($n({},ei),{},{parse:(ti=Object(Nn.a)(Rn.a.mark((function t(e){return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Hn(e));case 1:case"end":return t.stop()}}),t)}))),function(t){return ti.apply(this,arguments)}),parseSync:Hn}),ii=n("2jNN"),ri=n("3p+V"),ai=n("KN2Q");function si(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return oi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oi(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function oi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ui(t,e){for(var n,i=si(t);!(n=i()).done;){var r=n.value;r.geometry.coordinates=li(r.geometry.coordinates,e)}return t}function li(t,e){return function(t){return Number.isFinite(t[0])&&Number.isFinite(t[1])}(t)?e(t):t.map((function(t){return li(t,e)}))}function hi(t,e,n){switch(t.type){case"Point":return function(t,e,n){var i=ci(t.positions,e,n);if(i.length>1)return{type:"MultiPoint",coordinates:i};return{type:"Point",coordinates:i[0]}}(t,e,n);case"LineString":return function(t,e,n){void 0===e&&(e=-1/0);void 0===n&&(n=1/0);var i=t.positions,r=t.pathIndices.value.filter((function(t){return t>=e&&t<=n}));if(!(r.length>2)){return{type:"LineString",coordinates:ci(i,r[0],r[1])}}for(var a=[],s=0;s<r.length-1;s++){var o=ci(i,r[s],r[s+1]);a.push(o)}return{type:"MultiLineString",coordinates:a}}(t,e,n);case"Polygon":return function t(e,n,i){void 0===n&&(n=-1/0);void 0===i&&(i=1/0);var r=e.positions,a=e.polygonIndices.value.filter((function(t){return t>=n&&t<=i})),s=e.primitivePolygonIndices.value.filter((function(t){return t>=n&&t<=i}));if(!(a.length>2)){for(var o=[],u=0;u<s.length-1;u++){var l=s[u],h=s[u+1],c=ci(r,l,h);o.push(c)}return{type:"Polygon",coordinates:o}}for(var f=[],d=0;d<a.length-1;d++){var p=a[d],v=a[d+1],y=t(e,p,v).coordinates;f.push(y)}return{type:"MultiPolygon",coordinates:f}}(t,e,n);default:var i=t;throw new Error("Unsupported geometry type: "+(null==i?void 0:i.type))}}function ci(t,e,n){e=e||0,n=n||t.value.length/t.size;for(var i=[],r=e;r<n;r++){for(var a=Array(),s=r*t.size;s<(r+1)*t.size;s++)a.push(Number(t.value[s]));i.push(a)}return i}n("E9XD");var fi=484813681109536e-20,di=Math.PI/2,pi=.017453292519943295,vi=57.29577951308232,yi=Math.PI/4,bi=2*Math.PI,gi=3.14159265359,mi={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},_i={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},xi=/[\s_\-\/\(\)]/g;function wi(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(xi,""),a=-1;++a<i.length;)if((n=i[a]).toLowerCase().replace(xi,"")===r)return t[n]}var Mi=function(t){var e,n,i,r={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*pi},lat_1:function(t){r.lat1=t*pi},lat_2:function(t){r.lat2=t*pi},lat_ts:function(t){r.lat_ts=t*pi},lon_0:function(t){r.long0=t*pi},lon_1:function(t){r.long1=t*pi},lon_2:function(t){r.long2=t*pi},alpha:function(t){r.alpha=parseFloat(t)*pi},lonc:function(t){r.longc=t*pi},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=wi(_i,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*pi},pm:function(t){var e=wi(mi,t);r.from_greenwich=(e||parseFloat(t))*pi},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(r.axis=t)}};for(e in a)n=a[e],e in s?"function"==typeof(i=s[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},Pi=function(t){return new Ii(t).output()},Oi=/\s/,ki=/[A-Za-z]/,Si=/[A-Za-z84]/,Ci=/[,\]]/,Ai=/[\d\.E\-\+]/;function Ii(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function ji(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return Ei(e,t),t}),i);e&&(t[e]=r)}function Ei(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void Ei(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Ei(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Ei(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void ji(e,n,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return Ei(t,e[n]);return ji(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}Ii.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Oi.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Ii.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Ci.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Ii.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Ii.prototype.number=function(t){if(!Ai.test(t)){if(Ci.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Ii.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Ii.prototype.keyword=function(t){if(Si.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!Ci.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Ii.prototype.neutral=function(t){if(ki.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Ai.test(t))return this.word=t,void(this.state=3);if(!Ci.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Ii.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Li(t){return.017453292519943295*t}var Fi=function(t){var e=Pi(t),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return Ei(e,r),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=t.AXIS[n][0].toLowerCase();-1!==r.indexOf("north")?e+="n":-1!==r.indexOf("south")?e+="s":-1!==r.indexOf("east")?e+="e":-1!==r.indexOf("west")&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Li],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Li],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Li],["lat0","latitude_of_origin",Li],["lat0","standard_parallel_1",Li],["lat1","standard_parallel_1",Li],["lat2","standard_parallel_2",Li],["azimuth","Azimuth"],["alpha","azimuth",Li],["srsCode","name"]].forEach((function(e){return n=t,r=(i=e)[0],a=i[1],void(!(r in n)&&a in n&&(n[r]=n[a],3===i.length&&(n[r]=i[2](n[r]))));var n,i,r,a})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=Li(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(r),r};function zi(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?zi[t]=Mi(arguments[1]):zi[t]=Fi(arguments[1]):zi[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?zi.apply(e,t):zi(t)}));if("string"==typeof t){if(t in zi)return zi[t]}else"EPSG"in t?zi["EPSG:"+t.EPSG]=t:"ESRI"in t?zi["ESRI:"+t.ESRI]=t:"IAU2000"in t?zi["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(zi);var Ti=zi;var Ri=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Ni=["3857","900913","3785","102113"];var Di=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Ti}(t))return Ti[t];if(function(t){return Ri.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Fi(t);if(function(t){var e=wi(t,"authority");if(e){var n=wi(e,"epsg");return n&&Ni.indexOf(n)>-1}}(e))return Ti["EPSG:3857"];var n=function(t){var e=wi(t,"extension");if(e)return wi(e,"proj4")}(e);return n?Mi(n):e}return function(t){return"+"===t[0]}(t)?Mi(t):void 0},qi=function(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t},Ui=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)},Bi=function(t){return t<0?-1:1},Gi=function(t){return Math.abs(t)<=gi?t:t-Bi(t)*bi},Wi=function(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(di-e))/i},Vi=function(t,e){for(var n,i,r=.5*t,a=di-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=i=di-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-a,Math.abs(i)<=1e-10)return a;return-9999};function Hi(t){return t}var Zi=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ui(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*vi>90&&r*vi<-90&&i*vi>180&&i*vi<-180)return null;if(Math.abs(Math.abs(r)-di)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*Gi(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(yi+.5*r));else{var a=Math.sin(r),s=Wi(this.e,r,a);e=this.x0+this.a*this.k0*Gi(i-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=di-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var a=Math.exp(-r/(this.a*this.k0));if(-9999===(n=Vi(this.e,a)))return null}return e=Gi(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Hi,inverse:Hi,names:["longlat","identity"]}],Qi={},Xi=[];function Ki(t,e){var n=Xi.length;return t.names?(Xi[n]=t,t.names.forEach((function(t){Qi[t.toLowerCase()]=n})),this):(console.log(e),!0)}var Ji={start:function(){Zi.forEach(Ki)},add:Ki,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==Qi[e]&&Xi[Qi[e]]?Xi[Qi[e]]:void 0}},Yi={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},$i=Yi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Yi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var tr={};tr.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},tr.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},tr.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},tr.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},tr.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},tr.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},tr.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},tr.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},tr.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},tr.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},tr.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},tr.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},tr.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},tr.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},tr.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},tr.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},tr.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var er=function(t,e,n,i,r,a){var s={};return s.datum_type=void 0===t||"none"===t?5:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=fi,s.datum_params[4]*=fi,s.datum_params[5]*=fi,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=i,s.es=r,s.ep2=a,s};function nr(t,e){if(!(this instanceof nr))return new nr(t);e=e||function(t){if(t)throw t};var n=Di(t);if("object"==typeof n){var i=nr.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=wi(tr,n.datumCode);r&&(n.datum_params=r.towgs84?r.towgs84.split(","):null,n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var a,s,o,u,l,h,c,f=function(t,e,n,i,r){if(!t){var a=wi(Yi,i);a||(a=$i),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<1e-10)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),d=(a=f.a,s=f.b,f.rf,o=n.R_A,h=((u=a*a)-(l=s*s))/u,c=0,o?(u=(a*=1-h*(.16666666666666666+h*(.04722222222222222+.022156084656084655*h)))*a,h=0):c=Math.sqrt(h),{es:h,e:c,ep2:(u-l)/l}),p=n.datum||er(n.datumCode,n.datum_params,f.a,f.b,d.es,d.ep2);qi(this,n),qi(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=p,this.init(),e(null,this)}else e(t)}else e(t)}nr.projections=Ji,nr.projections.start();var ir=nr;function rr(t,e,n){var i,r,a,s,o=t.x,u=t.y,l=t.z?t.z:0;if(u<-di&&u>-1.001*di)u=-di;else if(u>di&&u<1.001*di)u=di;else{if(u<-di)return{x:-1/0,y:-1/0,z:t.z};if(u>di)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),r=Math.sin(u),s=Math.cos(u),a=r*r,{x:((i=n/Math.sqrt(1-e*a))+l)*s*Math.cos(o),y:(i+l)*s*Math.sin(o),z:(i*(1-e)+l)*r}}function ar(t,e,n,i){var r,a,s,o,u,l,h,c,f,d,p,v,y,b,g,m=t.x,_=t.y,x=t.z?t.z:0;if(r=Math.sqrt(m*m+_*_),a=Math.sqrt(m*m+_*_+x*x),r/n<1e-12){if(b=0,a/n<1e-12)return di,g=-i,{x:t.x,y:t.y,z:t.z}}else b=Math.atan2(_,m);s=x/a,c=(o=r/a)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*o*o)),f=s*u,y=0;do{y++,l=e*(h=n/Math.sqrt(1-e*f*f))/(h+(g=r*c+x*f-h*(1-e*f*f))),v=(p=s*(u=1/Math.sqrt(1-l*(2-l)*o*o)))*c-(d=o*(1-l)*u)*f,c=d,f=p}while(v*v>1e-24&&y<30);return{x:b,y:Math.atan(p/Math.abs(d)),z:g}}function sr(t){return 1===t||2===t}var or=function(t,e,n){return function(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}(t,e)||5===t.datum_type||5===e.datum_type?n:t.es!==e.es||t.a!==e.a||sr(t.datum_type)||sr(e.datum_type)?(n=rr(n,t.es,t.a),sr(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+o*t.z)+i,y:l*(u*t.x+t.y-s*t.z)+r,z:l*(-o*t.x+s*t.y+t.z)+a}}}(n,t.datum_type,t.datum_params)),sr(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],u=n[5],l=n[6],h=(t.x-i)/l,c=(t.y-r)/l,f=(t.z-a)/l;return{x:h+u*c-o*f,y:-u*h+c+s*f,z:o*h-s*c+f}}}(n,e.datum_type,e.datum_params)),ar(n,e.es,e.a,e.b)):n},ur=function(t,e,n){var i,r,a,s=n.x,o=n.y,u=n.z||0,l={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==n.z)switch(0===a?(i=s,r=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(i=o,r=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(i=u,r="z"),t.axis[a]){case"e":case"w":case"n":case"s":l[r]=i;break;case"u":void 0!==n[r]&&(l.z=i);break;case"d":void 0!==n[r]&&(l.z=-i);break;default:return null}return l},lr=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function hr(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function cr(t,e,n){var i;if(Array.isArray(n)&&(n=lr(n)),function(t){hr(t.x),hr(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=cr(t,i=new ir("WGS84"),n),t=i),"enu"!==t.axis&&(n=ur(t,!1,n)),"longlat"===t.projName)n={x:n.x*pi,y:n.y*pi,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;return t.from_greenwich&&(n.x+=t.from_greenwich),n=or(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*vi,y:n.y*vi,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),"enu"!==e.axis?ur(e,!0,n):n}var fr=ir("WGS84");function dr(t,e,n){var i,r,a;return Array.isArray(n)?(i=cr(t,e,n)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(r=cr(t,e,n),2===(a=Object.keys(n)).length||a.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;r[i]=n[i]})),r)}function pr(t){return t instanceof ir?t:t.oProj?t.oProj:ir(t)}var vr=function(t,e,n){t=pr(t);var i,r=!1;return void 0===e?(e=t,t=fr,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=fr,r=!0),e=pr(e),n?dr(t,e,n):(i={forward:function(n){return dr(t,e,n)},inverse:function(n){return dr(e,t,n)}},r&&(i.oProj=e),i)},yr=73,br=79,gr={forward:mr,inverse:function(t){var e=Mr(kr(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:_r};function mr(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(d=t.easting,p=t.northing,v=t.zoneNumber,y=Or(v),b=Math.floor(d/1e5),g=Math.floor(p/1e5)%20,r=b,a=g,s=y,o=s-1,u="AJSAJS".charCodeAt(o),l="AFAFAF".charCodeAt(o),h=u+r-1,c=l+a,f=!1,h>90&&(h=h-90+65-1,f=!0),(h===yr||u<yr&&h>yr||(h>yr||u<yr)&&f)&&h++,(h===br||u<br&&h>br||(h>br||u<br)&&f)&&++h===yr&&h++,h>90&&(h=h-90+65-1),c>86?(c=c-86+65-1,f=!0):f=!1,(c===yr||l<yr&&c>yr||(c>yr||l<yr)&&f)&&c++,(c===br||l<br&&c>br||(c>br||l<br)&&f)&&++c===yr&&c++,c>86&&(c=c-86+65-1),String.fromCharCode(h)+String.fromCharCode(c))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,a,s,o,u,l,h,c,f;var d,p,v,y,b,g}(function(t){var e,n,i,r,a,s,o,u=t.lat,l=t.lon,h=6378137,c=xr(u),f=xr(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60);u>=56&&u<64&&l>=3&&l<12&&(o=32);u>=72&&u<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37));s=xr(6*(o-1)-180+3),.006739496752268451,e=h/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),n=Math.tan(c)*Math.tan(c),i=.006739496752268451*Math.cos(c)*Math.cos(c),r=Math.cos(c)*(f-s),a=h*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c));var d=.9996*e*(r+(1-n+i)*r*r*r/6+(5-18*n+n*n+72*i-.39089081163157013)*r*r*r*r*r/120)+5e5,p=.9996*(a+e*Math.tan(c)*(r*r/2+(5-n+9*i+4*i*i)*r*r*r*r/24+(61-58*n+n*n+600*i-2.2240339282485886)*r*r*r*r*r*r/720));u<0&&(p+=1e7);return{northing:Math.round(p),easting:Math.round(d),zoneNumber:o,zoneLetter:Pr(u)}}({lat:t[1],lon:t[0]}),e)}function _r(t){var e=Mr(kr(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function xr(t){return t*(Math.PI/180)}function wr(t){return t/Math.PI*180}function Mr(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var a,s,o,u,l,h,c,f,d=6378137,p=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=n-5e5,y=e;i<"N"&&(y-=1e7),h=6*(r-1)-180+3,f=(c=y/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*c)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*c)+151*p*p*p/96*Math.sin(6*c),a=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),o=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=v/(.9996*a);var b=f-a*Math.tan(f)/u*(l*l/2-(5+3*s+10*o-4*o*o-.06065547077041606)*l*l*l*l/24+(61+90*s+298*o+45*s*s-1.6983531815716497-3*o*o)*l*l*l*l*l*l/720);b=wr(b);var g,m=(l-(1+2*s+o)*l*l*l/6+(5-2*o+28*s-3*o*o+.05391597401814761+24*s*s)*l*l*l*l*l/120)/Math.cos(f);if(m=h+wr(m),t.accuracy){var _=Mr({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});g={top:_.lat,right:_.lon,bottom:b,left:m}}else g={lat:b,lon:m};return g}function Pr(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Or(t){var e=t%6;return 0===e&&(e=6),e}function kr(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,a++}var s=parseInt(r,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(a,a+=2);for(var u=Or(s),l=function(t,e){var n="AJSAJS".charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===yr&&n++,n===br&&n++,n>90){if(r)throw"Bad character: "+t;n=65,r=!0}i+=1e5}return i}(i.charAt(0),u),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n="AFAFAF".charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===yr&&n++,n===br&&n++,n>86){if(r)throw"Bad character: "+t;n=65,r=!0}i+=1e5}return i}(i.charAt(1),u);h<Sr(o);)h+=2e6;var c=n-a;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,v=c/2,y=0,b=0;return v>0&&(f=1e5/Math.pow(10,v),d=t.substring(a,a+v),y=parseFloat(d)*f,p=t.substring(a+v),b=parseFloat(p)*f),{easting:y+l,northing:b+h,zoneLetter:o,zoneNumber:s,accuracy:f}}function Sr(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Cr(t,e,n){if(!(this instanceof Cr))return new Cr(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Cr.fromMGRS=function(t){return new Cr(_r(t))},Cr.prototype.toMGRS=function(t){return mr([this.x,this.y],t)};var Ar=Cr,Ir=.01068115234375,jr=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*Ir))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*Ir)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Er=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},Lr=function(t,e,n){for(var i=1/(1-e),r=t,a=20;a;--a){var s=Math.sin(r),o=1-e*s*s;if(r-=o=(Er(r,s,Math.cos(r),n)-t)*(o*Math.sqrt(o))*i,Math.abs(o)<1e-10)return r}return r};var Fr={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=jr(this.es),this.ml0=Er(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,a=t.y,s=Gi(r-this.long0),o=Math.sin(a),u=Math.cos(a);if(this.es){var l=u*s,h=Math.pow(l,2),c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),d=Math.abs(u)>1e-10?Math.tan(a):0,p=Math.pow(d,2),v=Math.pow(p,2);e=1-this.es*Math.pow(o,2),l/=Math.sqrt(e);var y=Er(a,o,u,this.en);n=this.a*(this.k0*l*(1+h/6*(1-p+c+h/20*(5-18*p+v+14*c-58*p*c+h/42*(61+179*v-v*p-479*p)))))+this.x0,i=this.a*(this.k0*(y-this.ml0+o*s*l/2*(1+h/12*(5-p+9*c+4*f+h/30*(61+v-58*p+270*c-330*p*c+h/56*(1385+543*v-v*p-3111*p))))))+this.y0}else{var b=u*Math.sin(s);if(Math.abs(Math.abs(b)-1)<1e-10)return 93;if(n=.5*this.a*this.k0*Math.log((1+b)/(1-b))+this.x0,i=u*Math.cos(s)/Math.sqrt(1-Math.pow(b,2)),(b=Math.abs(i))>=1){if(b-1>1e-10)return 93;i=0}else i=Math.acos(i);a<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,a=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,n=Lr(e,this.es,this.en),Math.abs(n)<di){var o=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>1e-10?Math.tan(n):0,h=this.ep2*Math.pow(u,2),c=Math.pow(h,2),f=Math.pow(l,2),d=Math.pow(f,2);e=1-this.es*Math.pow(o,2);var p=a*Math.sqrt(e)/this.k0,v=Math.pow(p,2);i=n-(e*=l)*v/(1-this.es)*.5*(1-v/12*(5+3*f-9*h*f+h-4*c-v/30*(61+90*f-252*h*f+45*d+46*h-v/56*(1385+3633*f+4095*d+1574*d*f)))),r=Gi(this.long0+p*(1-v/6*(1+2*f+h-v/20*(5+28*f+24*d+8*h*f+6*h-v/42*(61+662*f+1320*d+720*d*f))))/u)}else i=di*Bi(s),r=0;else{var y=Math.exp(a/this.k0),b=.5*(y-1/y),g=this.lat0+s/this.k0,m=Math.cos(g);e=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(b,2))),i=Math.asin(e),s<0&&(i=-i),r=0===b&&0===m?0:Gi(Math.atan2(b,m)+this.long0)}return t.x=r,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},zr=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Tr=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))},Rr=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(Tr(1,e)+1))),t<0?-e:e},Nr=function(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,a=t[r],s=0;--r>=0;)n=i*a-s+t[r],s=a,a=n;return e+n*Math.sin(2*e)},Dr=function(t,e,n){for(var i,r,a=Math.sin(e),s=Math.cos(e),o=zr(n),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(n),l=2*s*u,h=-2*a*o,c=t.length-1,f=t[c],d=0,p=0,v=0;--c>=0;)i=p,r=d,f=l*(p=f)-i-h*(d=v)+t[c],v=h*p-r+l*d;return[(l=a*u)*f-(h=s*o)*v,l*v+h*f]};var qr={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=Nr(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,a=t[r],s=0;--r>=0;)n=i*a-s+t[r],s=a,a=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=Gi(t.x-this.long0),n=t.y;n=Nr(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),a=Math.sin(e),s=Math.cos(e);n=Math.atan2(i,s*r),e=Math.atan2(a*r,Tr(i,r*s)),e=Rr(Math.tan(e));var o,u,l=Dr(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(o=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(o=1/0,u=1/0),t.x=o,t.y=u,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var a=Dr(this.utg,2*r,2*i);r+=a[0],i+=a[1],i=Math.atan(zr(i));var s=Math.sin(r),o=Math.cos(r),u=Math.sin(i),l=Math.cos(i);r=Math.atan2(s*l,Tr(u,l*o)),i=Math.atan2(u,l*o),e=Gi(i+this.long0),n=Nr(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var Ur={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Gi(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*pi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,qr.init.apply(this),this.forward=qr.forward,this.inverse=qr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Br=function(t,e){return Math.pow((1-t)/(1+t),e)};var Gr={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+yi)/(Math.pow(Math.tan(.5*this.lat0+yi),this.C)*Br(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+yi),this.C)*Br(this.e*Math.sin(n),this.ratexp))-di,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+yi)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*Br(this.e*Math.sin(t.y),-.5*this.e))-di,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var Wr={init:function(){Gr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=Gi(t.x-this.long0),Gr.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(a,this.R2);e=Math.sin(s),n=Math.cos(s),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),i=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,Gr.inverse.apply(this,[t]),t.x=Gi(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Vr={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+Bi(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*Ui(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Wi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ui(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-di,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,a,s,o=t.x,u=t.y,l=Math.sin(u),h=Math.cos(u),c=Gi(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=1e-10&&Math.abs(u+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*h*Math.cos(c)),t.x=this.a*e*h*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*h*Math.cos(c))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-di,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=Wi(this.e,u*this.con,this.con*l),s=2*this.a*this.k0*a/this.cons,t.x=this.x0+s*Math.sin(o-this.long0),t.y=this.y0-this.con*s*Math.cos(o-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(e=2*this.a*this.k0/(1+r*Math.cos(c)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(c))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(c))+this.y0),t.x=e*r*Math.sin(c)+this.x0,t))},inverse:function(t){var e,n,i,r,a;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,n=this.lat0,s<=1e-10?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/s),e=Math.abs(this.coslat0)<1e-10?this.lat0>0?Gi(this.long0+Math.atan2(t.x,-1*t.y)):Gi(this.long0+Math.atan2(t.x,t.y)):Gi(this.long0+Math.atan2(t.x*Math.sin(o),s*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(s<=1e-10)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*Vi(this.e,i),e=this.con*Gi(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=1e-10?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/s),e=Gi(this.long0+Math.atan2(t.x*Math.sin(r),s*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*Vi(this.e,Math.tan(.5*(di+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(di+t))*Math.pow((1-e)/(1+e),.5*n)}};var Hr={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),a=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=s-this.alpha*o+this.alpha*a/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+s/this.alpha,u=0,l=a,h=-1e3,c=0;Math.abs(l-h)>1e-7;){if(++c>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),h=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=o,t.y=l,t},names:["somerc"]};var Zr={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var i,r,a=Wi(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var o=Wi(this.e,this.lat1,Math.sin(this.lat1)),u=Wi(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(a,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(a,this.bl);var l=Math.pow(o,this.bl),h=Math.pow(u,this.bl);r=.5*((i=this.el/l)-1/i);var c=(this.el*this.el-h*l)/(this.el*this.el+h*l),f=(h-l)/(h+l),d=Gi(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=Gi(this.long0);var p=Gi(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/r),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else i=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=i*Math.pow(a,this.bl),r=.5*(i-1/i),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,i,r=t.x,a=t.y,s=Gi(r-this.long0);if(Math.abs(Math.abs(a)-di)<=1e-10)i=a>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(yi+i*this.gamma0*.5)),e=-1*i*di*this.al/this.bl;else{var o=Wi(this.e,a,Math.sin(a)),u=this.el/Math.pow(o,this.bl),l=.5*(u-1/u),h=.5*(u+1/u),c=Math.sin(this.bl*s),f=(l*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/h;n=Math.abs(Math.abs(f)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=1e-10?this.al*this.bl*s:this.al*Math.atan2(l*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),r=.5*(i-1/i),a=.5*(i+1/i),s=Math.sin(this.bl*e/this.al),o=(s*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/a,u=Math.pow(this.el/Math.sqrt((1+o)/(1-o)),1/this.bl);return Math.abs(o-1)<1e-10?(t.x=this.long0,t.y=di):Math.abs(o+1)<1e-10?(t.x=this.long0,t.y=-1*di):(t.y=Vi(this.e,u),t.x=Gi(this.long0-Math.atan2(r*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var Qr={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=Ui(this.e,e,n),r=Wi(this.e,this.lat1,e),a=Math.sin(this.lat2),s=Math.cos(this.lat2),o=Ui(this.e,a,s),u=Wi(this.e,this.lat2,a),l=Wi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(i/o)/Math.log(r/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=Bi(n)*(di-2e-10));var i,r,a=Math.abs(Math.abs(n)-di);if(a>1e-10)i=Wi(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((a=n*this.ns)<=0)return null;r=0}var s=this.ns*Gi(e-this.long0);return t.x=this.k0*(r*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,i,r,a,s=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+o*o),n=1):(e=-Math.sqrt(s*s+o*o),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*s,n*o)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=Vi(this.e,i)))return null}else r=-di;return a=Gi(u/this.ns+this.long0),t.x=a,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Xr={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,a,s,o,u=t.x,l=t.y,h=Gi(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),i=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),s=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=o*Math.cos(s)/1,t.x=o*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,a,s,o,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e,o=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(o=1),s=t.y,l+=1}while(0===o&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Kr=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)},Jr=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Yr=function(t){return.375*t*(1+.25*t*(1+.46875*t))},$r=function(t){return.05859375*t*t*(1+.75*t)},ta=function(t){return t*t*t*(35/3072)},ea=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)},na=function(t){return Math.abs(t)<di?t:t-Bi(t)*Math.PI},ia=function(t,e,n,i,r){var a,s;a=t/e;for(var o=0;o<15;o++)if(a+=s=(t-(e*a-n*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),Math.abs(s)<=1e-10)return a;return NaN};var ra={init:function(){this.sphere||(this.e0=Jr(this.es),this.e1=Yr(this.es),this.e2=$r(this.es),this.e3=ta(this.es),this.ml0=this.a*Kr(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Gi(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var a=Math.sin(r),s=Math.cos(r),o=ea(this.a,this.e,a),u=Math.tan(r)*Math.tan(r),l=i*Math.cos(r),h=l*l,c=this.es*s*s/(1-this.es);e=o*l*(1-h*u*(1/6-(8-u+8*c)*h/120)),n=this.a*Kr(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+o*a/s*h*(.5+(5-u+6*c)*h/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var a=r+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(a))}else{var s=this.ml0/this.a+r,o=ia(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-di)<=1e-10)return t.x=this.long0,t.y=di,r<0&&(t.y*=-1),t;var u=ea(this.a,this.e,Math.sin(o)),l=u*u*u/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),c=i*this.a/u,f=c*c;e=o-u*Math.tan(o)/l*c*c*(.5-(1+3*h)*c*c/24),n=c*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(o)}return t.x=Gi(n+this.long0),t.y=na(e),t},names:["Cassini","Cassini_Soldner","cass"]},aa=function(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var sa={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-di)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=aa(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=aa(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,a,s,o,u,l,h,c=t.x,f=t.y;if(c=Gi(c-this.long0),this.sphere){if(a=Math.sin(f),h=Math.cos(f),i=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*i:1+this.sinph0*a+this.cosph0*h*i)<=1e-10)return null;e=(n=Math.sqrt(2/n))*h*Math.sin(c),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<1e-10)return null;n=yi-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(c),n*=i}}else{switch(o=0,u=0,l=0,i=Math.cos(c),r=Math.sin(c),a=Math.sin(f),s=aa(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=s/this.qp,u=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:l=1+this.sinb1*o+this.cosb1*u*i;break;case this.EQUIT:l=1+u*i;break;case this.N_POLE:l=di+f,s=this.qp-s;break;case this.S_POLE:l=f-di,s=this.qp+s}if(Math.abs(l)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*o-this.sinb1*u*i):(l=Math.sqrt(2/(1+u*i)))*o*this.ymf,e=this.xmf*l*u*r;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(l=Math.sqrt(s))*r,n=i*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,a,s,o,u,l,h,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,p=0,v=0;if((n=.5*(d=Math.sqrt(c*c+f*f)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(v=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=1e-10?0:Math.asin(f*v/d),c*=v,f=p*d;break;case this.OBLIQ:n=Math.abs(d)<=1e-10?this.lat0:Math.asin(p*this.sinph0+f*v*this.cosph0/d),c*=v*this.cosph0,f=(p-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=di-n;break;case this.S_POLE:n-=di}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,(s=Math.sqrt(c*c+f*f))<1e-10)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*s/this.rq),i=Math.cos(r),c*=r=Math.sin(r),this.mode===this.OBLIQ?(o=i*this.sinb1+f*r*this.cosb1/s,a=this.qp*o,f=s*this.cosb1*i-f*this.sinb1*r):(o=f*r/s,a=this.qp*o,f=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(a=c*c+f*f))return t.x=this.long0,t.y=this.lat0,t;o=1-a/this.qp,this.mode===this.S_POLE&&(o=-o)}e=Math.atan2(c,f),u=Math.asin(o),l=this.apa,h=u+u,n=u+l[0]*Math.sin(h)+l[1]*Math.sin(h+h)+l[2]*Math.sin(h+h+h)}return t.x=Gi(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},oa=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)};var ua={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ui(this.e3,this.sin_po,this.cos_po),this.qs1=aa(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ui(this.e3,this.sin_po,this.cos_po),this.qs2=aa(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=aa(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=aa(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*Gi(e-this.long0),s=r*Math.sin(a)+this.x0,o=this.rh-r*Math.cos(a)+this.y0;return t.x=s,t.y=o,t},inverse:function(t){var e,n,i,r,a,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),a=Gi(r/this.ns0+this.long0),t.x=a,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,a,s=oa(.5*e);if(t<1e-10)return s;for(var o=t*t,u=1;u<=25;u++)if(s+=a=.5*(r=1-(i=t*(n=Math.sin(s)))*i)*r/Math.cos(s)*(e/(1-o)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(a)<=1e-7)return s;return null}};var la={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,a,s,o,u=t.x,l=t.y;return i=Gi(u-this.long0),e=Math.sin(l),n=Math.cos(l),r=Math.cos(i),1,(a=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(a)<=1e-10?(s=this.x0+1*this.a*n*Math.sin(i)/a,o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/a):(s=this.x0+this.infinity_dist*n*Math.sin(i),o=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=o,t},inverse:function(t){var e,n,i,r,a,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),i=Math.cos(r),s=oa(i*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),a=Gi(this.long0+a)):(s=this.phic0,a=0),t.x=a,t.y=s,t},names:["gnom"]};var ha={init:function(){this.sphere||(this.k0=Ui(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,a=Gi(i-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=aa(this.e,Math.sin(r));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Gi(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*di:di;for(var i,r,a,s,o=Math.asin(.5*e),u=0;u<30;u++)if(r=Math.sin(o),a=Math.cos(o),s=t*r,o+=i=Math.pow(1-s*s,2)/(2*a)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return o;return NaN}(this.e,2*t.y*this.k0/this.a),e=Gi(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var ca={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=Gi(e-this.long0),r=na(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=Gi(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=na(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var fa={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jr(this.es),this.e1=Yr(this.es),this.e2=$r(this.es),this.e3=ta(this.es),this.ml0=this.a*Kr(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,a=t.y,s=Gi(r-this.long0);if(i=s*Math.sin(a),this.sphere)Math.abs(a)<=1e-10?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(a),n=this.a*(na(a-this.lat0)+(1-Math.cos(i))/Math.tan(a)));else if(Math.abs(a)<=1e-10)e=this.a*s,n=-1*this.ml0;else{var o=ea(this.a,this.e,Math.sin(a))/Math.tan(a);e=o*Math.sin(i),n=this.a*Kr(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,a,s,o,u,l;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=1e-10)e=Gi(i/this.a+this.long0),n=0;else{var h;for(s=this.lat0+r/this.a,o=i*i/this.a/this.a+s*s,u=s,a=20;a;--a)if(u+=l=-1*(s*(u*(h=Math.tan(u))+1)-u-.5*(u*u+o)*h)/((u-s)/h-1),Math.abs(l)<=1e-10){n=u;break}e=Gi(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=1e-10)n=0,e=Gi(this.long0+i/this.a);else{var c,f,d,p,v;for(s=(this.ml0+r)/this.a,o=i*i/this.a/this.a+s*s,u=s,a=20;a;--a)if(v=this.e*Math.sin(u),c=Math.sqrt(1-v*v)*Math.tan(u),f=this.a*Kr(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(s*(c*(p=f/this.a)+1)-p-.5*c*(p*p+o))/(this.es*Math.sin(2*u)*(p*p+o-2*s*p)/(4*c)+(s-p)*(c*d-2/Math.sin(2*u))-d),Math.abs(l)<=1e-10){n=u;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Gi(this.long0+Math.asin(i*c/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var da={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,a=i/fi*1e-5,s=r,o=1,u=0;for(e=1;e<=10;e++)o*=a,u+=this.A[e]*o;var l,h=u,c=s,f=1,d=0,p=0,v=0;for(e=1;e<=6;e++)l=d*h+f*c,f=f*h-d*c,d=l,p=p+this.B_re[e]*f-this.B_im[e]*d,v=v+this.B_im[e]*f+this.B_re[e]*d;return t.x=v*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,a=i-this.x0,s=(r-this.y0)/this.a,o=a/this.a,u=1,l=0,h=0,c=0;for(e=1;e<=6;e++)n=l*s+u*o,u=u*s-l*o,l=n,h=h+this.C_re[e]*u-this.C_im[e]*l,c=c+this.C_im[e]*u+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var d,p=h,v=c,y=s,b=o;for(e=2;e<=6;e++)d=v*h+p*c,p=p*h-v*c,v=d,y+=(e-1)*(this.B_re[e]*p-this.B_im[e]*v),b+=(e-1)*(this.B_im[e]*p+this.B_re[e]*v);p=1,v=0;var g=this.B_re[1],m=this.B_im[1];for(e=2;e<=6;e++)d=v*h+p*c,p=p*h-v*c,v=d,g+=e*(this.B_re[e]*p-this.B_im[e]*v),m+=e*(this.B_im[e]*p+this.B_re[e]*v);var _=g*g+m*m;h=(y*g+b*m)/_,c=(b*g-y*m)/_}var x=h,w=c,M=1,P=0;for(e=1;e<=9;e++)M*=x,P+=this.D[e]*M;var O=this.lat0+P*fi*1e5,k=this.long0+w;return t.x=k,t.y=O,t},names:["New_Zealand_Map_Grid","nzmg"]};var pa={init:function(){},forward:function(t){var e=t.x,n=t.y,i=Gi(e-this.long0),r=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Gi(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var va={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=jr(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=Gi(i-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(r),s=20;s;--s){var o=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=o,Math.abs(o)<1e-10)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var u=Math.sin(r),l=Math.cos(r);n=this.a*Er(r,u,l,this.en),e=this.a*i*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=oa((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=oa(Math.sin(e)/this.n)),i=Gi(i+this.long0),e=na(e)):(e=Lr(t.y/this.a,this.es,this.en),(r=Math.abs(e))<di?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=Gi(n)):r-1e-10<di&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};var ya={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=Gi(e-this.long0),r=n,a=Math.PI*Math.sin(n);;){var s=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=s,Math.abs(s)<1e-10)break}r/=2,Math.PI/2-Math.abs(n)<1e-10&&(i=0);var o=.900316316158*this.a*i*Math.cos(r)+this.x0,u=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=o,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=Gi(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var ba={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jr(this.es),this.e1=Yr(this.es),this.e2=$r(this.es),this.e3=ta(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ui(this.e,this.sinphi,this.cosphi),this.ml1=Kr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ui(this.e,this.sinphi,this.cosphi),this.ml2=Kr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Kr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=Kr(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var a=this.ns*Gi(n-this.long0),s=this.x0+e*Math.sin(a),o=this.y0+this.rh-e*Math.cos(a);return t.x=s,t.y=o,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;if(0!==n&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=Gi(this.long0+a/this.ns),i=na(this.g-n/this.a),t.x=r,t.y=i,t;var s=this.g-n/this.a;return i=ia(s,this.e0,this.e1,this.e2,this.e3),r=Gi(this.long0+a/this.ns),t.x=r,t.y=i,t},names:["Equidistant_Conic","eqdc"]};var ga={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,a=Gi(i-this.long0);Math.abs(r)<=1e-10&&(e=this.x0+this.R*a,n=this.y0);var s=oa(2*Math.abs(r/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(r)-di)<=1e-10)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var o=.5*Math.abs(Math.PI/a-a/Math.PI),u=o*o,l=Math.sin(s),h=Math.cos(s),c=h/(l+h-1),f=c*c,d=c*(2/l-1),p=d*d,v=Math.PI*this.R*(o*(c-p)+Math.sqrt(u*(c-p)*(c-p)-(p+u)*(f-p)))/(p+u);a<0&&(v=-v),e=this.x0+v;var y=u+c;return v=Math.PI*this.R*(d*y-o*Math.sqrt((p+u)*(u+1)-y*y))/(p+u),n=r>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,a,s,o,u,l,h,c,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,a=(i=t.x/c)*i+(r=t.y/c)*r,c=3*(r*r/(u=-2*(s=-Math.abs(r)*(1+a))+1+2*r*r+a*a)+(2*(o=s-2*r*r+i*i)*o*o/u/u/u-9*s*o/u/u)/27)/(l=(s-o*o/3/u)/u)/(h=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),f=Math.acos(c)/3,n=t.y>=0?(-h*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI:-(-h*Math.cos(f+Math.PI/3)-o/3/u)*Math.PI,e=Math.abs(i)<1e-10?this.long0:Gi(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var ma={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,a,s,o,u,l,h,c,f,d,p,v,y,b,g,m,_,x,w,M=t.x,P=t.y,O=Math.sin(t.y),k=Math.cos(t.y),S=Gi(M-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(di-P)*Math.sin(S),t.y=this.y0-this.a*(di-P)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(di+P)*Math.sin(S),t.y=this.y0+this.a*(di+P)*Math.cos(S),t):(g=this.sin_p12*O+this.cos_p12*k*Math.cos(S),b=(y=Math.acos(g))?y/Math.sin(y):1,t.x=this.x0+this.a*b*k*Math.sin(S),t.y=this.y0+this.a*b*(this.cos_p12*O-this.sin_p12*k*Math.cos(S)),t):(e=Jr(this.es),n=Yr(this.es),i=$r(this.es),r=ta(this.es),Math.abs(this.sin_p12-1)<=1e-10?(a=this.a*Kr(e,n,i,r,di),s=this.a*Kr(e,n,i,r,P),t.x=this.x0+(a-s)*Math.sin(S),t.y=this.y0-(a-s)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=1e-10?(a=this.a*Kr(e,n,i,r,di),s=this.a*Kr(e,n,i,r,P),t.x=this.x0+(a+s)*Math.sin(S),t.y=this.y0+(a+s)*Math.cos(S),t):(o=O/k,u=ea(this.a,this.e,this.sin_p12),l=ea(this.a,this.e,O),h=Math.atan((1-this.es)*o+this.es*u*this.sin_p12/(l*k)),m=0===(c=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(c)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(S)*Math.cos(h)/Math.sin(c)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),y=u*m*(1-(_=m*m)*(v=(d=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*d)*(1-v)/6+(x=_*m)/8*(p=f*d)*(1-2*v)+(w=x*m)/120*(v*(4-7*v)-3*f*f*(1-7*v))-w*m/48*p),t.x=this.x0+y*Math.sin(c),t.y=this.y0+y*Math.cos(c),t))},inverse:function(t){var e,n,i,r,a,s,o,u,l,h,c,f,d,p,v,y,b,g,m,_,x,w,M;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*di*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),a=this.long0,Math.abs(e)<=1e-10?s=this.lat0:(s=oa(r*this.sin_p12+t.y*i*this.cos_p12/e),o=Math.abs(this.lat0)-di,a=Math.abs(o)<=1e-10?this.lat0>=0?Gi(this.long0+Math.atan2(t.x,-t.y)):Gi(this.long0-Math.atan2(-t.x,t.y)):Gi(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=a,t.y=s,t}return u=Jr(this.es),l=Yr(this.es),h=$r(this.es),c=ta(this.es),Math.abs(this.sin_p12-1)<=1e-10?(f=this.a*Kr(u,l,h,c,di),e=Math.sqrt(t.x*t.x+t.y*t.y),s=ia((f-e)/this.a,u,l,h,c),a=Gi(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=s,t):Math.abs(this.sin_p12+1)<=1e-10?(f=this.a*Kr(u,l,h,c,di),e=Math.sqrt(t.x*t.x+t.y*t.y),s=ia((e-f)/this.a,u,l,h,c),a=Gi(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),v=Math.atan2(t.x,t.y),d=ea(this.a,this.e,this.sin_p12),y=Math.cos(v),g=-(b=this.e*this.cos_p12*y)*b/(1-this.es),m=3*this.es*(1-g)*this.sin_p12*this.cos_p12*y/(1-this.es),w=1-g*(x=(_=e/d)-g*(1+g)*Math.pow(_,3)/6-m*(1+3*g)*Math.pow(_,4)/24)*x/2-_*x*x*x/6,p=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*y),a=Gi(this.long0+Math.asin(Math.sin(v)*Math.sin(x)/Math.cos(p))),M=Math.sin(p),s=Math.atan2((M-this.es*w*this.sin_p12)*Math.tan(p),M*(1-this.es)),t.x=a,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]};var _a={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,a,s,o,u=t.x,l=t.y;return i=Gi(u-this.long0),e=Math.sin(l),n=Math.cos(l),r=Math.cos(i),1,((a=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(a)<=1e-10)&&(s=1*this.a*n*Math.sin(i),o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=o,t},inverse:function(t){var e,n,i,r,a,s,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=oa(e/this.a),i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=1e-10?(o=this.lat0,t.x=s,t.y=o,t):(o=oa(r*this.sin_p14+t.y*i*this.cos_p14/e),a=Math.abs(this.lat0)-di,Math.abs(a)<=1e-10?(s=this.lat0>=0?Gi(this.long0+Math.atan2(t.x,-t.y)):Gi(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=o,t):(s=Gi(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=s,t.y=o,t))},names:["ortho"]},xa=1,wa=2,Ma=3,Pa=4,Oa=5,ka=6,Sa=1,Ca=2,Aa=3,Ia=4;function ja(t,e,n,i){var r;return t<1e-10?(i.value=Sa,r=0):(r=Math.atan2(e,n),Math.abs(r)<=yi?i.value=Sa:r>yi&&r<=di+yi?(i.value=Ca,r-=di):r>di+yi||r<=-(di+yi)?(i.value=Aa,r=r>=0?r-gi:r+gi):(i.value=Ia,r+=di)),r}function Ea(t,e){var n=t+e;return n<-gi?n+=bi:n>+gi&&(n-=bi),n}var La={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=di-yi/2?this.face=Oa:this.lat0<=-(di-yi/2)?this.face=ka:Math.abs(this.long0)<=yi?this.face=xa:Math.abs(this.long0)<=di+yi?this.face=this.long0>0?wa:Pa:this.face=Ma,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,a,s,o={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Oa)r=di-e,n>=yi&&n<=di+yi?(u.value=Sa,i=n-di):n>di+yi||n<=-(di+yi)?(u.value=Ca,i=n>0?n-gi:n+gi):n>-(di+yi)&&n<=-yi?(u.value=Aa,i=n+di):(u.value=Ia,i=n);else if(this.face===ka)r=di+e,n>=yi&&n<=di+yi?(u.value=Sa,i=-n+di):n<yi&&n>=-yi?(u.value=Ca,i=-n):n<-yi&&n>=-(di+yi)?(u.value=Aa,i=-n-di):(u.value=Ia,i=n>0?-n+gi:-n-gi);else{var l,h,c,f,d,p;this.face===wa?n=Ea(n,+di):this.face===Ma?n=Ea(n,+gi):this.face===Pa&&(n=Ea(n,-di)),f=Math.sin(e),d=Math.cos(e),p=Math.sin(n),l=d*Math.cos(n),h=d*p,c=f,this.face===xa?i=ja(r=Math.acos(l),c,h,u):this.face===wa?i=ja(r=Math.acos(h),c,-l,u):this.face===Ma?i=ja(r=Math.acos(-l),c,-h,u):this.face===Pa?i=ja(r=Math.acos(-h),c,l,u):(r=i=0,u.value=Sa)}return s=Math.atan(12/gi*(i+Math.acos(Math.sin(i)*Math.cos(yi))-di)),a=Math.sqrt((1-Math.cos(r))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),u.value===Ca?s+=di:u.value===Aa?s+=gi:u.value===Ia&&(s+=1.5*gi),o.x=a*Math.cos(s),o.y=a*Math.sin(s),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,t.x=o.x,t.y=o.y,t},inverse:function(t){var e,n,i,r,a,s,o,u,l,h,c,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=Sa:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=Ca,e-=di):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=Aa,e=e<0?e+gi:e-gi):(p.value=Ia,e+=di),l=gi/12*Math.tan(e),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),s=Math.atan(a),(o=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(s)))))<-1?o=-1:o>1&&(o=1),this.face===Oa)u=Math.acos(o),d.phi=di-u,p.value===Sa?d.lam=s+di:p.value===Ca?d.lam=s<0?s+gi:s-gi:p.value===Aa?d.lam=s-di:d.lam=s;else if(this.face===ka)u=Math.acos(o),d.phi=u-di,p.value===Sa?d.lam=-s+di:p.value===Ca?d.lam=-s:p.value===Aa?d.lam=-s-di:d.lam=s<0?-s-gi:-s+gi;else{var v,y,b;l=(v=o)*v,y=(l+=(b=l>=1?0:Math.sqrt(1-l)*Math.sin(s))*b)>=1?0:Math.sqrt(1-l),p.value===Ca?(l=y,y=-b,b=l):p.value===Aa?(y=-y,b=-b):p.value===Ia&&(l=y,y=b,b=-l),this.face===wa?(l=v,v=-y,y=l):this.face===Ma?(v=-v,y=-y):this.face===Pa&&(l=v,v=y,y=-l),d.phi=Math.acos(-b)-di,d.lam=Math.atan2(y,v),this.face===wa?d.lam=Ea(d.lam,-di):this.face===Ma?d.lam=Ea(d.lam,-gi):this.face===Pa&&(d.lam=Ea(d.lam,+di))}return 0!==this.es&&(h=d.phi<0?1:0,c=Math.tan(d.phi),f=this.b/Math.sqrt(c*c+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),h&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Fa=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],za=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ta=vi/5,Ra=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var Na={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Gi(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*Ta);i<0?i=0:i>=18&&(i=17);var r={x:Ra(Fa[i],n=vi*(n-.08726646259971647*i))*e,y:Ra(za[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*.8487+this.x0,r.y=r.y*this.a*1.3523+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Fa[18][0],e.y=t.y<0?-di:di;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(za[n][0]>e.y)--n;else{if(!(za[n+1][0]<=e.y))break;++n}var i=za[n],r=5*(e.y-i[0])/(za[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var a=t(r);if(r-=a,Math.abs(a)<n)break}return r}((function(t){return(Ra(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,1e-10,100),e.x/=Ra(Fa[n],r),e.y=(5*n+r)*pi,t.y<0&&(e.y=-e.y)}return e.x=Gi(e.x+this.long0),e},names:["Robinson","robin"]};var Da,qa={init:function(){this.name="geocent"},forward:function(t){return rr(t,this.es,this.a)},inverse:function(t){return ar(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};vr.defaultDatum="WGS84",vr.Proj=ir,vr.WGS84=new vr.Proj("WGS84"),vr.Point=Ar,vr.toPoint=lr,vr.defs=Ti,vr.transform=cr,vr.mgrs=gr,vr.version="__VERSION__",(Da=vr).Proj.projections.add(Fr),Da.Proj.projections.add(qr),Da.Proj.projections.add(Ur),Da.Proj.projections.add(Wr),Da.Proj.projections.add(Vr),Da.Proj.projections.add(Hr),Da.Proj.projections.add(Zr),Da.Proj.projections.add(Qr),Da.Proj.projections.add(Xr),Da.Proj.projections.add(ra),Da.Proj.projections.add(sa),Da.Proj.projections.add(ua),Da.Proj.projections.add(la),Da.Proj.projections.add(ha),Da.Proj.projections.add(ca),Da.Proj.projections.add(fa),Da.Proj.projections.add(da),Da.Proj.projections.add(pa),Da.Proj.projections.add(va),Da.Proj.projections.add(ya),Da.Proj.projections.add(ba),Da.Proj.projections.add(ga),Da.Proj.projections.add(ma),Da.Proj.projections.add(_a),Da.Proj.projections.add(La),Da.Proj.projections.add(Na),Da.Proj.projections.add(qa);var Ua=vr,Ba=function(){function t(e){var n=e.from,i=void 0===n?"WGS84":n,r=e.to,a=void 0===r?"WGS84":r;Object(c.a)(this,t);var s=Ua(i,a);if(!s)throw new Error("Invalid projection");this.project=s.forward,this.unproject=s.inverse}return Object(f.a)(t,null,[{key:"defineProjectionAliases",value:function(t){var e=[];for(var n in t)e.push([n,t[n]]);Ua.defs(e)}}]),t}();function Ga(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Wa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wa(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function Wa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Va={0:0,1:32,2:48,3:48,4:64,5:0,6:0,7:0},Ha={BOOLEAN:ii.b,TINYINT:ii.h,SMALLINT:ii.f,MEDIUMINT:ii.g,INT:ii.g,INTEGER:ii.g,FLOAT:ii.d,DOUBLE:ii.e,REAL:ii.e,TEXT:ii.l,BLOB:ii.a,DATE:ii.l,DATETIME:ii.l,GEOMETRY:ii.a};function Za(){return(Za=Object(Nn.a)(Rn.a.mark((function t(e,n){var i,r,a,s,o,u,l,h,c,f,d,p,v,y,b,g;return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(null==n?void 0:n.geopackage)||{},r=i.sqlJsCDN,a=void 0===r?"https://sql.js.org/dist/":r,s=(null==n?void 0:n.gis)||{},o=s.reproject,u=void 0!==o&&o,l=s._targetCrs,h=void 0===l?"WGS84":l,t.next=4,Qa(e,a);case 4:for(c=t.sent,f=Ka(c),d=Ya(c),p={},v=Ga(f);!(y=v()).done;)b=y.value,g=b.table_name,p[g]=Ja(c,g,d,{reproject:u,_targetCrs:h});return t.abrupt("return",p);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qa(t,e){return Xa.apply(this,arguments)}function Xa(){return(Xa=Object(Nn.a)(Rn.a.mark((function t(e,n){var i;return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.next=3,qn()({locateFile:function(t){return""+n+t}});case 3:i=t.sent,t.next=9;break;case 6:return t.next=8,qn()();case 8:i=t.sent;case 9:return t.abrupt("return",new i.Database(new Uint8Array(e)));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ka(t){for(var e=t.prepare("SELECT * FROM gpkg_contents WHERE data_type='features';"),n=[];e.step();){var i=e.getAsObject();n.push(i)}return n}function Ja(t,e,n,i){var r,a=i.reproject,s=i._targetCrs,o=function(t,e){var n;try{n=t.prepare("SELECT * FROM gpkg_data_columns WHERE table_name=:tableName;")}catch(o){if(o.message.includes("no such table"))return null;throw o}n.bind({":tableName":e});var i={};for(;n.step();){var r=n.getAsObject(),a=r.column_name,s=r.name;i[a]=s||null}return i}(t,e),u=function(t,e){var n=t.prepare("SELECT * FROM gpkg_geometry_columns WHERE table_name=:tableName;");return n.bind({":tableName":e}),n.step(),n.getAsObject()}(t,e),l=function(t,e){var n=t.prepare("PRAGMA table_info(`"+e+"`)");for(;n.step();){var i=n.getAsObject(),r=i.name;if(i.pk)return r}return null}(t,e),h=t.exec("SELECT * FROM `"+e+"`;")[0],c=h.columns,f=h.values;if(a){var d=n[u.srs_id];r=new Ba({from:d,to:s})}for(var p,v=[],y=Ga(f);!(p=y()).done;){var b=$a(c,p.value,u,o,l);v.push(b)}var g=function(t,e){var n=t.prepare("PRAGMA table_info(`"+e+"`)"),i=[];for(;n.step();){var r=n.getAsObject(),a=r.name,s=r.type,o=r.notnull,u=new ri.a(a,new Ha[s],!o);i.push(u)}return new ai.a(i)}(t,e);return r?{geojsonFeatures:ui(v,r.project),schema:g}:{geojsonFeatures:v,schema:g}}function Ya(t){for(var e=t.prepare("SELECT * FROM gpkg_spatial_ref_sys;"),n={};e.step();){var i=e.getAsObject(),r=i.srs_id,a=i.definition;n[r]=a}return n}function $a(t,e,n,i,r){var a=t.indexOf(r),s=e[a],o=t.indexOf(n.column_name),u=function(t){var e=function(t){var e=Va[(14&t)/2];return{littleEndian:Boolean(1&t),envelopeLength:e,emptyGeometry:Boolean(16&t),extendedGeometryType:Boolean(32&t)}}(new DataView(t).getUint8(3)),n=e.envelopeLength;if(e.emptyGeometry)return null;var i=8+n;return hi(ni.parseSync(t.slice(i)))}(e[o].buffer),l={};if(i)for(var h=0,c=Object.entries(i);h<c.length;h++){var f=c[h],d=f[0],p=f[1],v=t.indexOf(d);l[p]=e[v]}else for(var y=0;y<t.length;y++){if(y!==a&&y!==o)l[t[y]]=e[y]}return{id:s,type:"Feature",geometry:u,properties:l}}var ts={id:"geopackage",name:"GeoPackage",module:"geopackage",version:"latest",extensions:["gpkg"],mimeTypes:["application/geopackage+sqlite3"],category:"geometry",parse:function(t,e){return Za.apply(this,arguments)},options:{geopackage:{sqlJsCDN:"https://sql.js.org/dist/"}}},es={id:"flatgeobuf",name:"FlatGeobuf",module:"flatgeobuf",version:"undefined"!=typeof __VERSION__?__VERSION__:"latest",worker:!0,extensions:["fgb"],mimeTypes:["application/octet-stream"],category:"geometry",options:{flatgeobuf:{}}},ns=n("qrXC");function is(t,e){if(0===t.byteLength)return[];var n=new Uint8Array(t);return Object(ns.deserialize)(n).features}function rs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function as(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rs(Object(n),!0).forEach((function(e){Object(b.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ss=as(as({},es),{},{parse:function(){var t=Object(Nn.a)(Rn.a.mark((function t(e,n){return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",is(e));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),parseSync:is,parseInBatchesFromStream:function(t,e){return Object(ns.deserializeStream)(t)},binary:!0}),os=n("3/Ur"),us=Cn.c.h1.withConfig({displayName:"parse-file__ErrorFormatHeader",componentId:"sc-12meutu-0"})(["color:red;font-size:16px;"]);Object(os.b)([ts,ss]);var ls=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={fileError:null,data:null},n}Object(r.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=Object(Nn.a)(Rn.a.mark((function t(){var e;return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFileDataUrl();case 2:e=t.sent,this.setState({data:e});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.getFileDataUrl=function(){var t=Object(Nn.a)(Rn.a.mark((function t(){var e,n,i,r;return Rn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,n=e.file,i=e.onFileUploaded,t.prev=1,t.next=4,Object(F.a)(n);case 4:r=t.sent,i(r,n),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),this.setState({fileError:t.t0.message});case 12:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),n.render=function(){var t=this.state.fileError;return s.a.createElement(us,{style:{color:"red"}},t)},e}(a.PureComponent);ls.defaultProps={file:null};var hs=Cn.c.div.withConfig({displayName:"file-uploader__Container",componentId:"sc-161nar-0"})(["display:flex;flex-flow:column nowrap;"]),cs=Cn.c.div.withConfig({displayName:"file-uploader__FileFrame",componentId:"sc-161nar-1"})(["display:flex;width:256px;height:20px;align-items:center;justify-content:center;border:1px dashed black;"]),fs=Cn.c.div.withConfig({displayName:"file-uploader__FileContainer",componentId:"sc-161nar-2"})(["display:flex;flex-flow:column nowrap;align-items:center;width:270px;"]),ds=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={uploadedFile:null},n.handleLoadFile=n.handleLoadFile.bind(Object(i.a)(n)),n.handleCleanFile=n.handleCleanFile.bind(Object(i.a)(n)),n}Object(r.a)(e,t);var n=e.prototype;return n.handleLoadFile=function(t){var e=t.dataTransfer.files[0];this.setState({uploadedFile:e}),t.preventDefault()},n.handleCleanFile=function(){(0,this.props.onFileRemoved)(),this.setState({uploadedFile:null})},n.render=function(){var t=this.props.onFileUploaded,e=this.state.uploadedFile;return s.a.createElement("div",null,!e&&s.a.createElement(hs,null,s.a.createElement(cs,{onDrop:this.handleLoadFile,onDragOver:function(t){return t.preventDefault()}},"Drag&Drop file")),s.a.createElement(fs,null,e&&s.a.createElement(ls,{file:e,onFileUploaded:t}),e&&s.a.createElement("button",{onClick:this.handleCleanFile},"Clean")))},e}(a.PureComponent),ps={latitude:49.254,longitude:-123.13,zoom:11,maxZoom:16,pitch:45,bearing:0},vs=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={viewState:ps,selectedExample:"Vancouver",selectedLoader:"GeoPackage",uploadedFile:null},n._onExampleChange=n._onExampleChange.bind(Object(i.a)(n)),n._onFileRemoved=n._onFileRemoved.bind(Object(i.a)(n)),n._onFileUploaded=n._onFileUploaded.bind(Object(i.a)(n)),n._onViewStateChange=n._onViewStateChange.bind(Object(i.a)(n)),n}Object(r.a)(e,t);var n=e.prototype;return n._onViewStateChange=function(t){var e=t.viewState;this.setState({viewState:e})},n._onExampleChange=function(t){var e=t.selectedLoader,n=t.selectedExample,i=t.example.viewState;this.setState({selectedLoader:e,selectedExample:n,viewState:i})},n._onFileRemoved=function(){this.setState({uploadedFile:null})},n._onFileUploaded=function(t,e){this.setState({selectedExample:e.name,uploadedFile:t})},n._renderControlPanel=function(){var t=this.state,e=t.selectedExample,n=t.viewState,i=t.selectedLoader;return s.a.createElement(zn,{examples:En,selectedExample:e,selectedLoader:i,onExampleChange:this._onExampleChange},s.a.createElement("div",{style:{textAlign:"center"}},"long/lat: ",n.longitude.toFixed(5),",",n.latitude.toFixed(5),", zoom:",n.zoom.toFixed(2)),s.a.createElement(ds,{onFileUploaded:this._onFileUploaded,onFileRemoved:this._onFileRemoved}))},n._renderLayer=function(){var t=this.state,e=t.selectedExample,n=t.selectedLoader,i=t.uploadedFile;return[new Sn({id:"geojson-"+e+"("+n+")",data:i||(En[n][e]?En[n][e].data:En.GeoPackage.Vancouver.data),opacity:.8,stroked:!1,filled:!0,extruded:!0,wireframe:!0,getElevation:function(t){return 10*Math.sqrt(t.properties.valuePerSqm)},getLineColor:[255,255,255],pickable:!0})]},n.render=function(){var t=this.state.viewState;return s.a.createElement("div",{style:{position:"relative",height:"100%"}},this._renderControlPanel(),s.a.createElement(l.a,{layers:this._renderLayer(),viewState:t,onViewStateChange:this._onViewStateChange,controller:{type:h.a,maxPitch:85}},s.a.createElement(u.a,{mapStyle:"https://basemaps.cartocdn.com/gl/positron-nolabels-gl-style/style.json",preventStyleDiffing:!0})))},e}(a.PureComponent);function ys(t){Object(o.render)(s.a.createElement(vs,null),t)}},p532:function(t,e,n){"use strict";var i=n("I+eb"),r=n("xDBR"),a=n("/qmn"),s=n("0Dky"),o=n("0GbY"),u=n("SEBh"),l=n("zfnd"),h=n("busE");i({target:"Promise",proto:!0,real:!0,forced:!!a&&s((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=u(this,o("Promise")),n="function"==typeof t;return this.then(n?function(n){return l(e,t()).then((function(){return n}))}:t,n?function(n){return l(e,t()).then((function(){throw n}))}:t)}}),r||"function"!=typeof a||a.prototype.finally||h(a.prototype,"finally",o("Promise").prototype.finally)},qrXC:function(t,e,n){n("E9XD");var i=n("yXPU"),r=n("o0o1"),a=n("J4zp");n("wcNg");var s=n("RIqP"),o=n("W8MJ"),u=n("lwsE"),l=n("aAyt"),h=n("rM32"),c=n("WxCf"),f=n("AbCW");function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){"use strict";var e,n=function t(e,n,i,r,a,s,o,l,h,c){u(this,t),this.name=e,this.type=n,this.title=i,this.description=r,this.width=a,this.precision=s,this.scale=o,this.nullable=l,this.unique=h,this.primary_key=c};!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(e||(e={}));var p,v,y=function t(e,n,i,r,a,s){u(this,t),this.org=e,this.code=n,this.name=i,this.description=r,this.wkt=a,this.code_string=s},b=new Int32Array(2),g=new Float32Array(b.buffer),m=new Float64Array(b.buffer),_=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],x=function(){function t(e,n){u(this,t),this.low=0|e,this.high=0|n}return o(t,[{key:"toFloat64",value:function(){return(this.low>>>0)+4294967296*this.high}},{key:"equals",value:function(t){return this.low==t.low&&this.high==t.high}}],[{key:"create",value:function(e,n){return 0==e&&0==n?t.ZERO:new t(e,n)}}]),t}();x.ZERO=new x(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(p||(p={}));var w=function(){function t(e){u(this,t),this.bytes_=e,this.position_=0}return o(t,[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return new x(this.readInt32(t),this.readInt32(t+4))}},{key:"readUint64",value:function(t){return new x(this.readUint32(t),this.readUint32(t+4))}},{key:"readFloat32",value:function(t){return b[0]=this.readInt32(t),g[0]}},{key:"readFloat64",value:function(t){return b[_?0:1]=this.readInt32(t),b[_?1:0]=this.readInt32(t+4),m[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}},{key:"writeFloat32",value:function(t,e){g[0]=e,this.writeInt32(t,b[0])}},{key:"writeFloat64",value:function(t,e){m[0]=e,this.writeInt32(t,b[_?0:1]),this.writeInt32(t+4,b[_?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),i="",r=0;if(t+=4,e===p.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){var a=void 0,s=this.readUint8(t+r++);if(s<192)a=s;else{var o=this.readUint8(t+r++);if(s<224)a=(31&s)<<6|63&o;else{var u=this.readUint8(t+r++);a=s<240?(15&s)<<12|(63&o)<<6|63&u:(7&s)<<18|(63&o)<<12|(63&u)<<6|63&this.readUint8(t+r++)}}a<65536?i+=String.fromCharCode(a):(a-=65536,i+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return i}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createLong",value:function(t,e){return x.create(t,e)}},{key:"createScalarList",value:function(t,e){for(var n=[],i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}},{key:"createObjList",value:function(t,e){for(var n=[],i=0;i<e;++i){var r=t(i);null!==r&&n.push(r.unpack())}return n}}],[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}]),t}(),M=function(){function t(e){var n;u(this,t),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,n=e||1024,this.bb=w.allocate(n),this.space=n}return o(t,[{key:"clear",value:function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}},{key:"forceDefaults",value:function(t){this.force_defaults=t}},{key:"dataBuffer",value:function(){return this.bb}},{key:"asUint8Array",value:function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}},{key:"prep",value:function(e,n){e>this.minalign&&(this.minalign=e);for(var i=1+~(this.bb.capacity()-this.space+n)&e-1;this.space<i+e+n;){var r=this.bb.capacity();this.bb=t.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}},{key:"pad",value:function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}},{key:"writeInt8",value:function(t){this.bb.writeInt8(this.space-=1,t)}},{key:"writeInt16",value:function(t){this.bb.writeInt16(this.space-=2,t)}},{key:"writeInt32",value:function(t){this.bb.writeInt32(this.space-=4,t)}},{key:"writeInt64",value:function(t){this.bb.writeInt64(this.space-=8,t)}},{key:"writeFloat32",value:function(t){this.bb.writeFloat32(this.space-=4,t)}},{key:"writeFloat64",value:function(t){this.bb.writeFloat64(this.space-=8,t)}},{key:"addInt8",value:function(t){this.prep(1,0),this.writeInt8(t)}},{key:"addInt16",value:function(t){this.prep(2,0),this.writeInt16(t)}},{key:"addInt32",value:function(t){this.prep(4,0),this.writeInt32(t)}},{key:"addInt64",value:function(t){this.prep(8,0),this.writeInt64(t)}},{key:"addFloat32",value:function(t){this.prep(4,0),this.writeFloat32(t)}},{key:"addFloat64",value:function(t){this.prep(8,0),this.writeFloat64(t)}},{key:"addFieldInt8",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}},{key:"addFieldInt16",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}},{key:"addFieldInt32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}},{key:"addFieldInt64",value:function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}},{key:"addFieldFloat32",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}},{key:"addFieldFloat64",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}},{key:"addFieldOffset",value:function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}},{key:"addFieldStruct",value:function(t,e,n){e!=n&&(this.nested(e),this.slot(t))}},{key:"nested",value:function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}},{key:"notNested",value:function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}},{key:"slot",value:function(t){null!==this.vtable&&(this.vtable[t]=this.offset())}},{key:"offset",value:function(){return this.bb.capacity()-this.space}},{key:"addOffset",value:function(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}},{key:"startObject",value:function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}},{key:"endObject",value:function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var i=2*(n+2);this.addInt16(i);var r=0,a=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var o=2;o<i;o+=2)if(this.bb.readInt16(a+o)!=this.bb.readInt16(s+o))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}},{key:"finish",value:function(t,e,n){var i=n?4:0;if(e){var r=e;if(this.prep(this.minalign,8+i),4!=r.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var a=3;a>=0;a--)this.writeInt8(r.charCodeAt(a))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}},{key:"finishSizePrefixed",value:function(t,e){this.finish(t,e,!0)}},{key:"requiredField",value:function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(0==this.bb.readInt16(i+e))throw new Error("FlatBuffers: field "+e+" must be set")}},{key:"startVector",value:function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}},{key:"endVector",value:function(){return this.writeInt32(this.vector_num_elems),this.offset()}},{key:"createSharedString",value:function(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);var e=this.createString(t);return this.string_maps.set(t,e),e}},{key:"createString",value:function(t){if(!t)return 0;var e;if(t instanceof Uint8Array)e=t;else{e=[];for(var n=0;n<t.length;){var i=void 0,r=t.charCodeAt(n++);(i=r<55296||r>=56320?r:(r<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var a=0,s=this.space,o=this.bb.bytes();a<e.length;a++)o[s++]=e[a];return this.endVector()}},{key:"createLong",value:function(t,e){return x.create(t,e)}},{key:"createObjectOffset",value:function(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}},{key:"createObjectOffsetList",value:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}},{key:"createStructOffsetList",value:function(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}],[{key:"growByteBuffer",value:function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,i=w.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}}]),t}(),P=function(){function t(){u(this,t),this.bb=null,this.bb_pos=0}return o(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):e.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsColumn",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,n){t.addFieldInt8(1,n,e.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,n,i,r,a,s,o,u,l,h,c,f){return t.startColumn(e),t.addName(e,n),t.addType(e,i),t.addTitle(e,r),t.addDescription(e,a),t.addWidth(e,s),t.addPrecision(e,o),t.addScale(e,u),t.addNullable(e,l),t.addUnique(e,h),t.addPrimaryKey(e,c),t.addMetadata(e,f),t.endColumn(e)}}]),t}(),O=function(){function t(){u(this,t),this.bb=null,this.bb_pos=0}return o(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsCrs",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,n,i,r,a,s,o){return t.startCrs(e),t.addOrg(e,n),t.addCode(e,i),t.addName(e,r),t.addDescription(e,a),t.addWkt(e,s),t.addCodeString(e,o),t.endCrs(e)}}]),t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(v||(v={}));var k=function(){function t(){u(this,t),this.bb=null,this.bb_pos=0}return o(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):v.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new P).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new O).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}],[{key:"getRootAsHeader",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,v.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,t.createLong(0,0))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}]),t}(),S=function(){function t(e,n,i,r,a,s,o,l){u(this,t),this.geometryType=e,this.columns=n,this.featuresCount=i,this.indexNodeSize=r,this.crs=a,this.title=s,this.description=o,this.metadata=l}return o(t,null,[{key:"fromByteBuffer",value:function(e){for(var i=k.getRootAsHeader(e),r=i.featuresCount().toFloat64(),a=i.indexNodeSize(),s=[],o=0;o<i.columnsLength();o++){var u=i.columns(o);if(!u)throw new Error("Column unexpectedly missing");if(!u.name())throw new Error("Column name unexpectedly missing");s.push(new n(u.name(),u.type(),u.title(),u.description(),u.width(),u.precision(),u.scale(),u.nullable(),u.unique(),u.primaryKey()))}var l=i.crs(),h=l?new y(l.org(),l.code(),l.name(),l.description(),l.wkt(),l.codeString()):null;return new t(i.geometryType(),s,r,a,h,i.title(),i.description(),i.metadata())}}]),t}(),C=function(){function t(){u(this,t),this.bb=null,this.bb_pos=0}return o(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):v.Unknown}},{key:"parts",value:function(e,n){var i=this.bb.__offset(this.bb_pos,18);return i?(n||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsGeometry",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addFloat64(e[n]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,v.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,n,i,r,a,s,o,u,l){return t.startGeometry(e),t.addEnds(e,n),t.addXy(e,i),t.addZ(e,r),t.addM(e,a),t.addT(e,s),t.addTm(e,o),t.addType(e,u),t.addParts(e,l),t.endGeometry(e)}}]),t}();function A(t,e,n){if(0!==t.length)if(Array.isArray(t[0])){var i,r=d(t);try{for(r.s();!(i=r.n()).done;)A(i.value,e,n)}catch(a){r.e(a)}finally{r.f()}}else 2===t.length?e.push.apply(e,s(t)):(e.push(t[0],t[1]),n.push(t[2]))}function I(t,e){for(var n=[],i=0;i<t.length;i+=2){var r=[t[i],t[i+1]];e&&r.push(e[i>>1]),n.push(r)}return n}function j(t){return t?v[t]:v.Unknown}function E(t){var e,n,i=t.coordinates,r=[],a=[],s=j(t.type),o=0;switch(t.type){case"Point":A(i,r,a);break;case"MultiPoint":case"LineString":A(i,r,a);break;case"MultiLineString":case"Polygon":var u=i;A(u,r,a),u.length>1&&(e=u.map((function(t){return o+=t.length})));break;case"MultiPolygon":n=i.map((function(t){return{type:"Polygon",coordinates:t}})).map(E);break;case"GeometryCollection":t.geometries&&(n=t.geometries.map(E))}return{xy:r,z:a.length>0?a:void 0,ends:e,type:s,parts:n}}function L(t,e){if(e===v.GeometryCollection){for(var n=[],i=0;i<t.partsLength();i++){var r=t.parts(i),a=r.type();n.push(L(r,a))}return{type:v[e],geometries:n}}if(e===v.MultiPolygon){for(var s=[],o=0;o<t.partsLength();o++)s.push(L(t.parts(o),v.Polygon));return{type:v[e],coordinates:s.map((function(t){return t.coordinates}))}}var u=function(t,e){var n=t.xyArray(),i=t.zArray();switch(e){case v.Point:var r=Array.from(n);return i&&r.push(i[0]),r;case v.MultiPoint:case v.LineString:return I(n,i);case v.MultiLineString:case v.Polygon:return function(t,e,n){if(!n||0===n.length)return[I(t,e)];var i,r=0,a=Array.from(n).map((function(e){return t.slice(r,r=e<<1)}));return e&&(r=0,i=Array.from(n).map((function(t){return e.slice(r,r=t)}))),a.map((function(t,e){return I(t,i?i[e]:void 0)}))}(n,i,t.endsArray())}}(t,e);return{type:v[e],coordinates:u}}var F=function(){function t(){u(this,t),this.bb=null,this.bb_pos=0}return o(t,[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new C).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new P).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}],[{key:"getRootAsFeature",value:function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,n){return e.setPosition(e.position()+4),(n||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,n,i,r){return t.startFeature(e),t.addGeometry(e,n),t.addProperties(e,i),t.addColumns(e,r),t.endFeature(e)}}]),t}(),z=new TextEncoder,T=new TextDecoder;function R(t,n,i){var r=i.columns,a=new M,s=0,o=1024,u=new Uint8Array(o),l=new DataView(u.buffer),h=function(t){if(!(s+t<o)){o*=2;var e=new Uint8Array(o);e.set(u),u=e,l=new DataView(u.buffer,s)}};if(r)for(var c=0;c<r.length;c++){var f=r[c],d=n[f.name];if(null!==d)switch(l.setUint16(s,c,!0),s+=2,f.type){case e.Bool:h(1),l.setUint8(s,d),s+=1;break;case e.Short:h(2),l.setInt16(s,d,!0),s+=2;break;case e.UShort:h(2),l.setUint16(s,d,!0),s+=2;break;case e.Int:h(4),l.setInt32(s,d,!0),s+=4;break;case e.UInt:h(4),l.setUint32(s,d,!0),s+=4;break;case e.Long:h(8),l.setBigInt64(s,BigInt(d),!0),s+=8;break;case e.Double:h(8),l.setFloat64(s,d,!0),s+=8;break;case e.DateTime:case e.String:var p=z.encode(d);h(4),l.setUint32(s,p.length,!0),s+=4,h(p.length),u.set(p,s),s+=p.length;break;default:throw new Error("Unknown type "+f.type)}}var v=null;s>0&&(v=F.createPropertiesVector(a,u.slice(0,s)));var y=function t(e,n){var i=n.xy,r=n.z,a=n.ends,s=n.parts,o=n.type;if(s){var u=s.map((function(n){return t(e,n)})),l=C.createPartsVector(e,u);return C.startGeometry(e),C.addParts(e,l),C.endGeometry(e)}var h,c,f=C.createXyVector(e,i);return r&&(h=C.createZVector(e,r)),a&&(c=C.createEndsVector(e,a)),C.startGeometry(e),c&&C.addEnds(e,c),C.addXy(e,f),h&&C.addZ(e,h),C.addType(e,o),C.endGeometry(e)}(a,t);F.startFeature(a),F.addGeometry(a,y),v&&F.addProperties(a,v);var b=F.endFeature(a);return a.finishSizePrefixed(b),a.asUint8Array()}function N(t,n){var i=n.columns,r={type:"Feature",geometry:L(t.geometry(),n.geometryType)};return i&&i.length>0&&(r.properties=function(t,n){var i={};if(!n||0===n.length)return i;var r=t.propertiesArray();if(!r)return i;for(var a=new DataView(r.buffer,r.byteOffset),s=t.propertiesLength(),o=0;o<s;){var u=a.getUint16(o,!0);o+=2;var l=n[u],h=l.name;switch(l.type){case e.Bool:i[h]=!!a.getUint8(o),o+=1;break;case e.Byte:i[h]=a.getInt8(o),o+=1;break;case e.UByte:i[h]=a.getUint8(o),o+=1;break;case e.Short:i[h]=a.getInt16(o,!0),o+=2;break;case e.UShort:i[h]=a.getUint16(o,!0),o+=2;break;case e.Int:i[h]=a.getInt32(o,!0),o+=4;break;case e.UInt:i[h]=a.getUint32(o,!0),o+=4;break;case e.Long:i[h]=Number(a.getBigInt64(o,!0)),o+=8;break;case e.ULong:i[h]=Number(a.getBigUint64(o,!0)),o+=8;break;case e.Double:i[h]=a.getFloat64(o,!0),o+=8;break;case e.DateTime:case e.String:var c=a.getUint32(o,!0);o+=4,i[h]=T.decode(r.subarray(o,o+c)),o+=c;break;default:throw new Error("Unknown type "+l.type)}}return i}(t,i)),r}var D,q=new Uint8Array(0);function U(t,e){if(!t.length)return e;if(!e.length)return t;var n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function B(t){this._source=t,this._array=q,this._index=0}B.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then((function(n){return t._array=q,t._index=0,n.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:U(e,n.value)}}))},B.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,n=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var i=new Uint8Array(t);return i.set(this._array.subarray(this._index)),function r(){return e._source.read().then((function(a){return a.done?(e._array=q,e._index=0,n>0?i.subarray(0,n):null):n+a.value.length>=t?(e._array=a.value,e._index=t-n,i.set(a.value.subarray(0,t-n),n),i):(i.set(a.value,n),n+=a.value.length,r())}))}()},B.prototype.cancel=function(){return this._source.cancel()},function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(D||(D={}));var G=function(){function t(){u(this,t)}return o(t,null,[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[D.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[D.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[D.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.log.apply(this,[D.Error].concat(e))}},{key:"log",value:function(t){for(var e,n,i,r,a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];if(!(this.logLevel>t))switch(t){case D.Debug:(e=console).debug.apply(e,s);break;case D.Info:(n=console).info.apply(n,s);break;case D.Warn:(i=console).warn.apply(i,s);break;case D.Error:(r=console).error.apply(r,s)}}}]),t}();function W(t,e){e=Math.min(Math.max(+e,2),65535);var n=t,i=n;do{i+=n=Math.ceil(n/e)}while(1!==n);return 40*i}function V(t,e,n,i){return H.apply(this,arguments)}function H(){return(H=f(r.mark((function t(e,n,i,s){var l,h,f,d,p,v,y,b,g;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=function(){function t(e,n){u(this,t),this._level=n,this.nodes=e}return o(t,[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}]),t}(),h=i.minX,f=i.minY,d=i.maxX,p=i.maxY,v=function(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var n=t,i=n,r=[n];do{i+=n=Math.ceil(n/e),r.push(n)}while(1!==n);var a=[];n=i;for(var s=0,o=r;s<o.length;s++){var u=o[s];a.push(n-u),n-=u}a.reverse(),r.reverse();for(var l=[],h=0;h<r.length;h++)l.push([a[h],a[h]+r[h]]);return l.reverse(),l}(e,n),y=v[0][0],b=[function(){var t=v.length-1;return new l([0,1],t)}()],g=r.mark((function t(){var e,i,o,u,g,m,_,x,w,M,P,O;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=b.shift(),G.debug("popped node: ".concat(e,", queueLength: ").concat(b.length)),i=e.startNode(),o=i>=y,u=a(v[e.level()],2),g=u[1],m=Math.min(e.endNode()+n,g),_=m-i,t.next=10,c(s(40*i,40*_));case 10:x=t.sent,w=new Float64Array(x),M=new Uint32Array(x),P=r.mark((function t(n){var a,s,u,c,v;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(d<w[0+(a=5*(n-i))])){t.next=3;break}return t.abrupt("return","continue");case 3:if(!(p<w[a+1])){t.next=5;break}return t.abrupt("return","continue");case 5:if(!(h>w[a+2])){t.next=7;break}return t.abrupt("return","continue");case 7:if(!(f>w[a+3])){t.next=9;break}return t.abrupt("return","continue");case 9:if(s=M[8+(a<<1)],u=Z(M[9+(a<<1)],s),!o){t.next=15;break}return G.debug("yielding feature"),t.next=14,[u,n-y];case 14:return t.abrupt("return","continue");case 15:if(!(void 0!==(c=b[b.length-1])&&c.level()==e.level()-1&&u<c.endNode()+6553.6)){t.next=19;break}return G.debug('Merging "nodeRange" request into existing range: '.concat(c,", newOffset: ").concat(c.endNode()," -> ").concat(u)),c.extendEndNodeToNewOffset(u),t.abrupt("return","continue");case 19:v=function(){var t=e.level()-1;return new l([u,u+1],t)}(),void 0!==c&&c.level()==v.level()?G.debug("Same level, but too far away. Pushing new request at offset: ".concat(u," rather than merging with distant ").concat(c)):G.debug("Pushing new level for ".concat(v," onto queue with nearestNodeRange: ").concat(c," since there's not already a range for this level.")),b.push(v);case 21:case"end":return t.stop()}}),t)})),O=i;case 15:if(!(O<m)){t.next=23;break}return t.delegateYield(P(O),"t0",17);case 17:if("continue"!==t.t0){t.next=20;break}return t.abrupt("continue",20);case 20:O++,t.next=15;break;case 23:case"end":return t.stop()}}),t)})),G.debug("starting stream search with queue: ".concat(b,", numItems: ").concat(e,", nodeSize: ").concat(n,", levelBounds: ").concat(v));case 4:if(0==b.length){t.next=8;break}return t.delegateYield(g(),"t0",6);case 6:t.next=4;break;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}G.logLevel=D.Info;var Q=new Uint8Array([102,103,98,3,102,103,98,0]),X=function(){function t(e,n,i,r){u(this,t),this.headerClient=e,this.header=n,this.headerLength=i,this.indexLength=r}var e,n;return o(t,[{key:"selectBbox",value:function(t){var e=this;return f(r.mark((function n(){var a,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.lengthBeforeTree(),s=e.headerClient,G.debug("starting: selectBbox, traversing index. lengthBeforeTree: ".concat(a)),n.delegateYield(h(l(V(e.header.featuresCount,e.header.indexNodeSize,t,function(){var t=i(r.mark((function t(e,n){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.getRange(a+e,n,0,"index"));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())),c),"t0",3);case 3:case"end":return n.stop()}}),n)})))()}},{key:"lengthBeforeTree",value:function(){return Q.length+4+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"featureClient",value:function(){return void 0===this._featureClient&&(this._featureClient=this.headerClient.clone()),this._featureClient}},{key:"readFeature",value:(n=i(r.mark((function t(e){var n,i,a,s,o,u,l,h;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=131072,i=e+this.lengthBeforeFeatures(),t.next=3,this.featureClient().getRange(i,4,n,"feature length");case 3:return s=t.sent,a=new DataView(s).getUint32(0,!0),G.debug("featureOffset: ".concat(i,", featureLength: ").concat(a)),t.next=8,this.featureClient().getRange(i+4,a,n,"feature data");case 8:return o=t.sent,u=new Uint8Array(o),(l=new Uint8Array(a+4)).set(u,4),h=new w(l),t.abrupt("return",(h.setPosition(4),F.getRootAsFeature(h)));case 14:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}],[{key:"open",value:(e=i(r.mark((function e(n){var i,a,s,o,u,l,h,c,f,d;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new K(n),a=function(){var t,e=0;for(t=0;t<3;t++)e+=40*Math.pow(16,t);return e}(),s=2024+a,G.debug("fetching header. minReqLength: ".concat(s," (assumedHeaderLength: 2024, assumedIndexLength: ").concat(a,")")),e.t0=Uint8Array,e.next=5,i.getRange(0,8,s,"header");case 5:if(e.t1=e.sent,(o=new e.t0(e.t1)).every((function(t,e){return Q[e]===t}))){e.next=9;break}throw G.error("bytes: ".concat(o," != ").concat(Q)),new Error("Not a FlatGeobuf file");case 9:return G.debug("magic bytes look good"),e.next=12,i.getRange(8,4,s,"header");case 12:if(l=e.sent,!((u=new DataView(l).getUint32(0,!0))>10485760||u<8)){e.next=16;break}throw new Error("Invalid header size");case 16:return G.debug("headerLength: ".concat(u)),e.next=19,i.getRange(12,u,s,"header");case 19:return h=e.sent,c=new w(new Uint8Array(h)),f=S.fromByteBuffer(c),d=W(f.featuresCount,f.indexNodeSize),e.abrupt("return",(G.debug("completed: opening http reader"),new t(i,f,u,d)));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]),t}(),K=function(){function t(e){u(this,t),this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new J(e):e}var e;return o(t,[{key:"clone",value:function(){var e=new t(this.httpClient);return e.buffer=this.buffer.slice(0),e.head=this.head,e}},{key:"getRange",value:(e=i(r.mark((function t(e,n,i,a){var s,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(G.debug("need Range: ".concat(e,"-").concat(e+n-1)),s=e-this.head,o=s+n,!(s>=0&&o<this.buffer.byteLength)){t.next=4;break}return t.abrupt("return",(G.debug("slicing existing Range: ".concat(s,"-").concat(o-1)),this.buffer.slice(s,o)));case 4:return u=Math.max(n,i),t.next=7,this.httpClient.getRange(e,u,a);case 7:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,n));case 10:case"end":return t.stop()}}),t,this)}))),function(t,n,i,r){return e.apply(this,arguments)})}]),t}(),J=function(){function t(e){u(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}var e;return o(t,[{key:"getRange",value:(e=i(r.mark((function t(e,n,i){var a;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=n,a="bytes=".concat(e,"-").concat(e+n-1),G.debug("request: #".concat(this.requestsEverMade,", purpose: ").concat(i,"), bytes: (this_request: ").concat(n,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(a)),t.next=5,fetch(this.url,{headers:{Range:a}});case 5:return t.abrupt("return",t.sent.arrayBuffer());case 6:case"end":return t.stop()}}),t,this)}))),function(t,n,i){return e.apply(this,arguments)})}]),t}();function Y(){return(Y=f(r.mark((function t(e,n,a){var s,o,u,l,h,f,d,p,v,y,b;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s="function"==typeof(o=e).slice?o:new B("function"==typeof o.read?o:o.getReader()),u=function(){var t=i(r.mark((function t(e){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,c(u(8));case 5:if(t.t1=t.sent,(l=new t.t0(t.t1)).every((function(t,e){return Q[e]===t}))){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,c(u(4));case 12:return t.t3=t.sent,l=new t.t2(t.t3),h=new w(l),f=h.readUint32(0),t.t4=Uint8Array,t.next=19,c(u(f));case 19:if(t.t5=t.sent,l=new t.t4(t.t5),h=new w(l),d=S.fromByteBuffer(h),a&&a(d),p=d.indexNodeSize,v=d.featuresCount,!(p>0)){t.next=29;break}return y=W(v,p),t.next=29,c(u(y));case 29:return t.next=31,c($(u,d,n));case 31:if(!(b=t.sent)){t.next=36;break}return t.next=34,b;case 34:t.next=29;break;case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t,e,n){return tt.apply(this,arguments)}function tt(){return(tt=i(r.mark((function t(e,n,i){var a,s,o,u;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(a=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return s=new w(a),o=s.readUint32(0),t.t2=Uint8Array,t.next=12,e(o,"feature data");case 12:return t.t3=t.sent,a=new t.t2(t.t3),(u=new Uint8Array(o+4)).set(a,4),(s=new w(u)).setPosition(4),t.abrupt("return",i(F.getRootAsFeature(s),n));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){var e=new M,n=null;t.columns&&(n=k.createColumnsVector(e,t.columns.map((function(t){return function(t,e){var n=t.createString(e.name);return P.startColumn(t),P.addName(t,n),P.addType(t,e.type),P.endColumn(t)}(e,t)}))));var i=e.createString("L1");k.startHeader(e),k.addFeaturesCount(e,new x(t.featuresCount,0)),k.addGeometryType(e,t.geometryType),k.addIndexNodeSize(e,0),n&&k.addColumns(e,n),k.addName(e,i);var r=k.endHeader(e);return e.finishSizePrefixed(r),e.asUint8Array()}t.deserialize=function(t,e,n){return t instanceof Uint8Array?function(t,e){return{type:"FeatureCollection",features:function(t,e,n){if(!t.subarray(0,7).every((function(t,e){return Q[e]===t})))throw new Error("Not a FlatGeobuf file");var i=new w(t),r=i.readUint32(Q.length);i.setPosition(Q.length+4);var a=S.fromByteBuffer(i);n&&n(a);var s=Q.length+4+r,o=a.indexNodeSize,u=a.featuresCount;o>0&&(s+=W(u,o));for(var l=[];s<i.capacity();){var h=i.readUint32(s);i.setPosition(s+4);var c=F.getRootAsFeature(i);l.push(e(c,a)),s+=4+h}return l}(t,N,e)}}(t,n):t instanceof ReadableStream?function(t,e){return function(t,e,n){return Y.apply(this,arguments)}(t,N,e)}(t,n):function(t,e,n){return(i=f(r.mark((function t(e,n,i,a){var s,o,u,h,f,d,p,v,y;return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(X.open(e));case 2:s=t.sent,G.debug("opened reader"),a&&a(s.header),o=!0,u=!1,t.prev=6,f=l(s.selectBbox(n));case 8:return t.next=10,c(f.next());case 10:return d=t.sent,o=d.done,t.next=14,c(d.value);case 14:if(p=t.sent,o){t.next=25;break}return v=p,t.next=19,c(s.readFeature(v[0]));case 19:return y=t.sent,t.next=22,i(y,s.header);case 22:o=!0,t.next=8;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(6),u=!0,h=t.t0;case 31:if(t.prev=31,t.prev=32,o||null==f.return){t.next=36;break}return t.next=36,c(f.return());case 36:if(t.prev=36,!u){t.next=39;break}throw h;case 39:return t.finish(36);case 40:return t.finish(31);case 41:case"end":return t.stop()}}),t,null,[[6,27,31,41],[32,,36,40]])}))),function(t,e,n,r){return i.apply(this,arguments)})(t,e,N,n);var i}(t,e,n)},t.serialize=function(t){return function(t){var i=function(t){var i=t.features[0],r=i.properties,a=null;return r&&(a=Object.keys(r).map((function(t){return new n(t,function(t){if("boolean"==typeof t)return e.Bool;if("number"==typeof t)return t%1==0?e.Int:e.Double;if("string"==typeof t)return e.String;if(null===t)return e.String;throw new Error("Unknown type (value '".concat(t,"')"))}(r[t]),null,null,-1,-1,-1,!0,!1,!1)}))),new S(j(i.geometry.type),a,t.features.length,0,null,null,null,null)}(t),r=et(i),a=t.features.map((function(t){return R(E(t.geometry),t.properties,i)})),s=a.map((function(t){return t.length})).reduce((function(t,e){return t+e})),o=new Uint8Array(Q.length+r.length+s);o.set(r,Q.length);var u,l=Q.length+r.length,h=d(a);try{for(h.s();!(u=h.n()).done;){var c=u.value;o.set(c,l),l+=c.length}}catch(f){h.e(f)}finally{h.f()}return o.set(Q),o}(t)},Object.defineProperty(t,"__esModule",{value:!0})}(e)},rM32:function(t,e){t.exports=function(t,e){var n={},i=!1;function r(n,r){return i=!0,r=new Promise((function(e){e(t[n](r))})),{done:!1,value:e(r)}}return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(t){return i?(i=!1,t):r("next",t)},"function"==typeof t.throw&&(n.throw=function(t){if(i)throw i=!1,t;return r("throw",t)}),"function"==typeof t.return&&(n.return=function(t){return i?(i=!1,t):r("return",t)}),n}},rxlC:function(t,e,n){"use strict";t.exports=r,t.exports.default=r;var i=1e20;function r(t,e,n,i,r,a){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=i||.25,this.fontFamily=r||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var s=this.size=this.fontSize+2*this.buffer,o=s+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Uint16Array(o),this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function a(t,e,n,i,r,a){for(var o=0;o<e;o++)s(t,o,e,n,i,r,a);for(var u=0;u<n;u++)s(t,u*e,1,e,i,r,a)}function s(t,e,n,r,a,s,o){var u,l,h,c;for(s[0]=0,o[0]=-i,o[1]=i,u=0;u<r;u++)a[u]=t[e+u*n];for(u=1,l=0,h=0;u<r;u++){do{c=s[l],h=(a[u]-a[c]+u*u-c*c)/(u-c)/2}while(h<=o[l]&&--l>-1);s[++l]=u,o[l]=h,o[l+1]=i}for(u=0,l=0;u<r;u++){for(;o[l+1]<u;)l++;c=s[l],t[e+u*n]=a[c]+(u-c)*(u-c)}}r.prototype._draw=function(t,e){var n,r,s,o,u,l,h,c,f=this.ctx.measureText(t),d=f.width,p=2*this.buffer;e&&void 0!==f.actualBoundingBoxLeft?(u=Math.floor(f.actualBoundingBoxAscent)-this.middle,l=Math.max(0,this.middle-Math.ceil(f.actualBoundingBoxAscent)),h=this.buffer,n=(r=Math.min(this.size,Math.ceil(f.actualBoundingBoxRight-f.actualBoundingBoxLeft)))+p,s=(o=Math.min(this.size-l,Math.ceil(f.actualBoundingBoxAscent+f.actualBoundingBoxDescent)))+p):(n=r=this.size,s=o=this.size,u=0,l=h=0),r&&o&&(this.ctx.clearRect(h,l,r,o),this.ctx.fillText(t,this.buffer,this.middle),c=this.ctx.getImageData(h,l,r,o));var v=new Uint8ClampedArray(n*s);return function(t,e,n,r,a,s,o){s.fill(i,0,e*n),o.fill(0,0,e*n);for(var u=(e-r)/2,l=0;l<a;l++)for(var h=0;h<r;h++){var c=(l+u)*e+h+u,f=t.data[4*(l*r+h)+3]/255;if(1===f)s[c]=0,o[c]=i;else if(0===f)s[c]=i,o[c]=0;else{var d=Math.max(0,.5-f),p=Math.max(0,f-.5);s[c]=d*d,o[c]=p*p}}}(c,n,s,r,o,this.gridOuter,this.gridInner),a(this.gridOuter,n,s,this.f,this.v,this.z),a(this.gridInner,n,s,this.f,this.v,this.z),function(t,e,n,i,r,a,s){for(var o=0;o<e*n;o++){var u=Math.sqrt(i[o])-Math.sqrt(r[o]);t[o]=Math.round(255-255*(u/a+s))}}(v,n,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:v,metrics:{width:r,height:o,sdfWidth:n,sdfHeight:s,top:u,left:0,advance:d,fontAscent:f.fontBoundingBoxAscent}}},r.prototype.draw=function(t){return this._draw(t,!1).data},r.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},sP1I:function(t,e,n){var i=n("gxEx");function r(t){var e,n;function r(e,n){try{var s=t[e](n),o=s.value,u=o instanceof i;Promise.resolve(u?o.wrapped:o).then((function(t){u?r("return"===e?"return":"next",t):a(s.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(l){a("throw",l)}}function a(t,i){switch(t){case"return":e.resolve({value:i,done:!0});break;case"throw":e.reject(i);break;default:e.resolve({value:i,done:!1})}(e=e.next)?r(e.key,e.arg):n=null}this._invoke=function(t,i){return new Promise((function(a,s){var o={key:t,arg:i,resolve:a,reject:s,next:null};n?n=n.next=o:(e=n=o,r(t,i))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(t){return this._invoke("next",t)},r.prototype.throw=function(t){return this._invoke("throw",t)},r.prototype.return=function(t){return this._invoke("return",t)},t.exports=r},wTVA:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},wkBT:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},yXPU:function(t,e){function n(t,e,n,i,r,a,s){try{var o=t[a](s),u=o.value}catch(l){return void n(l)}o.done?e(u):Promise.resolve(u).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,a){var s=t.apply(e,i);function o(t){n(s,r,a,o,u,"next",t)}function u(t){n(s,r,a,o,u,"throw",t)}o(void 0)}))}}},zfnd:function(t,e,n){var i=n("glrk"),r=n("hh1v"),a=n("8GlL");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}}}]);