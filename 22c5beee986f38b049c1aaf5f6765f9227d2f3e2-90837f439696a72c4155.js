(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+PVp":function(_,t,e){"use strict";e.d(t,"a",(function(){return V}));var S=e("o0o1"),E=e.n(S),n=(e("wcNg"),e("HaE+")),R=e("rePB"),r=e("pkf7");function a(_,t){for(var e=new Array(t.mipMapLevels),S=t.width,E=t.height,n=0,R=0;R<t.mipMapLevels;++R){var r=C(t,S,E,_,R),a=A(_,R,n,r);e[R]={compressed:!0,format:t.internalFormat,data:a,width:S,height:E,levelSize:r},S=Math.max(1,S>>1),E=Math.max(1,E>>1),n+=r}return e}function A(_,t,e,S){return Array.isArray(_)?_[t].levelData:new Uint8Array(_.buffer,_.byteOffset+e,S)}function C(_,t,e,S,E){return Array.isArray(S)?_.sizeFunction(S[E]):_.sizeFunction(t,e)}var i=e("15R0"),o={131:i.a.COMPRESSED_RGB_S3TC_DXT1_EXT,132:i.a.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:i.a.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:i.a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:i.a.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:i.a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:i.a.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:i.a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:i.a.COMPRESSED_RED_RGTC1_EXT,140:i.a.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:i.a.COMPRESSED_RED_GREEN_RGTC2_EXT,142:i.a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:i.a.COMPRESSED_RGB8_ETC2,148:i.a.COMPRESSED_SRGB8_ETC2,149:i.a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:i.a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:i.a.COMPRESSED_RGBA8_ETC2_EAC,152:i.a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:i.a.COMPRESSED_R11_EAC,154:i.a.COMPRESSED_SIGNED_R11_EAC,155:i.a.COMPRESSED_RG11_EAC,156:i.a.COMPRESSED_SIGNED_RG11_EAC,157:i.a.COMPRESSED_RGBA_ASTC_4x4_KHR,158:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:i.a.COMPRESSED_RGBA_ASTC_5x4_KHR,160:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:i.a.COMPRESSED_RGBA_ASTC_5x5_KHR,162:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:i.a.COMPRESSED_RGBA_ASTC_6x5_KHR,164:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:i.a.COMPRESSED_RGBA_ASTC_6x6_KHR,166:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:i.a.COMPRESSED_RGBA_ASTC_8x5_KHR,168:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:i.a.COMPRESSED_RGBA_ASTC_8x6_KHR,170:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:i.a.COMPRESSED_RGBA_ASTC_8x8_KHR,172:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:i.a.COMPRESSED_RGBA_ASTC_10x5_KHR,174:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:i.a.COMPRESSED_RGBA_ASTC_10x6_KHR,176:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:i.a.COMPRESSED_RGBA_ASTC_10x8_KHR,178:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:i.a.COMPRESSED_RGBA_ASTC_10x10_KHR,180:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:i.a.COMPRESSED_RGBA_ASTC_12x10_KHR,182:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:i.a.COMPRESSED_RGBA_ASTC_12x12_KHR,184:i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:i.a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:i.a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:i.a.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:i.a.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:i.a.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:i.a.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:i.a.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:i.a.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:i.a.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:i.a.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:i.a.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:i.a.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:i.a.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:i.a.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:i.a.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:i.a.COMPRESSED_RGBA_ASTC_12x12_KHR};var P=[171,75,84,88,32,50,48,187,13,10,26,10];function D(_){var t,e=new Uint8Array(_),S=Object(r.a)(e),E=Math.max(1,S.levels.length),n=S.pixelWidth,R=S.pixelHeight,A=(t=S.vkFormat,o[t]);return a(S.levels,{mipMapLevels:E,width:n,height:R,sizeFunction:function(_){return _.uncompressedByteLength},internalFormat:A})}var T=e("P+ME"),M=u,G=B,O=B,s={MAGIC_NUMBER:542327876,HEADER_LENGTH:31,MAGIC_NUMBER_INDEX:0,HEADER_SIZE_INDEX:1,HEADER_FLAGS_INDEX:2,HEADER_HEIGHT_INDEX:3,HEADER_WIDTH_INDEX:4,MIPMAPCOUNT_INDEX:7,HEADER_PF_FLAGS_INDEX:20,HEADER_PF_FOURCC_INDEX:21,DDSD_MIPMAPCOUNT:131072,DDPF_FOURCC:4,PIXEL_FORMATS:{DXT1:i.a.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:i.a.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:i.a.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":i.a.COMPRESSED_RGB_ATC_WEBGL,ATCA:i.a.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:i.a.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},SIZE_FUNCTIONS:{DXT1:u,DXT3:B,DXT5:B,"ATC ":M,ATCA:G,ATCI:O}};function f(_){var t=new Int32Array(_,0,s.HEADER_LENGTH),e=t[s.HEADER_PF_FOURCC_INDEX];Object(T.a)(Boolean(t[s.HEADER_PF_FLAGS_INDEX]&s.DDPF_FOURCC),"DDS: Unsupported format, must contain a FourCC code");var S,E=(S=e,String.fromCharCode(255&S,S>>8&255,S>>16&255,S>>24&255)),n=s.PIXEL_FORMATS[E],R=s.SIZE_FUNCTIONS[E];Object(T.a)(n&&R,"DDS: Unknown pixel format "+e);var r=1;t[s.HEADER_FLAGS_INDEX]&s.DDSD_MIPMAPCOUNT&&(r=Math.max(1,t[s.MIPMAPCOUNT_INDEX]));var A=t[s.HEADER_WIDTH_INDEX],C=t[s.HEADER_HEIGHT_INDEX],i=t[s.HEADER_SIZE_INDEX]+4;return a(new Uint8Array(_,i),{mipMapLevels:r,width:A,height:C,sizeFunction:R,internalFormat:n})}function u(_,t){return(_+3>>2)*(t+3>>2)*8}function B(_,t){return(_+3>>2)*(t+3>>2)*16}var H=55727696,c=1347834371,l=13,x=52,h=0,X=2,U=4,p=6,L=7,I=11,d=12,K={0:[i.a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[i.a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[i.a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[i.a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[i.a.COMPRESSED_RGB_ETC1_WEBGL],7:[i.a.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[i.a.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[i.a.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[i.a.COMPRESSED_RGB8_ETC2],23:[i.a.COMPRESSED_RGBA8_ETC2_EAC],24:[i.a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[i.a.COMPRESSED_R11_EAC],26:[i.a.COMPRESSED_RG11_EAC],27:[i.a.COMPRESSED_RGBA_ASTC_4X4_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[i.a.COMPRESSED_RGBA_ASTC_5X4_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[i.a.COMPRESSED_RGBA_ASTC_5X5_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[i.a.COMPRESSED_RGBA_ASTC_6X5_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[i.a.COMPRESSED_RGBA_ASTC_6X6_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[i.a.COMPRESSED_RGBA_ASTC_8X5_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[i.a.COMPRESSED_RGBA_ASTC_8X6_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[i.a.COMPRESSED_RGBA_ASTC_8X8_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[i.a.COMPRESSED_RGBA_ASTC_10X5_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[i.a.COMPRESSED_RGBA_ASTC_10X6_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[i.a.COMPRESSED_RGBA_ASTC_10X8_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[i.a.COMPRESSED_RGBA_ASTC_10X10_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[i.a.COMPRESSED_RGBA_ASTC_12X10_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[i.a.COMPRESSED_RGBA_ASTC_12X12_KHR,i.a.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},m={0:y,1:y,2:v,3:v,6:b,7:b,9:w,11:w,22:b,23:w,24:b,25:b,26:w,27:w,28:function(_,t){return Math.floor((_+4)/5)*Math.floor((t+3)/4)*16},29:function(_,t){return Math.floor((_+4)/5)*Math.floor((t+4)/5)*16},30:function(_,t){return Math.floor((_+5)/6)*Math.floor((t+4)/5)*16},31:function(_,t){return Math.floor((_+5)/6)*Math.floor((t+5)/6)*16},32:function(_,t){return Math.floor((_+7)/8)*Math.floor((t+4)/5)*16},33:function(_,t){return Math.floor((_+7)/8)*Math.floor((t+5)/6)*16},34:function(_,t){return Math.floor((_+7)/8)*Math.floor((t+7)/8)*16},35:function(_,t){return Math.floor((_+9)/10)*Math.floor((t+4)/5)*16},36:function(_,t){return Math.floor((_+9)/10)*Math.floor((t+5)/6)*16},37:function(_,t){return Math.floor((_+9)/10)*Math.floor((t+7)/8)*16},38:function(_,t){return Math.floor((_+9)/10)*Math.floor((t+9)/10)*16},39:function(_,t){return Math.floor((_+11)/12)*Math.floor((t+9)/10)*16},40:function(_,t){return Math.floor((_+11)/12)*Math.floor((t+11)/12)*16}};function y(_,t){return(_=Math.max(_,16))*(t=Math.max(t,8))/4}function v(_,t){return(_=Math.max(_,8))*(t=Math.max(t,8))/2}function b(_,t){return Math.floor((_+3)/4)*Math.floor((t+3)/4)*8}function w(_,t){return Math.floor((_+3)/4)*Math.floor((t+3)/4)*16}function N(_){if(function(_){var t=new Uint8Array(_.buffer||_,_.byteOffset||0,P.length);return!(t[0]!==P[0]||t[1]!==P[1]||t[2]!==P[2]||t[3]!==P[3]||t[4]!==P[4]||t[5]!==P[5]||t[6]!==P[6]||t[7]!==P[7]||t[8]!==P[8]||t[9]!==P[9]||t[10]!==P[10]||t[11]!==P[11])}(_))return D(_);if(function(_){return new Uint32Array(_,0,s.HEADER_LENGTH)[s.MAGIC_NUMBER_INDEX]===s.MAGIC_NUMBER}(_))return f(_);if(function(_){var t=new Uint32Array(_,0,l)[h];return t===H||t===c}(_))return function(_){var t=new Uint32Array(_,0,l),e=t[X],S=t[U],E=K[e]||[],n=E.length>1&&S?E[1]:E[0],R=m[e],r=t[I],A=t[L],C=t[p],i=x+t[d];return a(new Uint8Array(_,i),{mipMapLevels:r,width:A,height:C,sizeFunction:R,internalFormat:n})}(_);throw new Error("Texture container format not recognized")}function g(_,t){var e=Object.keys(_);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(_);t&&(S=S.filter((function(t){return Object.getOwnPropertyDescriptor(_,t).enumerable}))),e.push.apply(e,S)}return e}function F(_){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?g(Object(e),!0).forEach((function(t){Object(R.a)(_,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(t){Object.defineProperty(_,t,Object.getOwnPropertyDescriptor(e,t))}))}return _}var k,V=F(F({},{id:"compressed-texture",name:"CompressedTexture",version:"3.0.0-alpha.4",extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["application/octet-stream","image/vnd-ms.dds","image/ktx","image/ktx2"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",workerUrl:"https://unpkg.com/@loaders.gl/textures@3.0.0-alpha.4/dist/compressed-texture-loader.worker.js"}}}),{},{parse:(k=Object(n.a)(E.a.mark((function _(t,e){return E.a.wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",N(t));case 1:case"end":return _.stop()}}),_)}))),function(_,t){return k.apply(this,arguments)})})},"15R0":function(_,t,e){"use strict";e.d(t,"a",(function(){return S}));var S={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919}},ipMt:function(_,t,e){"use strict";function S(_,t){var e;if("undefined"==typeof Symbol||null==_[Symbol.iterator]){if(Array.isArray(_)||(e=function(_,t){if(!_)return;if("string"==typeof _)return E(_,t);var e=Object.prototype.toString.call(_).slice(8,-1);"Object"===e&&_.constructor&&(e=_.constructor.name);if("Map"===e||"Set"===e)return Array.from(_);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return E(_,t)}(_))||t&&_&&"number"==typeof _.length){e&&(_=e);var S=0;return function(){return S>=_.length?{done:!0}:{done:!1,value:_[S++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=_[Symbol.iterator]()).next.bind(e)}function E(_,t){(null==t||t>_.length)&&(t=_.length);for(var e=0,S=new Array(t);e<t;e++)S[e]=_[e];return S}e.d(t,"a",(function(){return a}));var n=["","WEBKIT_","MOZ_"],R={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},r=null;function a(_){if(!r){_=_||function(){try{return document.createElement("canvas").getContext("webgl")}catch(_){return null}}(),r=new Set;for(var t,e=S(n);!(t=e()).done;){var E=t.value;for(var a in R)if(_&&_.getExtension(""+E+a)){var A=R[a];r.add(A)}}}return r}},pkf7:function(_,t,e){"use strict";(function(_){e.d(t,"a",(function(){return G}));var S=e("vuIU"),E=e("1OyB");new Uint8Array([0]);var n,R,r,a,A,C,i,o,P=[171,75,84,88,32,50,48,187,13,10,26,10];!function(_){_[_.NONE=0]="NONE",_[_.BASISLZ=1]="BASISLZ",_[_.ZSTD=2]="ZSTD",_[_.ZLIB=3]="ZLIB"}(n||(n={})),function(_){_[_.BASICFORMAT=0]="BASICFORMAT"}(R||(R={})),function(_){_[_.UNSPECIFIED=0]="UNSPECIFIED",_[_.ETC1S=163]="ETC1S",_[_.UASTC=166]="UASTC"}(r||(r={})),function(_){_[_.UNSPECIFIED=0]="UNSPECIFIED",_[_.SRGB=1]="SRGB"}(a||(a={})),function(_){_[_.UNSPECIFIED=0]="UNSPECIFIED",_[_.LINEAR=1]="LINEAR",_[_.SRGB=2]="SRGB",_[_.ITU=3]="ITU",_[_.NTSC=4]="NTSC",_[_.SLOG=5]="SLOG",_[_.SLOG2=6]="SLOG2"}(A||(A={})),function(_){_[_.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",_[_.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(C||(C={})),function(_){_[_.RGB=0]="RGB",_[_.RRR=3]="RRR",_[_.GGG=4]="GGG",_[_.AAA=15]="AAA"}(i||(i={})),function(_){_[_.RGB=0]="RGB",_[_.RGBA=3]="RGBA",_[_.RRR=4]="RRR",_[_.RRRG=5]="RRRG"}(o||(o={}));var D=function _(){Object(E.a)(this,_),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=n.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:R.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:r.UNSPECIFIED,colorPrimaries:a.SRGB,transferFunction:a.SRGB,flags:C.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null},T=function(){function _(t,e,S,n){Object(E.a)(this,_),this._dataView=new DataView(t.buffer,t.byteOffset+e,S),this._littleEndian=n,this._offset=0}return Object(S.a)(_,[{key:"_nextUint8",value:function(){var _=this._dataView.getUint8(this._offset);return this._offset+=1,_}},{key:"_nextUint16",value:function(){var _=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,_}},{key:"_nextUint32",value:function(){var _=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,_}},{key:"_nextUint64",value:function(){var _=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,_}},{key:"_skip",value:function(_){return this._offset+=_,this}},{key:"_scan",value:function(_){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=this._offset,S=0;this._dataView.getUint8(this._offset)!==t&&S<_;)S++,this._offset++;return S<_&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+e,S)}}]),_}();function M(t){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(t):_.from(t).toString("utf8")}function G(_){var t=new Uint8Array(_.buffer,_.byteOffset,P.length);if(t[0]!==P[0]||t[1]!==P[1]||t[2]!==P[2]||t[3]!==P[3]||t[4]!==P[4]||t[5]!==P[5]||t[6]!==P[6]||t[7]!==P[7]||t[8]!==P[8]||t[9]!==P[9]||t[10]!==P[10]||t[11]!==P[11])throw new Error("Missing KTX 2.0 identifier.");var e=new D,S=17*Uint32Array.BYTES_PER_ELEMENT,E=new T(_,P.length,S,!0);e.vkFormat=E._nextUint32(),e.typeSize=E._nextUint32(),e.pixelWidth=E._nextUint32(),e.pixelHeight=E._nextUint32(),e.pixelDepth=E._nextUint32(),e.layerCount=E._nextUint32(),e.faceCount=E._nextUint32();var n=E._nextUint32();e.supercompressionScheme=E._nextUint32();for(var R=E._nextUint32(),r=E._nextUint32(),a=E._nextUint32(),A=E._nextUint32(),C=E._nextUint64(),i=E._nextUint64(),o=new T(_,P.length+S,3*n*8,!0),G=0;G<n;G++)e.levels.push({levelData:new Uint8Array(_.buffer,_.byteOffset+o._nextUint64(),o._nextUint64()),uncompressedByteLength:o._nextUint64()});for(var O=new T(_,R,r,!0),s={vendorId:O._skip(4)._nextUint16(),descriptorType:O._nextUint16(),versionNumber:O._nextUint16(),descriptorBlockSize:O._nextUint16(),colorModel:O._nextUint8(),colorPrimaries:O._nextUint8(),transferFunction:O._nextUint8(),flags:O._nextUint8(),texelBlockDimension:{x:O._nextUint8()+1,y:O._nextUint8()+1,z:O._nextUint8()+1,w:O._nextUint8()+1},bytesPlane:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],samples:[]},f=(s.descriptorBlockSize/4-6)/4,u=0;u<f;u++)s.samples[u]={bitOffset:O._nextUint16(),bitLength:O._nextUint8(),channelID:O._nextUint8(),samplePosition:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],sampleLower:O._nextUint32(),sampleUpper:O._nextUint32()};e.dataFormatDescriptor.length=0,e.dataFormatDescriptor.push(s);for(var B=new T(_,a,A,!0);B._offset<A;){var H=B._nextUint32(),c=B._scan(H),l=M(c),x=B._scan(H-c.byteLength);e.keyValue[l]=l.match(/^ktx/i)?M(x):x,H%4&&B._skip(4-H%4)}if(i<=0)return e;for(var h=new T(_,C,i,!0),X=h._nextUint16(),U=h._nextUint16(),p=h._nextUint32(),L=h._nextUint32(),I=h._nextUint32(),d=h._nextUint32(),K=[],m=0;m<n;m++)K.push({imageFlags:h._nextUint32(),rgbSliceByteOffset:h._nextUint32(),rgbSliceByteLength:h._nextUint32(),alphaSliceByteOffset:h._nextUint32(),alphaSliceByteLength:h._nextUint32()});var y=C+h._offset,v=y+p,b=v+L,w=b+I,N=new Uint8Array(_.buffer,_.byteOffset+y,p),g=new Uint8Array(_.buffer,_.byteOffset+v,L),F=new Uint8Array(_.buffer,_.byteOffset+b,I),k=new Uint8Array(_.buffer,_.byteOffset+w,d);return e.globalData={endpointCount:X,selectorCount:U,imageDescs:K,endpointsData:N,selectorsData:g,tablesData:F,extendedData:k},e}}).call(this,e("HDXh").Buffer)}}]);